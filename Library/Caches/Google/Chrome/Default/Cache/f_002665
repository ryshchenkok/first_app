define("commons/base_object/reference/reference_import_item_view",["underscore","rivets","marionette","text!templates/views/group-item.tmpl","i18n!nls/reference"],function(a,b,c,d,e){"use strict";return c.ItemView.extend({nls:null,itemName:null,message:null,tagName:"tr",template:a.template(d),templateHelpers:function(){return{text:this.importActionText}},initialize:function(){this.message={text:this.model.get("error")||"",status:""},this.model.on("model:completeSync",this.onModelSync,this),this.importActionText=this.nls.import_rcpt+' "'+this.model.get(this.itemName)+'"'},onShow:function(){b.bind(this.el,{message:this.message})},onModelSync:function(a,b,c){var d=a.has("error");this.message.text=d?a.get("error"):c,this.message.status=d?e.error_title:b},getViewInfo:function(){return{text:this.importActionText,code:this.message.status,error:this.message.text}}})}),define("text!templates/actionbar/reference/list.tmpl",[],function(){return'<li><button type="button" class="action create primary" data-action="create"\n            data-toggle="tooltip" data-trigger="hover" data-placement="bottom" title="<%- create %>"><%- create %></button></li>\n<li><button type="button" class="action export" data-action="doExport"\n            data-toggle="tooltip" data-trigger="hover" data-placement="bottom" title="<%- exportData %>"><%- exportData %></button></li>\n<li>\n    <button type="button" class="action import"\n            data-toggle="tooltip" data-trigger="hover" data-placement="bottom" title="<%- importData %>"><%- importData %></button>\n    <input type="file" class="file-dialog" data-action="doImport"/>\n</li>\n'}),define("text!commons/base_object/reference/templates/export_sub_menu.tmpl",[],function(){return'<div class="popup-wrapper bottom sub-menu">\n    <span class="popup-arrow"></span>\n    <span class="popup-arrow-border"></span>\n    <ul class="popup" style="white-space: nowrap">\n        <li class="popup-li"><a href="#" data-action="EXPORT_FILTER"><%- export_filter %></a></li>\n        <li class="popup-li"><a href="#" data-action="EXPORT_ALL"><%- export_all %></a></li>\n    </ul>\n</div>'}),define("commons/base_object/reference/reference_list_controller",["underscore","jquery","app","bifit","backbone","marionette","commons/base_object/base_list_controller","collections/editabled_thesaurus","models/reference","commons/base_object/reference/reference_import_item_view","dialogUtils","bifit","actionUtils","libs/multi_client_utils","views/document/aside-left","views/tree","views/group","commons/group_view","text!templates/actionbar/reference/list.tmpl","text!commons/base_object/reference/templates/export_sub_menu.tmpl","i18n!nls/reference","i18n!nls/common"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){"use strict";return g.extend({modelType:null,exchange:null,modelItemName:null,nls:null,supportsGroupOpers:!1,getGroupDeleteMessage:null,FilterView:null,itemFilterView:null,actionsList:[m.DocumentAction.CREATE.toString(),m.DocumentAction.IMPORT.toString(),"EXPORT_GROUP"],actionBarExportSubMenu:a.template(t,u),showListView:function(){this.collection=h.getThesaurus(this.modelType,this.supportsGroupOpers),this.itemFilterView=this.createFilterView(),c.mainLayout.showRegions({filter:this.itemFilterView,left:new p}),this.itemFilterView.loadButtonView.reload()},showGroupList:function(a){var b=new o,d=new q({title:a});return this.listenTo(b,"action:doAction",this.showListView),c.mainLayout.showRegions({left:b,content:d}),d},reloadReferenceList:function(b){this.canChooseItem!==!1&&(this.canChooseItem=!1,c.mainLayout.content.options.expectedType=this.modelType,this.collection.loaded=!1,this.collection.fetch(this.referenceReloadOptions(b)).then(function(){c.mainLayout.content.options.expectedType===this.modelType&&(c.mainLayout.content.show(this.createListView()),c.mainLayout.content.trigger("content:reloaded")),this.canChooseItem=!0;var b=this.actionsList;a.isEmpty(this.collection.models)&&(b=a.without(this.actionsList,"EXPORT_GROUP")),c.mainLayout.actionBar.show(this.createActionBar(b))}.bind(this)))},createFilterView:function(){if(this.FilterView){var a=new this.FilterView({collection:this.collection});return this.listenTo(a,"reload",this.reloadReferenceList),a}},referenceReloadOptions:function(a){return{data:a||{PAGE_NUMBER:0,PAGE_SIZE:100},reset:!0,silent:!0}},addListViewListeners:function(a){g.prototype.addListViewListeners.call(this,a),this.listenTo(a,"update-actions",this.updateActions)},updateActions:function(a){c.mainLayout.actionBar.show(this.createActionBar(a))},SAVE_IMPORT_RESULT:function(){g.prototype.SAVE_IMPORT_RESULT(u)},DO_IMPORT:function(a){var b=new FileReader,c=h.createThesaurus(this.modelType),d=function(a){a&&this.saveImportedValidModels(a)}.bind(this),e=a.target.files[0];b.onload=function(a){var b=[m.DocumentAction.SAVE_IMPORT_RESULT];this.importGroupViewInstance=this.importGroupView(c,b,e.name),this.exchange.doImport(a.target.result,c,d)||this.showListView()}.bind(this),b.readAsText(e,"Windows-1251")},saveImportedValidModels:function(a){var b=h.createThesaurus(this.modelType),c={silent:!0,success:function(a){a.has("error")||this.collection.add(a)}.bind(this),error:function(){k.alert(l.sprintf(u.import_error,u[this.modelType]||this.modelType))}.bind(this)};b.add(a.filter(function(a){return a._isValid}));var d=0,e=function(){if(!this.importGroupViewInstance.operationFinished)if(d<b.length){var a=b.at(d++);a.save(null,c),a.on("model:completeSync",e)}else this.importGroupViewInstance.addSummaryImportInfo(u),this.importGroupViewInstance.operationFinished=!0,this.toggleAllButtons(!1)}.bind(this);e()},importGroupView:function(a,b,d){var e=r.extend({title:this.nls.import_title,fileName:d}),f=new e({collection:a,operationType:"import",entityType:"directory_records",childView:j.extend({nls:this.nls,itemName:this.modelItemName})}),g=new o;return c.mainLayout.showRegions({actionBar:this.createActionBar(b||[]),content:f,left:g}),g.on("action:doAction",function(){var a=f.getRunningOperation();a?k.confirm(a.stopMsg,function(){a.stopOperation(),this.showListView()}.bind(this)):this.showListView()}.bind(this)),f},EXPORT_GROUP:function(a){d.showSubMenu(a)},doExport:function(a){this.exchange.doExport(a).done(function(a){var b=this.showGroupList(v["export"]+" "+u[this.modelType]),c=new e.Model;b.add(c,l.sprintf(this.exchange.nls.export_success,a)),c.trigger("model:completeSync",c,"ok")}.bind(this))},EXPORT_FILTER:function(){this.doExport(this.collection)},EXPORT_ALL:function(){this.getAllReference().done(function(a){this.doExport(a)}.bind(this))},getAllReference:function(a){var f=b.Deferred(),g=d.settings.server_addr+"/reference/"+this.modelType+";jsessionid="+d.getStoredItem("JSESSIONID"),h={url:g,type:"GET",data:{}},j=this.itemFilterView.getFilterQuery();j&&(h.data.query=j);var k=c.isMultiClient()&&!a?n.ajax(h):b.ajax(h);return k.done(function(a){var b=new(e.Collection.extend({model:i}))(a);b.comparator=this.collection.comparator,b.sortedInfo=this.collection.sortedInfo,f.resolve(b.sort())}.bind(this)),f},DELETE_GROUP:function(){var b=this.collection.selected,c=function(){var a=function(a,b){return b.add(a,this.getGroupDeleteMessage(a)),a.destroy({success:function(){a.trigger("model:completeSync",a,"Ok")},error:function(b){a.trigger("model:completeSync",a,"error",b.responseText)}},{silent:!0}),a};this.group(a,this.nls.group_view_delete_h1,b)},d=1===a.keys(b).length?this.nls.confirm_delete:this.nls.confirm_delete_many;k.confirm(d,c,!1,this)}})}),define("text!commons/base_object/reference/templates/filter.tmpl",[],function(){return'<div class="filter">\n    <h1 class="doc-type"><%- refTitle %></h1>\n<% if (clientName !== \'\') { %>\n    <div class="row form-group">\n        <div class="col-xs-12">\n            <a id="client-name" href="#"><%- clientName %></a>\n        </div>\n    </div>\n<% } %>\n    <div class="row form-group">\n        <div class="col-xs-9">\n            <div>\n            <input id="filter_value" type="text" placeholder="<%- value_placeholder %>">\n            </div>\n        </div>\n        <div class="col-xs-3">\n            <div>\n                <span id="load_button_component"></span>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="pagination" id="paginator">\n                <button id="first">&laquo;</button>\n                <button id="previous">&lsaquo;</button>\n                <input type="text" id="current_page" disabled="disabled"/>\n                <button id="next">&rsaquo;</button>\n                <button id="last">&raquo;</button>\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="items-amount">\n            <label><%- pageSize %></label>\n                <a href=\'#\' data-action="100" class="current">100</a>\n                <label>|</label>\n                <a href=\'#\' data-action="500">500</a>\n                <label>|</label>\n                <a href=\'#\' data-action="1000">1000</a>\n            </div>\n        </div>\n    </div>\n</div>'}),define("nls/paginator",{root:{showedPage:"Страница {1} из {2}",showedItemsAmount:"Записи с {1} по {2} из {3}",pageSize:"Количество на странице",net_error:"Ошибка подключения к банковскому серверу"},uk:!0,en:!0}),define("nls/uk/paginator",{showedPage:"Сторінка {1} з {2}",showedItemsAmount:"Записи з {1} по {2} з {3}",pageSize:"Кількість на сторінці",net_error:"Помилка підключення до банківського сервера"}),define("nls/en/paginator",{showedPage:"Page {1} of {2}",showedItemsAmount:"Records from {1} to {2} of {3}",pageSize:"Records per page",net_error:"Failed to connect to bank server"}),define("styles!css/paginator",[],function(){}),define("commons/base_object/reference/reference_filter_view",["jquery","app","underscore","marionette","dialogUtils","bifit","appsPieces","libs/multi_client_utils","components/load_button/load_button_view","text!commons/base_object/reference/templates/filter.tmpl","i18n!nls/paginator","styles!css/paginator"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";return d.LayoutView.extend({className:"reference-filter",template:c.template(j),currentPage:1,totalPages:-1,totalItems:-1,templateHelpers:function(){return c.extend({refTitle:this.refTitle,clientName:this.clientName,value_placeholder:this.value_placeholder},k)},queryTemplate:"",sortingFields:{},refTitle:"",value_placeholder:"",nls:{},filterValueLength:0,clientName:"",regions:{loadButton:"#load_button_component",paginator:"#paginator"},ui:{filterValue:"#filter_value"},events:{"click div.pagination button":"handlePagination","click div.items-amount a":"changePageSize"},cache:{},initialize:function(a){this.collection=a.collection},onShow:function(){this.ui.filterValue.prop("maxlength",this.filterValueLength),this.loadButtonView=new i,this.loadButton.show(this.loadButtonView),this.listenTo(this.loadButtonView,"reload",this.reloadList),this.listenTo(this.collection,"sync",this.onSyncEnd),this.listenTo(this.collection,"error",this.onSyncEnd),this.listenTo(b.mainLayout.content,"content:reloaded",function(){g.highlightFoundText(this.ui.filterValue.val(),"td, span.cell"),this.renderPaginationInfo()}.bind(this)),this.cache.filterValue&&this.ui.filterValue.val(this.cache.filterValue),this.toggleAmountItemsRef(this.cache.pageSize)},getFilterQuery:function(a){return a?this.ui.filterValue.val(this.cache.filterValue):this.cache.filterValue=this.ui.filterValue.val(),this.cache.filterValue?f.sprintf(this.queryTemplate,f.escapeSpecialChars(this.cache.filterValue)):""},reloadList:function(a){var b={PAGE_NUMBER:this.currentPage-1,PAGE_SIZE:this.cache.pageSize,sorting_fields:this.getSortingFields()},c=this.getFilterQuery(a===!1);c&&(b.query=c),a!==!1?(this.currentPage=1,this.loadThesaurusSize().then(function(){this.trigger("reload",b)}.bind(this))):this.trigger("reload",b)},onSyncEnd:function(){this.loadButtonView.onSyncEnd()},getSortingFields:function(){return this.sortingFields[this.collection.sortedInfo.field.toUpperCase()]+","},changePageSize:function(a){this.currentPage=1,a.preventDefault(),this.cache.pageSize=+a.target.getAttribute("data-action"),this.toggleAmountItemsRef(this.cache.pageSize),this.loadButtonView.animateButton(),this.reloadList(!1)},toggleAmountItemsRef:function(b){a(".items-amount a").removeClass("current"),a('.items-amount a[data-action="'+b+'"]').addClass("current")},handlePagination:function(a){var b=a.target.id;switch(b){case"first":if(1===this.currentPage)return;this.currentPage=1;break;case"last":if(this.currentPage>=this.totalPages)return;this.currentPage=this.totalPages;break;case"previous":if(1===this.currentPage)return;this.currentPage-=1;break;case"next":if(this.currentPage>=this.totalPages)return;this.currentPage+=1}this.loadButtonView.animateButton(),this.reloadList(!1)},loadThesaurusSize:function(b){var c={},d=this.getFilterQuery(!1);return d&&(c.query=d),((b||{}).emulateClientRequest?h:a).ajax({type:"GET",dataType:"json",url:f.settings.server_addr+"/reference/size/"+this.modelType+";jsessionid="+f.getStoredItem("JSESSIONID"),data:c,success:function(a){this.totalItems=a,this.renderPaginationInfo()}.bind(this),error:function(a){400!==a.status&&500!==a.status||e.alert(k.net_error)}.bind(this)})},renderPaginationInfo:function(){this.totalPages=Math.ceil(this.totalItems/this.cache.pageSize),this.renderFooter(),a("#current_page").val(f.sprintf(k.showedPage,this.currentPage,this.totalItems<this.cache.pageSize?1:this.totalPages))},renderFooter:function(){var b=0===this.totalItems?0:(this.currentPage-1)*this.cache.pageSize+1,c=this.totalItems<this.cache.pageSize||this.totalItems<b+this.cache.pageSize-1?this.totalItems:b+this.cache.pageSize-1;a("tfoot.summary tr td").html(f.sprintf(k.showedItemsAmount,b,c,this.totalItems)).trigger("footer:change",1)}})}),define("apps/beneficiaries/nls/beneficiaries",{root:{beneficiaries:"Бенефициар",country:"Страна",intermediary_bank:"Банк-посредник",country_code:"Код страны",beneficiaries_bank:"Банк бенефициара",address:"Адрес",type:"Тип",city:"Город",account:"Счет",bic:"BIC",iban:"IBAN",bnfc_list_title:"Бенефициары",value_placeholder:"Введите наименование, страну, счет или IBAN",to_list:"Вернуться к списку",import_title:"Результат импорта бенефициаров",confirm_delete:"Вы действительно хотите удалить бенефициара?",confirm_delete_many:"Вы действительно хотите удалить выбранных бенефициаров?",group_view_delete_h1:"Удаление бенефициаров",delete_msg_template:"Удаление бенефициара {1}",incorrect_import_file:'Файл не является файлом импорта справочника "Бенефициары" в формате iBank2.',import_rcpt:"Импорт бенефициара ",export_success:"Экспорт справочника бенефициаров в файл <br/><b>{1}</b>",dubl_beneficiary:"Бенефициар с указанными реквизитами уже присутствует в справочнике бенефициаров",invalid_swift:"Банк с кодом SWIFT {1} в справочнике банков не обнаружен",empty_list:"Отсутствуют записи в справочнике бенефициаров",involved:"Участвует",beneficiar:"Бенефициар",ben_acc:"Счет бенефициара",currency:"Валюта",rcpt_bank:"Банк бенефициара",rcpt_inn:"ИНН",details:"Назначение платежа",added_info:"Дополнительная информация",cln_bank:"Банк плательщика",name:"Наименование",cp:"Валютное поручение",by_amount:"Прошу перечислить",from_account:"со счета",acc_or_iban:"Счет или IBAN",swift:"SWIFT-код",or:"или",commission:"Расходы и комиссии выплатить за счет",commission_bnk:"Необходимые средства списать в банке",expense_acc:"со счета",speed:"Срочность платежа",cln_fio:"Уполномоченный сотрудник клиента",pp:"Номер док.",ocode:"Код опер.",value_date:"Дата валютир.",date_doc:"Дата док.",unrequired:"необяз.",mfo:"МФО",fio_placeholder:"ФИО (необяз.)",phone_placeholder:"тел. (необяз.)"},uk:!0,en:!0}),define("apps/beneficiaries/nls/uk/beneficiaries",{beneficiaries:"Бенефіціар",country:"Країна",intermediary_bank:"Банк-посередник",country_code:"Код країни",beneficiaries_bank:"Банк бенефіціара",address:"Адреса",type:"Тип",city:"Місто",account:"Рахунок",bic:"BIC",iban:"IBAN",bnfc_list_title:"Бенефіціари",import_title:"Результат імпорту бенефіціарів",to_list:"Повернутися до списку",value_placeholder:"Введіть найменування, країну, рахунок або IBAN",field_rcpt_bnk_name:"Найменування банку бенефіціара",field_rcpt_name:"Найменування бенефiцiара",field_intermed_bnk_name:"Найменування банку-посередника",field_intermed_bnk_bic:"Ідентифікаційний код банку-посередника",field_intermed_bnk_bic_type:"Тип ідентифікаційного коду банку-посередника",field_intermed_bnk_country_code:"Код країни банку-посередника",field_intermed_bnk_country:"Країна банку-посередника",field_intermed_bnk_city:"Місто банку-посередника",field_intermed_bnk_addr:"Адреса банку-посередника",field_rcpt_bnk_account:"Номер рахунку банку бенефіціара",field_rcpt_bnk_bic:"Идентификационный код банка бенефициара",field_rcpt_bnk_bic_type:"Тип ідентифікаційного коду банку бенефіціара",field_rcpt_bnk_country_code:"Код країни банку бенефіціара",field_rcpt_bnk_country:"Країна банку бенефіціара",field_rcpt_bnk_city:"Місто банку бенефіціара",field_rcpt_bnk_addr:"Адреса банку бенефіціара",field_rcpt_account:"Номер рахунку бенефiцiара",field_rcpt_country_code:"Код Країни бенефіціара",field_rcpt_country:"Країна бенефіціара",field_rcpt_city:"Місто бенефіціара",field_rcpt_addr:"Адреса бенефіціара",field_rcpt_bnk_iban:"IBAN-код банку бенефіціара",confirm_delete:"Ви дiйсно бажаєте вилучити бенефіціара?",confirm_delete_many:"Ви дiйсно бажаєте вилучити обраних бенефіціарів?",group_view_delete_h1:"Видалення бенефіціарів",delete_msg_template:"Видалення бенефіціара {1}",incorrect_import_file:'Файл не є файлом iмпорту довідника "Бенефіціари" у форматi iBank2.',import_rcpt:"Iмпорт бенефіціара ",export_success:"Експорт довідника бенефіціарів у файл <br/><b>{1}</b>",invalid_swift:"Банк з кодом SWIFT {1} в довіднику банків не виявлений",dubl_beneficiary:"Бенефіціар із зазначеними реквізитами вже присутній в довіднику бенефіціарів",empty_list:"Відсутні записи у довіднику бенефіціарів",involved:"Бере участь",beneficiar:"Бенефіціар",ben_acc:"Рахунок бенефіціара",currency:"Валюта",rcpt_bank:"Банк бенефіціара",rcpt_inn:"ІПН",details:"Призначення платежу",added_info:"Додаткова інформація",cln_bank:"Банк платника",name:"Найменування",cp:"Валютне доручення",by_amount:"Прошу перерахувати",from_account:"з рахунку",acc_or_iban:"Рахунок або IBAN",swift:"SWIFT-код",or:"або",commission:"Витрати і комісії виплатити за рахунок",commission_bnk:"Необхідні кошти списати в банку",expense_acc:"з рахунку",speed:"Терміновість платежу",cln_fio:"Уповноважений співробітник клієнта",pp:"Номер док.",ocode:"Код опер.",value_date:"Дата валютув.",date_doc:"Дата док.",unrequired:"не обов'яз.",mfo:"МФО",fio_placeholder:"ПІБ (не обов'яз.)",phone_placeholder:"тел. (не обов'яз.) "}),define("apps/beneficiaries/nls/en/beneficiaries",{beneficiaries:"Beneficiary",country:"Country",intermediary_bank:"Intermediary bank",country_code:"Country code",beneficiaries_bank:"Beneficiary's bank",address:"Address",type:"Type",city:"City",account:"Account",bic:"BIC",iban:"IBAN",bnfc_list_title:"Beneficiaries",value_placeholder:"Enter the name of the country, account or IBAN",to_list:"Back to the list",import_title:"Result import of beneficiaries",confirm_delete:"Are you sure you want to delete the beneficiary?",confirm_delete_many:"Are you sure you want to delete selected beneficiaries?",group_view_delete_h1:"Deleting of beneficiaries",delete_msg_template:"Deleting of beneficiary {1}",incorrect_import_file:"File is not the import file of beneficiaries directory in the iBank2 format.",import_rcpt:"Import of beneficiary ",export_success:"Export of the beneficiaries directory to the file <br/><b>{1}</b>",invalid_swift:"Bank with SWIFT {1} not found in the banks directory",dubl_beneficiary:"Beneficiary with specified details already present in the beneficiaries directory",empty_list:"There are no records in the beneficiaries directory",involved:"Involved",beneficiar:"Beneficiary",ben_acc:"Beneficiary's account",currency:"Currency",rcpt_bank:"Beneficiary's bank",rcpt_inn:"ITN",details:"Payment details",added_info:"Additional information",cln_bank:"Payer's bank",name:"Name",cp:"Currency payment",by_amount:"Ask to transfer",from_account:"from account",acc_or_iban:"Account or IBAN",swift:"SWIFT-code",or:"or",commission:"Costs and commissions paid by",commission_bnk:"Write-off the required funds in the bank",expense_acc:"from account",speed:"Payment urgency",cln_fio:"Authorized employee of the client",pp:"Doc. number",ocode:"Oper. code",value_date:"Value date",date_doc:"Date doc.",unrequired:"optional",mfo:"MFO",fio_placeholder:"full name (optional)",phone_placeholder:"phone. (optional)"}),define("apps/beneficiaries/beneficiaries_filter_view",["commons/base_object/reference/reference_filter_view","i18n!apps/beneficiaries/nls/beneficiaries"],function(a,b){"use strict";return a.extend({sortingFields:{RCPT_NAME:"15",RCPT_ACCOUNT:"16",RCPT_COUNTRY:"18"},refTitle:b.bnfc_list_title,value_placeholder:b.value_placeholder,filterValueLength:160,queryTemplate:"([15] like '%{1}%' || [16] has '{1}' || [18] hasi '{1}' || [21] hasi '{1}')",cache:{pageSize:100}})}),define("commons/base_object/reference/group_opers_ref_list_view",["jquery","underscore","bifit","actionUtils","commons/base_object/base_list_view","libs/group_opers_utils"],function(a,b,c,d,e,f){"use strict";return e.extend({events:b.extend(e.prototype.events,{"click th.check input":"markAll"}),childEvents:b.extend(e.prototype.childEvents,{markOne:"markOne"}),initialize:function(a){e.prototype.initialize.apply(this,arguments),"false"!==c.getStorageData("is_need_deselect_selected_items")&&b.each(this.collection.selected,function(a){this.collection.deselect(a)}.bind(this)),c.setStorageData("is_need_deselect_selected_items","true")},selectItem:function(a,b){e.prototype.selectItem.call(this,a,b),c.setStorageData("is_need_deselect_selected_items","false")},onRender:function(){e.prototype.onRender.call(this),this.prepareTable()},prepareTable:function(){f.prepareTable.call(this),this.postModelMark()},markOne:f.markOne,markAll:f.markAll,postModelMark:function(){var a=this.collection.selectedLength>0,b=this.getReferenceListActions(),c=this.collection.length===this.collection.selectedLength;this.$("th.check input")[c?"removeClass":"addClass"]("some"),this.$("th.check input").prop("checked",a),this.trigger("update-actions",b)},getReferenceListActions:function(){return this.collection.selectedLength>0?["DELETE_GROUP"]:[d.DocumentAction.CREATE,d.DocumentAction.IMPORT,"EXPORT_GROUP"]}})}),define("commons/base_object/group_opers_list_item_view",["commons/base_object/base_list_item_view"],function(a){"use strict";return a.extend({triggers:{"click td:not(.check)":"selectItem"},events:{"click td.check input":function(a){this.trigger("markOne",a)}}})}),define("text!apps/beneficiaries/templates/list.tmpl",[],function(){return'<table id="rcpts" class="list recipient">\n    <thead class="widescreen">\n    <tr>\n        <th class="check">\n            <input type="checkbox"/>\n            <span class="checkbox"/>\n        </th>\n        <th class="rcpt">\n            <span class="sortable" data-field="rcpt_name"><%- name %></span>\n        </th>\n        <th class="bill">\n            <span class="sortable" data-field="rcpt_account"><%- acc_or_iban %></span>\n        </th>\n        <th class="details ellipsis">\n            <span class="sortable" data-field="rcpt_country"><%- country %></span>\n        </th>\n    </tr>\n    </thead>\n    <tbody></tbody>\n    <tfoot class="summary">\n    <tr>\n        <td colspan="6"></td>\n    </tr>\n    </tfoot>\n</table>\n'}),define("text!apps/beneficiaries/templates/list-item.tmpl",[],function(){return"<td class=\"check widescreen\"><input type='checkbox'/><span class=\"checkbox\"></span></td>\n<td class=\"rcpt ellipsis widescreen\"><%- rcpt_name %></td>\n<td class=\"bill widescreen\">\n    <% if (rcpt_bnk_iban) { %> <%- rcpt_bnk_iban %> <%} else { %> <%- rcpt_account %> <% } %>\n</td>\n<td class=\"details ellipsis widescreen\">\n    <% if (typeof rcpt_country !='undefined' && rcpt_country) { %> <%- rcpt_country %> <% } %>\n</td>\n\n<td class='mobile'>\n    <span class='rcpt ellipsis'><%- rcpt_name %></span>\n    <span class='status'><%- rcpt_bnk_iban %><%- rcpt_account %></span>\n</td>\n"}),define("apps/beneficiaries/beneficiaries_list_view",["underscore","commons/base_object/reference/group_opers_ref_list_view","commons/base_object/group_opers_list_item_view","text!apps/beneficiaries/templates/list.tmpl","text!apps/beneficiaries/templates/list-item.tmpl","i18n!apps/beneficiaries/nls/beneficiaries"],function(a,b,c,d,e,f){"use strict";return b.extend({template:a.template(d),className:"reference",templateHelpers:f,childView:c.extend({template:a.template(e)})})}),define("commons/base_object/reference/reference_exchange",["jquery","underscore","backbone","bifit","dialogUtils","models/reference","i18n!nls/common"],function(a,b,c,d,e,f,g){"use strict";return{mapping:{},nls:{},exportType:"",modelType:"",saveParams:{defaultFileName:"export.txt",fileMask:'{"text":"'+g.export_ref_types+'","pattern":"*.txt"}',fileType:"txt"},_exportModel:function(a){var c="\n";return b.each(this.mapping,function(b){c+=b.exp+"="+(a.get(b.ref)||"")+"\n"}),c},doExport:function(a,c){var e=c||"Content-Type=ref/"+this.exportType+"\n";return b.each(a.models,function(a){e+=this._exportModel(a)},this),SignPluginServices.saveFile(b.extend({title:g.export_title,data:window.btoa(d.utf8_decode_win1251(e.split("\n").join("\r\n")))},this.saveParams))},doImport:function(a,c,d){a=a.split("\r").join("");var f=a.split("\n"),g=[];if(b.each(f,function(a,c){g=a.split("="),g.length>1&&(g[1]=g[1].replace(/[\u0009]/g," ")),f[c]=b.map(g,function(a){return a.trim()}).join("=")}),f.length<2||f[0]!=="Content-Type=ref/"+this.exportType||""!==f[1])return e.alert(this.nls.incorrect_import_file),!1;var h=[],i=b.object(b.pluck(this.mapping,"exp"),b.pluck(this.mapping,"ref")),j=f.slice(2);return b.each(j,function(a,d){if(0!==a.length&&h.push(a.split("=",2)),h.length>0&&(0===a.length||d===j.length-1)){var e=b.chain(h).filter(function(a){return b.isString(i[a[0]])}).map(function(a){return[i[a[0]],a[1]]}).object().value();c.push(this.createModel(e)),h=[]}}.bind(this)),this._processReference(c,d),!0},createModel:function(a){var b=new f({refType:this.modelType},{isNew:!0});return b.set(a),b},_processReference:function(a,b){return b.call(this,this._validateRefs(a)),!0},_validate:function(a){return a.validateModel()},_validateRefs:function(a){var c=[];return b.each(a.models,function(a){a.enableValidation(),this._validate(a,c)&&c.push(a)},this),a}}}),define("apps/beneficiaries/beneficiaries_exchange",["jquery","underscore","app","commons/base_object/reference/reference_exchange","i18n!apps/beneficiaries/nls/beneficiaries","models/reference"],function(a,b,c,d,e,f){"use strict";var g={nls:e,exportType:c.isMultiClient()?"mbeneficiar":"beneficiar",modelType:"beneficiaries",mapping:[{exp:"INTERMED_BNK_NAME",ref:"intermed_bnk_name"},{exp:"INTERMED_BNK_BIC",ref:"intermed_bnk_bic"},{exp:"INTERMED_BNK_BIC_TYPE",ref:"intermed_bnk_bic_type"},{exp:"INTERMED_BNK_COUNTRY_CODE",ref:"intermed_bnk_country_code"},{exp:"INTERMED_BNK_COUNTRY",ref:"intermed_bnk_country"},{exp:"INTERMED_BNK_CITY",ref:"intermed_bnk_city"},{exp:"INTERMED_BNK_ADDR",ref:"intermed_bnk_addr"},{exp:"RCPT_BNK_NAME",ref:"rcpt_bnk_name"},{exp:"RCPT_BNK_ACCOUNT",ref:"rcpt_bnk_account"},{exp:"RCPT_BNK_BIC",ref:"rcpt_bnk_bic"},{exp:"RCPT_BNK_BIC_TYPE",ref:"rcpt_bnk_bic_type"},{exp:"RCPT_BNK_COUNTRY_CODE",ref:"rcpt_bnk_country_code"},{exp:"RCPT_BNK_COUNTRY",ref:"rcpt_bnk_country"},{exp:"RCPT_BNK_CITY",ref:"rcpt_bnk_city"},{exp:"RCPT_BNK_ADDR",ref:"rcpt_bnk_addr"},{exp:"RCPT_NAME",ref:"rcpt_name"},{exp:"RCPT_ACCOUNT",ref:"rcpt_account"},{exp:"RCPT_COUNTRY_CODE",ref:"rcpt_country_code"},{exp:"RCPT_COUNTRY",ref:"rcpt_country"},{exp:"RCPT_CITY",ref:"rcpt_city"},{exp:"RCPT_ADDR",ref:"rcpt_addr"},{exp:"RCPT_BNK_IBAN",ref:"rcpt_bnk_iban"}],createModel:function(a){a.rcpt_bnk_iban=a.rcpt_bnk_iban||"",a.rcpt_account=a.rcpt_account||"";var b=new f({refType:this.modelType},{isNew:!0});return b.set(a),b}};return b.extend({},d,g)}),define("apps/beneficiaries/beneficiaries_list_controller",["bifit","commons/base_object/reference/reference_list_controller","commons/empty_list_view","apps/beneficiaries/beneficiaries_filter_view","apps/beneficiaries/beneficiaries_list_view","apps/beneficiaries/beneficiaries_exchange","i18n!apps/beneficiaries/nls/beneficiaries"],function(a,b,c,d,e,f,g){"use strict";return b.extend({ListView:e,FilterView:d.extend({modelType:"beneficiaries"}),EmptyView:c.extend({message:g.empty_list}),modelType:"beneficiaries",exchange:f,modelItemName:"rcpt_name",nls:g,supportsGroupOpers:!0,getGroupDeleteMessage:function(b){var c=b.get("rcpt_name");return a.sprintf(g.delete_msg_template,c)},getAllReference:function(){return b.prototype.getAllReference.call(this,!0)},showItemView:function(a){require(["apps/beneficiaries/beneficiaries_item_controller"],function(b){var c=new b;c.showItemView(a)})},CREATE:function(){require(["apps/beneficiaries/beneficiaries_edit_controller"],function(a){var b=new a;b.showCreateView()})}})}),function(a){var b=document,c="appendChild",d="styleSheet",e=b.createElement("style");e.type="text/css",b.getElementsByTagName("head")[0][c](e),e[d]?e[d].cssText=a:e[c](b.createTextNode(a))}(".pagination{\nborder:1px solid #CDCDCD;\nborder-radius:3px;\nmargin-top:1em;\n}\n.pagination button{\nfloat:left;\nwidth:40px;\nheight:20px;\nline-height:2px;\nborder-right:1px solid #CDCDCD;\nborder-left:1px solid #CDCDCD;\nborder-bottom:none;\nborder-top:none;\ncolor:#555555;\n}\n.pagination button:first-child{\nborder:none;\n}\n.pagination button#last{\nborder:none;\n}\n.pagination input#current_page{\nfloat:left;\nwidth:150px;\nheight:20px;\nline-height:1em;\ntext-align:center;\nbackground-color:white;\n}\ndiv.items-amount a{\nmargin:0.25em;\n}\ndiv.items-amount label:not(:first-child){\nvertical-align:top;\n}\ndiv.items-amount a.current{\ncolor:#000000;\n}\ndiv.items-amount{\nmargin-top:1em;\n}");