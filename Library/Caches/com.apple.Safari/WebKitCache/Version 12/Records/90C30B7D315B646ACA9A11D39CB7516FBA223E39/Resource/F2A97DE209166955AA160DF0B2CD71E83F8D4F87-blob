webpackJsonp([6],{"+8xK":function(module,exports){},"+mVC":function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("zwoO"),i=_interopRequireDefault(n),a=e("Pf15"),o=_interopRequireDefault(a),s,u,c=e("U7vG");e("I3dp");var l=(u=s=function(e){function Checkbox(){var t,n,a;(0,r.default)(this,Checkbox);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return t=n=(0,i.default)(this,e.call.apply(e,[this].concat(s))),n.handleChange=function(e){var t=e.target,r=t.checked,i=t.value;n.props.onChange&&n.props.onChange(r,i)},a=t,(0,i.default)(n,a)}return(0,o.default)(Checkbox,e),Checkbox.prototype.render=function render(){var e=this.props,t=e.checked,r=e.id,n=e.value;return c.createElement("span",{className:"rc-Checkbox"},c.createElement("input",{id:r,type:"checkbox",checked:t,value:n,onChange:this.handleChange}))},Checkbox}(c.Component),s.propTypes={checked:c.PropTypes.bool,value:c.PropTypes.oneOfType([c.PropTypes.string,c.PropTypes.number]),onChange:c.PropTypes.func,id:c.PropTypes.string},u);module.exports=l},"/KW+":function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Dd8w"),r=_interopRequireDefault(t),n=e("Zrlr"),i=_interopRequireDefault(n),a=e("zwoO"),o=_interopRequireDefault(a),s=e("Pf15"),u=_interopRequireDefault(s),c,l,d=e("L0um"),f=e("U7vG"),h=e("gzuN"),p=e("p2kh"),m=e("FqLJ"),v=e("d/2p"),g=v.deleteFeedback,y=e("pL2z"),S=e("5UQX"),b=e("gP/4"),C=e("uMXu"),E=C.EntryTypes;e("cUcW");var R=(l=c=function(e){function CourseReview(){var t,r,n;(0,i.default)(this,CourseReview);for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];return t=r=(0,o.default)(this,e.call.apply(e,[this].concat(s))),r.deleteFeedback=function(){confirm("Are you sure you want to delete this?")&&r.context.executeAction(g,r.props.ratingFeedback.id)},n=t,(0,o.default)(r,n)}return(0,u.default)(CourseReview,e),CourseReview.prototype.render=function render(){var e=this.props,t=e.ratingFeedback,r=e.isSuperuser,n=t.value,i=t.comment,a=t.timestamp,o=t.id,s=h(a).format("D MMM YYYY"),u=d("c-course-review-header",{spaced:r});return f.createElement("div",{className:"rc-CourseReview"},f.createElement("div",{className:"c-course-review-content"},r&&f.createElement("button",{className:"delete-feedback-container button-link",onClick:this.deleteFeedback},f.createElement("i",{className:"delete-feedback"})),f.createElement("div",{className:u},f.createElement("div",{className:"c-course-review-timestamp"},s)),f.createElement(y,{value:n}),f.createElement(m,{cml:i}),this.context.isAdminView&&f.createElement(b,{entryId:o,entryType:E.Feedback})))},CourseReview}(f.Component),c.propTypes={ratingFeedback:f.PropTypes.instanceOf(S).isRequired,isSuperuser:f.PropTypes.bool.isRequired},c.contextTypes={executeAction:f.PropTypes.func.isRequired,isAdminView:f.PropTypes.bool},l);module.exports=p(R,["ApplicationStore"],function(e,t){var n=e.ApplicationStore,i=n.isSuperuser();return(0,r.default)({},t,{isSuperuser:i})})},"/VTE":function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("zwoO"),i=_interopRequireDefault(n),a=e("Pf15"),o=_interopRequireDefault(a),s,u,c=e("gzuN"),l=e("U7vG"),d=e("iy/N"),f=d.FormattedMessage,h=e("rrte"),p=e("LSMX"),m=e("AHPF"),v=m.branchStatus,g=e("b914"),y=(u=s=function(e){function BranchStatus(){return(0,r.default)(this,BranchStatus),(0,i.default)(this,e.apply(this,arguments))}return(0,o.default)(BranchStatus,e),BranchStatus.prototype.render=function render(){var e=this.props.branch,t=p.getSortedSessions(e),r=void 0;switch(e.branchStatus){case v.NEW:r=g("New");break;case v.PENDING:r=g("Pending");break;case v.UPCOMING:r=g(t.length>0?"Upcoming, Starts "+c(t[0].startedAt).format("MMM D"):"Upcoming, No Session Exists");break;case v.LIVE:if(t[t.length-1]){var n=p.associatedSessionsAreFinal(t)?c(t[t.length-1].endedAt).format("MMM D, YYYY"):"present";r=c(t[0].startedAt).format("MMM D")+" - "+n;break}r="";break;case v.ARCHIVED:r=g("Archived");break;default:r=""}var i=e.isPrivate?l.createElement("span",{style:{color:"#E85628",marginLeft:"6px"}}," ",g("Private")," "):null,a=l.createElement("strong",null,e.name);return l.createElement("span",{className:"rc-BranchStatus"},l.createElement(f,{message:"{branchName}: {statusDetails}   {privateLabel}",branchName:a,statusDetails:r,privateLabel:i}))},BranchStatus}(l.Component),s.propTypes={branch:h.CourseBranchPropType.isRequired},u);module.exports=y},"/sYi":function(module,exports,e){"use strict";var t=e("hHYt"),r=new t("/api/feedback.v1",{type:"rest"});module.exports=r},"1Mfw":function(module,exports){},"1eB2":function(module,exports,e){"use strict";var $=e("mT8w"),_=e("41m7");module.exports=function(e,t,r){return function(n){function hideToolbar(){$(t).hide()}function showToolbar(){$(t).show()}function doesNotBelongToScribe(t){return t===document||document.activeElement!==n.el&&(!(!t||t===e)&&doesNotBelongToScribe(t.parentNode))}function handleBlur(e){doesNotBelongToScribe(e.relatedTarget)&&hideToolbar()}function handleDocumentClick(e){doesNotBelongToScribe(e.target)&&hideToolbar()}var i=t.querySelectorAll("[data-command-name]");_(i).each(function(e){e.addEventListener("blur",handleBlur)}),n.el.addEventListener("focus",showToolbar),document.addEventListener("click",handleDocumentClick),t.addEventListener("mousedown",function(e){if("BUTTON"!==e.target.nodeName)return e.preventDefault(),!1}),r||hideToolbar()}}},"54xC":function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("zwoO"),i=_interopRequireDefault(n),a=e("Pf15"),o=_interopRequireDefault(a),s,u,c,l,_=e("41m7"),d=e("U7vG"),f=e("oi+S"),h=e("iy/N"),p=h.FormattedMessage,m=h.FormattedNumber,v=e("cKYN"),g=v.OverlayTrigger,y=v.Tooltip,S=e("Wksn"),b=e("Nrie");e("fNA9");var C=(u=s=function(e){function CourseRatingPercent(){return(0,r.default)(this,CourseRatingPercent),(0,i.default)(this,e.apply(this,arguments))}return(0,o.default)(CourseRatingPercent,e),CourseRatingPercent.prototype.render=function render(){var e={width:this.props.percent+"%"},t=this.props.count||"0",r=d.createElement(y,null,d.createElement(p,{message:S("{value} learners"),value:d.createElement(m,{value:t})}));return d.createElement(g,{placement:"top",overlay:r},d.createElement("div",{className:"rc-CourseRatingPercent"},d.createElement("div",{className:"c-course-rating-percent-label"},this.props.ratingValue.label),d.createElement("div",{className:"c-course-rating-percent-meter"},d.createElement("div",{className:"c-course-rating-percent-meter-bar",style:e})),d.createElement("div",{className:"c-course-rating-percent-value"},d.createElement(p,{message:S("{value} %"),value:this.props.percent||"0"}))))},CourseRatingPercent}(d.Component),s.propTypes={ratingValue:d.PropTypes.object.isRequired,count:d.PropTypes.number.isRequired,percent:d.PropTypes.number.isRequired},u),E=(l=c=function(e){function CourseRatingBreakdown(){return(0,r.default)(this,CourseRatingBreakdown),(0,i.default)(this,e.apply(this,arguments))}return(0,o.default)(CourseRatingBreakdown,e),CourseRatingBreakdown.prototype.render=function render(){var e=this.props.courseRatingStats,t=_(b).filter(function(e){return-1!==e.value});return d.createElement("div",{className:"rc-CourseRatingBreakdown"},t.map(function(t,r){var n=e.getCount(t),i=e.getPercent(t);return d.createElement(C,{key:r,ratingValue:t,count:n,percent:i})}))},CourseRatingBreakdown}(d.Component),c.propTypes={courseRatingStats:d.PropTypes.instanceOf(f).isRequired},l);module.exports=E},"5GGH":function(module,exports,e){var t;void 0!==(t=function(){return function(){return function(e){e.registerPlainTextFormatter(function(e){return e.replace(/\n([ \t]*\n)+/g,"</p><p>").replace(/\n/g,"<br>")})}}}.call(exports,e,exports,module))&&(module.exports=t)},"5UQX":function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("wxAW"),i=_interopRequireDefault(n),a=e("zwoO"),o=_interopRequireDefault(a),s=e("Pf15"),u=_interopRequireDefault(s),c=e("x6ZS"),l=e("IlIn"),d=function(e){function RatingFeedback(t,n,i,a,s){(0,r.default)(this,RatingFeedback);var u=5,c={rating:{value:t,maxValue:5,active:n},comments:i&&!l.isEmpty(i)?{generic:i}:{},timestamp:a,id:s};return(0,o.default)(this,e.call(this,c))}return(0,u.default)(RatingFeedback,e),RatingFeedback.prototype.hasComment=function hasComment(){return this.comment&&!l.isEmpty(this.comment)},(0,i.default)(RatingFeedback,[{key:"comment",get:function get(){return this.comments&&this.comments.generic}}]),RatingFeedback}(c);module.exports=d},"6LJD":function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("zwoO"),i=_interopRequireDefault(n),a=e("Pf15"),o=_interopRequireDefault(a),s,u,c,l,d=e("L0um"),f=e("U7vG"),h=e("cKYN"),p=h.Tooltip,m=h.OverlayTrigger;e("SiEF");var v=(u=s=function(e){function ToolbarButton(){return(0,r.default)(this,ToolbarButton),(0,i.default)(this,e.apply(this,arguments))}return(0,o.default)(ToolbarButton,e),ToolbarButton.prototype.render=function render(){var e=this.props.block,t=e.commandName;if("divider"===e.commandName)return f.createElement("div",{key:t,className:"scribe-toolbar-divider"});var r=e.commandName,n=e.disabledTags?e.disabledTags.join(","):"",i=e.tooltip,a=d("scribe-toolbar-button","scribe-toolbar-"+r),o=f.createElement("button",{key:t,"data-command-name":r,"data-disabled-tags":n,className:a,"aria-label":i}),s=function renderBtnWithTooltip(){var e=f.createElement(p,null,i);return f.createElement(m,{key:t,placement:"top",overlay:e,delayShow:600},o)};return i?s():o},ToolbarButton}(f.Component),s.propTypes={block:f.PropTypes.object.isRequired},u),g=(l=c=function(e){function CMLEditorToolbar(){return(0,r.default)(this,CMLEditorToolbar),(0,i.default)(this,e.apply(this,arguments))}return(0,o.default)(CMLEditorToolbar,e),CMLEditorToolbar.prototype.render=function render(){var e=this.props,t=e.blocks,r=e.style,n=e.elemRefHook;if(0===t.length)return null;return f.createElement("div",{className:"rc-CMLEditorToolbar",ref:n,style:r},t.map(function(e){return f.createElement(v,{key:e.commandName,block:e})}))},CMLEditorToolbar}(f.Component),c.propTypes={style:f.PropTypes.object.isRequired,blocks:f.PropTypes.array.isRequired,elemRefHook:f.PropTypes.func},l);module.exports=g},"81lg":function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("zwoO"),i=_interopRequireDefault(n),a=e("Pf15"),o=_interopRequireDefault(a),s,u,c=e("U7vG"),l=e("L0um"),d=e("AHPF"),f=d.branchStatus,h=e("b914");e("CYU+");var p=(u=s=function(e){function BranchStatusPill(){return(0,r.default)(this,BranchStatusPill),(0,i.default)(this,e.apply(this,arguments))}return(0,o.default)(BranchStatusPill,e),BranchStatusPill.getStatusString=function getStatusString(e){switch(e){case f.NEW:return h("New");case f.PENDING:return h("Pending");case f.UPCOMING:return h("Upcoming");case f.LIVE:return h("Live");case f.ARCHIVED:return h("Archived");default:return""}},BranchStatusPill.prototype.render=function render(){var e=l("rc-BranchStatusPill",this.props.status,this.props.className);return c.createElement("div",{className:e},BranchStatusPill.getStatusString(this.props.status))},BranchStatusPill}(c.Component),s.propTypes={status:c.PropTypes.string.isRequired,className:c.PropTypes.string},u);module.exports=p},"8JAr":function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("zwoO"),i=_interopRequireDefault(n),a=e("Pf15"),o=_interopRequireDefault(a),s,u,c=e("U7vG"),l=e("dmSb"),d=e("c3vZ"),f=e("omOh");e("szMF");var h=e("StZn"),p=(u=s=function(e){function CourseRatingsDashboard(){return(0,r.default)(this,CourseRatingsDashboard),(0,i.default)(this,e.apply(this,arguments))}return(0,o.default)(CourseRatingsDashboard,e),CourseRatingsDashboard.prototype.getChildContext=function getChildContext(){return{scrollContainer:this.props.scrollContainer,isAdminView:this.props.isAdminView}},CourseRatingsDashboard.prototype.render=function render(){return c.createElement("div",{className:"rc-CourseRatingsDashboard"},c.createElement(f,this.props))},CourseRatingsDashboard}(c.Component),s.propTypes={courseId:c.PropTypes.string.isRequired,scrollContainer:c.PropTypes.string,isAdminView:c.PropTypes.bool},s.childContextTypes={scrollContainer:c.PropTypes.oneOfType([c.PropTypes.object,c.PropTypes.string]),isAdminView:c.PropTypes.bool},s.defaultProps={scrollContainer:"undefined"==typeof window?null:window},u);module.exports=p},"91BX":function(module,exports,e){var t=e("YAJZ");"string"==typeof t&&(t=[[module.i,t,""]]);var r,n={};n.transform=void 0;var i=e("MTIv")(t,n);t.locals&&(module.exports=t.locals)},ACAK:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Dd8w"),r=_interopRequireDefault(t),n=e("Zrlr"),i=_interopRequireDefault(n),a=e("zwoO"),o=_interopRequireDefault(a),s=e("Pf15"),u=_interopRequireDefault(s),c,l,d=e("U7vG"),f=e("cKYN"),h=f.DropdownButton,p=f.MenuItem,m=e("UJwr"),v=e("rrte"),g=e("AHPF"),y=g.branchStatus,S=e("81lg"),b=e("35fU"),C=e("/VTE"),E=e("GLBu"),R=E.selectBranch,w=e("b914"),I=e("p2kh"),T=e("AHPF"),M=T.ALL_BRANCHES;e("i4Of");var N=(l=c=function(e){function BranchFastSwitcher(t,r){(0,i.default)(this,BranchFastSwitcher);var n=(0,o.default)(this,e.call(this,t,r));return n.onBranchSelect=function(e){var t=n.context,r=t.executeAction,i=t.router,a=n.props,o=a.updateBranchSelectionStore,s=a.onSelect;if(n.state.selectedBranchId===e)return;o&&e!==M&&r(R,{branchId:e,router:i}),s(e),n.setState({selectedBranchId:e})},n.renderDropdownTitle=function(e){var t=n.props.branches.find(function(t){return t.id===e})||n.props.branches[0];if(e===M)return d.createElement("div",{className:"dropdown-title"},w("All Versions"));return d.createElement("div",{className:"dropdown-title"},d.createElement(S,{status:t.branchStatus}),d.createElement(C,{branch:t}))},n.state={selectedBranchId:t.overrideSelectedBranchId||t.selectedBranchId},n}return(0,u.default)(BranchFastSwitcher,e),BranchFastSwitcher.prototype.render=function render(){var e=this.props,t=e.branches,r=e.isEnabled,n=e.enableSelectAllBranches,i=this.state.selectedBranchId;if(!t||!i||t.length<=1)return!1;return d.createElement("div",{className:"rc-BranchFastSwitcher"},d.createElement(h,{title:this.renderDropdownTitle(i),onSelect:this.onBranchSelect,disabled:!r},n&&d.createElement(p,{eventKey:M,key:M},w("All Versions")),t.length>0?t.map(function(e){return d.createElement(p,{eventKey:e.id,key:e.id},d.createElement(S,{status:e.branchStatus}),d.createElement(C,{branch:e}))}):w("No other versions yet exist.")))},BranchFastSwitcher}(d.Component),c.propTypes={branches:d.PropTypes.arrayOf(v.CourseBranchPropType).isRequired,selectedBranchId:d.PropTypes.string.isRequired,onSelect:d.PropTypes.func,updateBranchSelectionStore:d.PropTypes.bool,isEnabled:d.PropTypes.bool,enableSelectAllBranches:d.PropTypes.bool,overrideSelectedBranchId:d.PropTypes.string},c.contextTypes={executeAction:d.PropTypes.func,router:d.PropTypes.object},c.defaultProps={onSelect:function onSelect(){},branches:[],updateBranchSelectionStore:!0,isEnabled:!0,enableSelectAllBranches:!1},l),k=I(N,["BranchesStore","BranchSelectionStore"],function(e,t){var n=e.BranchesStore.getState().branches;return(0,r.default)({},t,{selectedBranchId:e.BranchSelectionStore.getState().selection,branches:Object.keys(n).map(function(e){return n[e]}).filter(function(e){return e.branchStatus!==y.CREATING}).filter(function(e){if(t.showOnlyLaunchedBranches)return!!e.courseBranchId;return!0}).sort(function(e,t){return t.createdAt-e.createdAt})})});b(k,N),module.exports=k},AYsO:function(module,exports,e){var t,r,n,i,a,o,s,u,c,l,d,f,h,p,m,v,m,g,m,y,m,S,m,b,m,C,m,E,m,R,m,w,m,I,m,T,m,M,m,N,m,k,m,x,m,A,m,L,m,D,m,O,m,q,m,P,m,B,m,F,m,H,m,z,m,V,m,U,m,W,m,K,m,j,m,G,m,Q,m,J,m,Y,m,Z,m,X,m,ee,m,te,_=e("41m7");r={id:"lodash-amd/modern/collections/contains",exports:{},loaded:!1},t=function(require){return e("41m7").contains}.call(r.exports,e,r.exports,r),r.loaded=!0,void 0===t&&(t=r.exports),i={id:"lodash-amd/modern/collections/toArray",exports:{},loaded:!1},n=function(require){return e("41m7").toArray}.call(i.exports,e,i.exports,i),i.loaded=!0,void 0===n&&(n=i.exports),o={id:"lodash-amd/modern/arrays/flatten",exports:{},loaded:!1},a=function(require){return e("41m7").flatten}.call(o.exports,e,o.exports,o),o.loaded=!0,void 0===a&&(a=o.exports),u={id:"lodash-amd/modern/arrays/last",exports:{},loaded:!1},s=function(require){return e("41m7").last}.call(u.exports,e,u.exports,u),u.loaded=!0,void 0===s&&(s=u.exports),l={id:"lodash-amd/modern/utilities/escape",exports:{},loaded:!1},c=function(require){return e("41m7").escape}.call(l.exports,e,l.exports,l),l.loaded=!0,void 0===c&&(c=l.exports),f={id:"lodash-amd/modern/objects/assign",exports:{},loaded:!1},d=function(require){return e("41m7").extend}.call(f.exports,e,f.exports,f),f.loaded=!0,void 0===d&&(d=f.exports),p={id:"lodash-amd/modern/objects/defaults",exports:{},loaded:!1},h=function(require){return e("41m7").defaults}.call(p.exports,e,p.exports,p),p.loaded=!0,void 0===h&&(h=p.exports),m=[],v=function(){function pull(e){for(var r=arguments,n=0,i=r.length,a=e?e.length:0;++n<i;)for(var o=-1,s=r[n];++o<a;)e[o]===s&&(t.call(e,o--,1),a--);return e}var e=[],t=e.splice;return pull}.apply(exports,m),m=[],g=function(){return function(){return function(e){var t=new e.api.Command("indent");t.queryEnabled=function(){var t=new e.api.Selection,r=t.getContaining(function(e){return"UL"===e.nodeName||"OL"===e.nodeName});return e.api.Command.prototype.queryEnabled.call(this)&&e.allowsBlockElements()&&!r},e.commands.indent=t}}}.apply(exports,m),m=[],y=function(){return function(){return function(e){var t=function(t){e.api.Command.call(this,t)};t.prototype=Object.create(e.api.Command.prototype),t.prototype.constructor=t,t.prototype.execute=function(t){function splitList(e){if(e.length>0){var t=document.createElement(i.nodeName);e.forEach(function(e){t.appendChild(e)}),i.parentNode.insertBefore(t,i.nextElementSibling)}}if(this.queryState()){var r=new e.api.Selection,n=r.range,i=r.getContaining(function(e){return"OL"===e.nodeName||"UL"===e.nodeName}),a=r.getContaining(function(e){return"LI"===e.nodeName});e.transactionManager.run(function(){if(a){splitList(new e.api.Node(a).nextAll()),r.placeMarkers();var t=document.createElement("p");t.innerHTML=a.innerHTML,i.parentNode.insertBefore(t,i.nextElementSibling),a.parentNode.removeChild(a)}else{var o=Array.prototype.map.call(i.querySelectorAll("li"),function(e){return n.intersectsNode(e)&&e}).filter(function(e){return e}),s=o.slice(-1)[0];splitList(new e.api.Node(s).nextAll()),r.placeMarkers();var u=document.createDocumentFragment();o.forEach(function(e){var t=document.createElement("p");t.innerHTML=e.innerHTML,u.appendChild(t)}),i.parentNode.insertBefore(u,i.nextElementSibling),o.forEach(function(e){e.parentNode.removeChild(e)})}0===i.childNodes.length&&i.parentNode.removeChild(i),r.selectMarkers()}.bind(this))}else e.api.Command.prototype.execute.call(this,t)},t.prototype.queryEnabled=function(){return e.api.Command.prototype.queryEnabled.call(this)&&e.allowsBlockElements()},e.commands.insertOrderedList=new t("insertOrderedList"),e.commands.insertUnorderedList=new t("insertUnorderedList")}}}.apply(exports,m),m=[],S=function(){return function(){return function(e){var t=new e.api.Command("outdent");t.queryEnabled=function(){var t=new e.api.Selection,r=t.getContaining(function(e){return"UL"===e.nodeName||"OL"===e.nodeName});return e.api.Command.prototype.queryEnabled.call(this)&&e.allowsBlockElements()&&!r},e.commands.outdent=t}}}.apply(exports,m),m=[],b=function(){return function(){return function(e){var t=new e.api.Command("redo");t.execute=function(){e.undoManager.redo()},t.queryEnabled=function(){return e.undoManager.position>0},e.commands.redo=t,e.options.undo.enabled&&e.el.addEventListener("keydown",function(e){e.shiftKey&&(e.metaKey||e.ctrlKey)&&90===e.keyCode&&(e.preventDefault(),t.execute())})}}}.apply(exports,m),m=[],C=function(){return function(){return function(e){var t=new e.api.Command("subscript");e.commands.subscript=t}}}.apply(exports,m),m=[],E=function(){return function(){return function(e){var t=new e.api.Command("superscript");e.commands.superscript=t}}}.apply(exports,m),m=[],R=function(){return function(){return function(e){var t=new e.api.Command("undo");t.execute=function(){e.undoManager.undo()},t.queryEnabled=function(){return e.undoManager.position<e.undoManager.length},e.commands.undo=t,e.options.undo.enabled&&e.el.addEventListener("keydown",function(e){e.shiftKey||!e.metaKey&&!e.ctrlKey||90!==e.keyCode||(e.preventDefault(),t.execute())})}}}.apply(exports,m),m=[g,y,S,b,C,E,R],w=function(e,t,r,n,i,a,o){return{indent:e,insertList:t,outdent:r,redo:n,subscript:i,superscript:a,undo:o}}.apply(exports,m),m=[t],I=function(e){function isBlockElement(r){return e(t,r.nodeName)}function isSelectionMarkerNode(e){return e.nodeType===Node.ELEMENT_NODE&&"scribe-marker"===e.className}function isCaretPositionNode(e){return e.nodeType===Node.ELEMENT_NODE&&"caret-position"===e.className}function unwrap(e,t){for(;t.childNodes.length>0;)e.insertBefore(t.childNodes[0],t);e.removeChild(t)}var t=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","CANVAS","DD","DIV","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TD","TH","TFOOT","UL","VIDEO"];return{isBlockElement:isBlockElement,isSelectionMarkerNode:isSelectionMarkerNode,isCaretPositionNode:isCaretPositionNode,unwrap:unwrap}}.apply(exports,m),m=[],T=function(){function isEmptyTextNode(e){return e.nodeType===Node.TEXT_NODE&&""===e.textContent}function insertAfter(e,t){return t.parentNode.insertBefore(e,t.nextSibling)}function removeNode(e){return e.parentNode.removeChild(e)}return{isEmptyTextNode:isEmptyTextNode,insertAfter:insertAfter,removeNode:removeNode}}.apply(exports,m),m=[a,n,I,T,e("VPN3")],M=function(e,t,r,n,i){function observeDomChanges(i,a){function includeRealMutations(i){return e(i.map(function(e){var r=t(e.addedNodes),n=t(e.removedNodes);return r.concat(n)})).filter(function(e){return!n.isEmptyTextNode(e)}).filter(function(e){return!r.isSelectionMarkerNode(e)}).length>0}var o=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,s=!1,u=new o(function(e){if(!s&&includeRealMutations(e)){s=!0;try{a()}catch(e){throw e}finally{setTimeout(function(){s=!1},0)}}});return u.observe(i,{attributes:!0,childList:!0,subtree:!0}),u}return observeDomChanges}.apply(exports,m),m=[t,M],N=function(e,t){return function(){return function(e){e.el.addEventListener("focus",function placeCaretOnFocus(){function getFirstDeepestChild(e){var t=document.createTreeWalker(e,NodeFilter.SHOW_ALL,null,!1),r=t.currentNode;return t.firstChild()?"BR"===t.currentNode.nodeName?r:getFirstDeepestChild(t.currentNode):t.currentNode}var t=new e.api.Selection;if(t.range){if(e.allowsBlockElements()&&t.range.startContainer===e.el){var r=getFirstDeepestChild(e.el.firstChild),n=t.range;n.setStart(r,0),n.setEnd(r,0),t.selection.removeAllRanges(),t.selection.addRange(n)}}}.bind(e));var r=function(){if(!e._skipFormatters){var t=new e.api.Selection,r=t.range,n=function(){r&&t.placeMarkers(),e.setHTML(e._htmlFormatterFactory.format(e.getHTML())),t.selectMarkers()}.bind(e);e.transactionManager.run(n)}delete e._skipFormatters}.bind(e);t(e.el,r),e.allowsBlockElements()&&e.el.addEventListener("keydown",function(t){if(13===t.keyCode){var r=new e.api.Selection,n=r.range,i=r.getContaining(function(e){return/^(H[1-6])$/.test(e.nodeName)});if(i&&n.collapsed){var a=n.cloneRange();a.setEndAfter(i,0);""===a.cloneContents().firstChild.textContent&&(t.preventDefault(),e.transactionManager.run(function(){var e=document.createElement("p"),t=document.createElement("br");e.appendChild(t),i.parentNode.insertBefore(e,i.nextElementSibling),n.setStart(e,0),n.setEnd(e,0),r.selection.removeAllRanges(),r.selection.addRange(n)}))}}}),e.allowsBlockElements()&&e.el.addEventListener("keydown",function(t){if(13===t.keyCode||8===t.keyCode){var r=new e.api.Selection;if(r.range.collapsed){var n=r.getContaining(function(e){return"LI"===e.nodeName});if(n&&""===n.textContent.trim()){t.preventDefault();var i=r.getContaining(function(e){return"UL"===e.nodeName||"OL"===e.nodeName});e.getCommand("OL"===i.nodeName?"insertOrderedList":"insertUnorderedList").execute()}}}})}}}.apply(exports,m),m=[],k=function(){return function(){return function(e){var t=/(\s|&nbsp;)+/g;e.registerHTMLFormatter("export",function(e){return e.replace(t," ")})}}}.apply(exports,m),m=[s],x=function(e){function wrapChildNodes(t,r){Array.prototype.reduce.call(r.childNodes,function(r,n){function startNewGroup(){var e=[n];r.push(e)}if("EM"!==n.nodeName){var i=e(r);if(i){t.element.isBlockElement(i[0])===t.element.isBlockElement(n)?i.push(n):startNewGroup()}else startNewGroup()}return r},[]).filter(function(e){return!t.element.isBlockElement(e[0])}).forEach(function(e){var t=document.createElement("p");e[0].parentNode.insertBefore(t,e[0]),e.forEach(function(e){t.appendChild(e)})}),r._isWrapped=!0}function traverse(e,t){for(var r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,null,!1),n=r.firstChild();n;){if("BLOCKQUOTE"===n.nodeName&&!n._isWrapped){wrapChildNodes(e,n),traverse(e,t);break}n=r.nextSibling()}}return function(){return function(e){e.registerHTMLFormatter("normalize",function(t){var r=document.createElement("div");return r.innerHTML=t,wrapChildNodes(e,r),traverse(e,r),r.innerHTML})}}}.apply(exports,m),m=[I,t],A=function(e,t){function parentHasNoTextContent(e,t){return!!e.isCaretPositionNode(t)||""===t.parentNode.textContent.trim()}function traverse(e,n){function isEmpty(t){if(0===t.children.length&&e.isBlockElement(t)||1===t.children.length&&e.isSelectionMarkerNode(t.children[0]))return!0;if(!e.isBlockElement(t)&&0===t.children.length)return parentHasNoTextContent(e,t);return!1}for(var i=n.firstElementChild;i;)e.isSelectionMarkerNode(i)||(isEmpty(i)&&""===i.textContent.trim()&&!t(r,i.nodeName)?i.appendChild(document.createElement("br")):i.children.length>0&&traverse(e,i)),i=i.nextElementSibling}var r=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];return function(){return function(e){e.registerHTMLFormatter("normalize",function(t){var r=document.createElement("div");return r.innerHTML=t,traverse(e.element,r),r.innerHTML})}}}.apply(exports,m),m=[c],L=function(e){return function(){return function(t){t.registerPlainTextFormatter(e)}}}.apply(exports,m),m=[],D=function(){function hasContent(e){for(var t=document.createTreeWalker(e,NodeFilter.SHOW_ALL,null,!1);t.nextNode();)if(t.currentNode&&(~["br"].indexOf(t.currentNode.nodeName.toLowerCase())||t.currentNode.length>0))return!0;return!1}return function(){return function(e){e.el.addEventListener("keydown",function(t){if(13===t.keyCode){var r=new e.api.Selection,n=r.range;r.getContaining(function(e){return"LI"===e.nodeName||/^(H[1-6])$/.test(e.nodeName)})||(t.preventDefault(),e.transactionManager.run(function(){"BR"===e.el.lastChild.nodeName&&e.el.removeChild(e.el.lastChild);var t=document.createElement("br");n.insertNode(t),n.collapse(!1);var i=n.cloneRange();if(i.setEndAfter(e.el.lastChild,0),!hasContent(i.cloneContents())){var a=document.createElement("br");n.insertNode(a)}var o=n.cloneRange();o.setStartAfter(t,0),o.setEndAfter(t,0),r.selection.removeAllRanges(),r.selection.addRange(o)}))}}.bind(this)),""===e.getHTML().trim()&&e.setContent("")}}}.apply(exports,m),m=[],O=function(){return function(){return function(e){var t=new e.api.CommandPatch("bold");t.queryEnabled=function(){var t=new e.api.Selection,r=t.getContaining(function(e){return/^(H[1-6])$/.test(e.nodeName)});return e.api.CommandPatch.prototype.queryEnabled.apply(this,arguments)&&!r},e.commandPatches.bold=t}}}.apply(exports,m),m=[],q=function(){var e="\ufeff";return function(){return function(e){var t=new e.api.CommandPatch("indent");t.execute=function(t){e.transactionManager.run(function(){var r=new e.api.Selection,n=r.range;if("P"===n.commonAncestorContainer.nodeName&&"<br>"===n.commonAncestorContainer.innerHTML){var i=document.createTextNode("\ufeff");n.insertNode(i),n.setStart(i,0),n.setEnd(i,0),r.selection.removeAllRanges(),r.selection.addRange(n)}e.api.CommandPatch.prototype.execute.call(this,t),r=new e.api.Selection;var a=r.getContaining(function(e){return"BLOCKQUOTE"===e.nodeName});a&&a.removeAttribute("style")}.bind(this))},e.commandPatches.indent=t}}}.apply(exports,m),m=[],P=function(){return function(){return function(e){var t=new e.api.CommandPatch("insertHTML"),r=e.element;t.execute=function(t){e.transactionManager.run(function(){function sanitize(e){var t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1),n=t.firstChild();if(!n)return;do{"SPAN"===n.nodeName?r.unwrap(e,n):(n.style.lineHeight=null,""===n.getAttribute("style")&&n.removeAttribute("style")),sanitize(n)}while(n=t.nextSibling())}e.api.CommandPatch.prototype.execute.call(this,t),sanitize(e.el)}.bind(this))},e.commandPatches.insertHTML=t}}}.apply(exports,m),m=[],B=function(){return function(){return function(e){var t=e.element,r=e.node,n=function(t){e.api.CommandPatch.call(this,t)};n.prototype=Object.create(e.api.CommandPatch.prototype),n.prototype.constructor=n,n.prototype.execute=function(n){e.transactionManager.run(function(){if(e.api.CommandPatch.prototype.execute.call(this,n),this.queryState()){var i=new e.api.Selection,a=i.getContaining(function(e){return"OL"===e.nodeName||"UL"===e.nodeName});if(a.nextElementSibling&&0===a.nextElementSibling.childNodes.length&&r.removeNode(a.nextElementSibling),a){var o=a.parentNode;o&&/^(H[1-6]|P)$/.test(o.nodeName)&&(i.placeMarkers(),r.insertAfter(a,o),i.selectMarkers(),2===o.childNodes.length&&r.isEmptyTextNode(o.firstChild)&&r.removeNode(o),0===o.childNodes.length&&r.removeNode(o))}Array.prototype.slice.call(a.childNodes).forEach(function(e){Array.prototype.slice.call(e.childNodes).forEach(function(r){if("SPAN"===r.nodeName){var n=r;t.unwrap(e,n)}else r.nodeType===Node.ELEMENT_NODE&&(r.style.lineHeight=null,""===r.getAttribute("style")&&r.removeAttribute("style"))})})}}.bind(this))},e.commandPatches.insertOrderedList=new n("insertOrderedList"),e.commandPatches.insertUnorderedList=new n("insertUnorderedList")}}}.apply(exports,m),m=[],F=function(){return function(){return function(e){var t=new e.api.CommandPatch("outdent");t.execute=function(){e.transactionManager.run(function(){var t=new e.api.Selection,r=t.range,n=t.getContaining(function(e){return"BLOCKQUOTE"===e.nodeName});if("BLOCKQUOTE"===r.commonAncestorContainer.nodeName){t.placeMarkers(),t.selectMarkers(!0);var i=r.cloneContents();n.parentNode.insertBefore(i,n),r.deleteContents(),t.selectMarkers(),""===n.textContent&&n.parentNode.removeChild(n)}else{var a=t.getContaining(function(e){return"P"===e.nodeName});if(a){var o=new e.api.Node(a).nextAll();if(o.length){var s=document.createElement(n.nodeName);o.forEach(function(e){s.appendChild(e)}),n.parentNode.insertBefore(s,n.nextElementSibling)}t.placeMarkers(),n.parentNode.insertBefore(a,n.nextElementSibling),t.selectMarkers(),""===n.innerHTML&&n.parentNode.removeChild(n)}else e.api.CommandPatch.prototype.execute.call(this)}}.bind(this))},e.commandPatches.outdent=t}}}.apply(exports,m),m=[],H=function(){return function(){return function(e){var t=new e.api.CommandPatch("createLink");e.commandPatches.createLink=t,t.execute=function(t){var r=new e.api.Selection;if(r.range.collapsed){var n=document.createElement("a");n.setAttribute("href",t),n.textContent=t,r.range.insertNode(n);var i=document.createRange();i.setStartBefore(n),i.setEndAfter(n),r.selection.removeAllRanges(),r.selection.addRange(i)}else e.api.CommandPatch.prototype.execute.call(this,t)}}}}.apply(exports,m),m=[],z=function(){return function(){return function(e){var t=e.element;e.allowsBlockElements()&&e.el.addEventListener("keyup",function(r){if(8===r.keyCode||46===r.keyCode){var n=new e.api.Selection,i=n.getContaining(function(e){return"P"===e.nodeName});i&&e.transactionManager.run(function(){n.placeMarkers(),Array.prototype.slice.call(i.childNodes).forEach(function(e){if("SPAN"===e.nodeName){var r=e;t.unwrap(i,r)}else e.nodeType===Node.ELEMENT_NODE&&(e.style.lineHeight=null,""===e.getAttribute("style")&&e.removeAttribute("style"))}),n.selectMarkers()},!0)}})}}}.apply(exports,m),m=[O,q,P,B,F,H,z],V=function(e,t,r,n,i,a,o){return{commands:{bold:e,indent:t,insertHTML:r,insertList:n,outdent:i,createLink:a},events:o}}.apply(exports,m),m=[],U=function(){return function(){return function(e){""===e.getHTML().trim()&&e.setContent("<p><br></p>")}}}.apply(exports,m),m=[],W=function(){return function(e){function CommandPatch(e){this.commandName=e}return CommandPatch.prototype.execute=function(t){e.transactionManager.run(function(){document.execCommand(this.commandName,!1,t||null)}.bind(this))},CommandPatch.prototype.queryState=function(){return document.queryCommandState(this.commandName)},CommandPatch.prototype.queryEnabled=function(){return document.queryCommandEnabled(this.commandName)},CommandPatch}}.apply(exports,m),m=[],K=function(){return function(e){function Command(t){this.commandName=t,this.patch=e.commandPatches[this.commandName]}return Command.prototype.execute=function(t){this.patch?this.patch.execute(t):e.transactionManager.run(function(){document.execCommand(this.commandName,!1,t||null)}.bind(this))},Command.prototype.queryState=function(){return this.patch?this.patch.queryState():document.queryCommandState(this.commandName)},Command.prototype.queryEnabled=function(){return this.patch?this.patch.queryEnabled():document.queryCommandEnabled(this.commandName)},Command}}.apply(exports,m),m=[],j=function(){function Node(e){this.node=e}return Node.prototype.getAncestor=function(e,t){var r=function(t){return e===t};if(r(this.node))return;for(var n=this.node.parentNode;n&&!r(n);){if(t(n))return n;n=n.parentNode}},Node.prototype.nextAll=function(){for(var e=[],t=this.node.nextSibling;t;)e.push(t),t=t.nextSibling;return e},Node}.apply(exports,m),m=[I],G=function(e){return function(e){function Selection(){for(var t=document,r=e.el.parentNode;r&&r.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&r.nodeType!==Node.DOCUMENT_NODE;)r=r.parentNode;if(r&&r.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&r.getSelection&&(t=r),this.selection=t.getSelection(),this.selection.rangeCount&&this.selection.anchorNode){this.range=document.createRange();var n=document.createRange();this.range.setStart(this.selection.anchorNode,this.selection.anchorOffset),n.setStart(this.selection.focusNode,this.selection.focusOffset),this.range.compareBoundaryPoints(Range.START_TO_START,n)<=0?this.range.setEnd(this.selection.focusNode,this.selection.focusOffset):(this.range=n,this.range.setEnd(this.selection.anchorNode,this.selection.anchorOffset))}}return Selection.prototype.getContaining=function(t){if(!this.range)return;var r=new e.api.Node(this.range.commonAncestorContainer);return r.node&&e.el===r.node||!t(r.node)?r.getAncestor(e.el,t):r.node},Selection.prototype.placeMarkers=function(){if(!this.range)return;if(!e.el.offsetParent)return;var t=document.createRange();t.selectNodeContents(e.el);var r=this.range.compareBoundaryPoints(Range.START_TO_START,t)>=0,n=this.range.compareBoundaryPoints(Range.END_TO_END,t)<=0;if(r&&n){var i=document.createElement("em");i.classList.add("scribe-marker");var a=document.createElement("em");a.classList.add("scribe-marker");var o=this.range.cloneRange();if(o.collapse(!1),o.insertNode(a),a.nextSibling&&a.nextSibling.nodeType===Node.TEXT_NODE&&""===a.nextSibling.data&&a.parentNode.removeChild(a.nextSibling),a.previousSibling&&a.previousSibling.nodeType===Node.TEXT_NODE&&""===a.previousSibling.data&&a.parentNode.removeChild(a.previousSibling),!this.range.collapsed){var s=this.range.cloneRange();s.collapse(!0),s.insertNode(i),i.nextSibling&&i.nextSibling.nodeType===Node.TEXT_NODE&&""===i.nextSibling.data&&i.parentNode.removeChild(i.nextSibling),i.previousSibling&&i.previousSibling.nodeType===Node.TEXT_NODE&&""===i.previousSibling.data&&i.parentNode.removeChild(i.previousSibling)}this.selection.removeAllRanges(),this.selection.addRange(this.range)}},Selection.prototype.getMarkers=function(){return e.el.querySelectorAll("em.scribe-marker")},Selection.prototype.removeMarkers=function(){var e=this.getMarkers();Array.prototype.forEach.call(e,function(e){e.parentNode.removeChild(e)})},Selection.prototype.selectMarkers=function(e){var t=this.getMarkers();if(!t.length)return;var r=document.createRange();r.setStartBefore(t[0]),t.length>=2?r.setEndAfter(t[1]):r.setEndAfter(t[0]),e||this.removeMarkers(),this.selection.removeAllRanges(),this.selection.addRange(r)},Selection.prototype.isCaretOnNewLine=function(){function isEmptyInlineElement(e){for(var t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1),r=t.root;r;){var n=r.childNodes.length;if(n>1||1===n&&""!==r.textContent.trim())return!1;if(0===n)return""===r.textContent.trim();r=t.nextNode()}}var e=this.getContaining(function(e){return"P"===e.nodeName});return!!e&&isEmptyInlineElement(e)},Selection}}.apply(exports,m),m=[],Q=function(){return function(e,t){function SimpleCommand(e,r){t.api.Command.call(this,e),this._nodeName=r}return SimpleCommand.prototype=Object.create(e.Command.prototype),SimpleCommand.prototype.constructor=SimpleCommand,SimpleCommand.prototype.queryState=function(){var e=new t.api.Selection;return t.api.Command.prototype.queryState.call(this)&&!!e.getContaining(function(e){return e.nodeName===this._nodeName}.bind(this))},SimpleCommand}}.apply(exports,m),m=[W,K,j,G,Q],J=function(e,t,r,n,i){return function Api(a){this.CommandPatch=e(a),this.Command=t(a),this.Node=r,this.Selection=n(a),this.SimpleCommand=i(this,a)}}.apply(exports,m),m=[d],Y=function(e){return function(t){function TransactionManager(){this.history=[]}return e(TransactionManager.prototype,{start:function(){this.history.push(1)},end:function(){this.history.pop(),0===this.history.length&&(t.pushHistory(),t.trigger("content-changed"))},run:function(e,r){this.start();try{e&&e()}finally{t._forceMerge=!0===r,this.end(),t._forceMerge=!1}}}),TransactionManager}}.apply(exports,m),m=[],Z=function(){function UndoManager(e,t){this._stack=[],this._limit=e,this._fireEvent="undefined"!=typeof CustomEvent&&t&&t.dispatchEvent,this._ush=t,this.position=0,this.length=0}return UndoManager.prototype.transact=function(e,t){if(arguments.length<2)throw new TypeError("Not enough arguments to UndoManager.transact.");e.execute(),this._stack.splice(0,this.position),t&&this.length?this._stack[0].push(e):this._stack.unshift([e]),this.position=0,this._limit&&this._stack.length>this._limit?this.length=this._stack.length=this._limit:this.length=this._stack.length,this._fireEvent&&this._ush.dispatchEvent(new CustomEvent("DOMTransaction",{detail:{transactions:this._stack[0].slice()},bubbles:!0,cancelable:!1}))},UndoManager.prototype.undo=function(){if(this.position<this.length){for(var e=this._stack[this.position].length-1;e>=0;e--)this._stack[this.position][e].undo();this.position++,this._fireEvent&&this._ush.dispatchEvent(new CustomEvent("undo",{detail:{transactions:this._stack[this.position-1].slice()},bubbles:!0,cancelable:!1}))}},UndoManager.prototype.redo=function(){if(this.position>0){for(var e=0,t=this._stack[this.position-1].length;e<t;e++)this._stack[this.position-1][e].redo();this.position--,this._fireEvent&&this._ush.dispatchEvent(new CustomEvent("redo",{detail:{transactions:this._stack[this.position].slice()},bubbles:!0,cancelable:!1}))}},UndoManager.prototype.item=function(e){if(e>=0&&e<this.length)return this._stack[e].slice();return null},UndoManager.prototype.clearUndo=function(){this._stack.length=this.length=this.position},UndoManager.prototype.clearRedo=function(){this._stack.splice(0,this.position),this.position=0,this.length=this._stack.length},UndoManager}.apply(exports,m),m=[v,e("ljW4")],X=function(e,t){function EventEmitter(){this._listeners={}}return EventEmitter.prototype.on=function(e,r){var n=this._listeners[e]||t.Set();this._listeners[e]=n.add(r)},EventEmitter.prototype.off=function(e,r){var n=this._listeners[e]||t.Set();n=r?n.delete(r):n.clear()},EventEmitter.prototype.trigger=function(e,r){for(var n=e.split(":");n.length;){var i=n.join(":");(this._listeners[i]||t.Set()).forEach(function(e){e.apply(null,r)}),n.splice(n.length-1,1)}},EventEmitter}.apply(exports,m),m=[h],ee=function(e){function checkOptions(r){var n=r||{};return Object.freeze(e(n,t))}var t={allowBlockElements:!0,debug:!1,undo:{manager:!1,enabled:!0,limit:100,interval:250},defaultCommandPatches:["bold","indent","insertHTML","insertList","outdent","createLink"]};return{defaultOptions:t,checkOptions:checkOptions}}.apply(exports,m),m=[w,N,k,x,A,L,D,V,U,J,Y,Z,X,I,T,e("ljW4"),ee],void 0!==(te=function(e,t,r,n,i,a,o,s,u,c,l,d,f,h,p,m,v){function Scribe(g,y){f.call(this),this.el=g,this.commands={},this.options=v.checkOptions(y),this.commandPatches={},this._plainTextFormatterFactory=new FormatterFactory,this._htmlFormatterFactory=new HTMLFormatterFactory,this.api=new c(this),this.node=p,this.element=h,this.Immutable=m;var S=l(this);this.transactionManager=new S,this.undoManager=!1,this.options.undo.enabled&&(this.options.undo.manager?this.undoManager=this.options.undo.manager:this.undoManager=new d(this.options.undo.limit,this.el),this._merge=!1,this._forceMerge=!1,this._mergeTimer=0,this._lastItem={content:""}),this.setHTML(this.getHTML()),this.el.setAttribute("contenteditable",!0),this.el.addEventListener("input",function(){this.transactionManager.run()}.bind(this),!1),this.allowsBlockElements()?(this.use(u()),this.use(n()),this.use(i())):this.use(o());var b=m.List.of(a,r),C=m.List.of(s.events),E=m.List(this.options.defaultCommandPatches).map(function(e){return s.commands[e]}),R=m.List.of("indent","insertList","outdent","redo","subscript","superscript","undo").map(function(t){return e[t]});m.List().concat(b,C,E,R).forEach(function(e){this.use(e())}.bind(this)),this.use(t())}function FormatterFactory(){this.formatters=m.List()}function HTMLFormatterFactory(){this.formatters={sanitize:m.List(),normalize:m.List(),export:m.List()}}return Scribe.prototype=Object.create(f.prototype),Scribe.prototype.use=function(e){return e(this),this},Scribe.prototype.setHTML=function(e,t){this._lastItem.content=e,t&&(this._skipFormatters=!0),this.el.innerHTML!==e&&(this.el.innerHTML=e)},Scribe.prototype.getHTML=function(){return this.el.innerHTML},Scribe.prototype.getContent=function(){return this._htmlFormatterFactory.formatForExport(this.getHTML().replace(/<br>$/,""))},Scribe.prototype.getTextContent=function(){return this.el.textContent},Scribe.prototype.pushHistory=function(){var e=this;if(e.options.undo.enabled){var t=e._lastItem.content.replace(/<em class="scribe-marker">/g,"").replace(/<\/em>/g,"");if(e.getHTML()!==t){var r=new e.api.Selection;r.placeMarkers();var n=e.getHTML();r.removeMarkers();var i=e.undoManager.item(e.undoManager.position);return(e._merge||e._forceMerge)&&i&&e._lastItem==i[0]?e._lastItem.content=n:(e._lastItem={previousItem:e._lastItem,content:n,scribe:e,execute:function(){},undo:function(){this.scribe.restoreFromHistory(this.previousItem)},redo:function(){this.scribe.restoreFromHistory(this)}},e.undoManager.transact(e._lastItem,!1)),clearTimeout(e._mergeTimer),e._merge=!0,e._mergeTimer=setTimeout(function(){e._merge=!1},e.options.undo.interval),!0}}return!1},Scribe.prototype.getCommand=function(e){return this.commands[e]||this.commandPatches[e]||new this.api.Command(e)},Scribe.prototype.restoreFromHistory=function(e){this._lastItem=e,this.setHTML(e.content,!0),(new this.api.Selection).selectMarkers(),this.trigger("content-changed")},Scribe.prototype.allowsBlockElements=function(){return this.options.allowBlockElements},Scribe.prototype.setContent=function(e){this.allowsBlockElements()||(e+="<br>"),this.setHTML(e),this.trigger("content-changed")},Scribe.prototype.insertPlainText=function(e){this.insertHTML("<p>"+this._plainTextFormatterFactory.format(e)+"</p>")},Scribe.prototype.insertHTML=function(e){this.getCommand("insertHTML").execute(this._htmlFormatterFactory.format(e))},Scribe.prototype.isDebugModeEnabled=function(){return this.options.debug},Scribe.prototype.registerHTMLFormatter=function(e,t){this._htmlFormatterFactory.formatters[e]=this._htmlFormatterFactory.formatters[e].push(t)},Scribe.prototype.registerPlainTextFormatter=function(e){this._plainTextFormatterFactory.formatters=this._plainTextFormatterFactory.formatters.push(e)},FormatterFactory.prototype.format=function(e){return this.formatters.reduce(function(e,t){return t(e)},e)},HTMLFormatterFactory.prototype=Object.create(FormatterFactory.prototype),HTMLFormatterFactory.prototype.constructor=HTMLFormatterFactory,HTMLFormatterFactory.prototype.format=function(e){return this.formatters.sanitize.concat(this.formatters.normalize).reduce(function(e,t){return t(e)},e)},HTMLFormatterFactory.prototype.formatForExport=function(e){return this.formatters.export.reduce(function(e,t){return t(e)},e)},Scribe}.apply(exports,m))&&(module.exports=te)},BW0Z:function(module,exports,e){var t,r;t=[e("Qn5n")],void 0!==(r=function(e){return function(t){return t.tags.em||(t.tags.em={}),t.tags.em.class="scribe-marker",t.tags.br={},function(r){var n=new e(t);r.registerHTMLFormatter("sanitize",n.clean.bind(n))}}}.apply(exports,t))&&(module.exports=r)},CMGS:function(module,exports,e){var t=e("VbQ+");"string"==typeof t&&(t=[[module.i,t,""]]);var r,n={};n.transform=void 0;var i=e("MTIv")(t,n);t.locals&&(module.exports=t.locals)},"CYU+":function(module,exports,e){var t=e("EBJ7");"string"==typeof t&&(t=[[module.i,t,""]]);var r,n={};n.transform=void 0;var i=e("MTIv")(t,n);t.locals&&(module.exports=t.locals)},EBJ7:function(module,exports){},ECY2:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("zwoO"),i=_interopRequireDefault(n),a=e("Pf15"),o=_interopRequireDefault(a),s=e("U7vG"),u=e("c3vZ"),c=e("8JAr"),l=e("StZn"),d=function(e){function CourseRatingsDashboardFluxible(){return(0,r.default)(this,CourseRatingsDashboardFluxible),(0,i.default)(this,e.apply(this,arguments))}return(0,o.default)(CourseRatingsDashboardFluxible,e),CourseRatingsDashboardFluxible.prototype.componentWillMount=function componentWillMount(){this.fluxibleContext=u.createContext()},CourseRatingsDashboardFluxible.prototype.render=function render(){return s.createElement(l,{context:this.fluxibleContext.getComponentContext()},s.createElement(c,this.props))},CourseRatingsDashboardFluxible}(s.Component);module.exports=d},FXCk:function(module,exports,e){"use strict";var t=e("S2Uf"),r=e("hHYt"),n=e("I8Ec"),i=r("/api/feedbackEmails.v1/",{type:"rest"}),a=r("/api/sentTargetedMessages.v1/",{type:"rest"}),o={sendMessage:function sendMessage(e,r,a,o){var s=(new n).addQueryParam("action","publish").addQueryParam("entryType",e).addQueryParam("entryId",r).addQueryParam("anonymizeSender",a);return t(i.post(s.toString(),{data:{cmlContent:o}}))},getSentMessage:function getSentMessage(e){var r=e.replace(/~/g,"!~"),i=(new n).addQueryParam("q","byScopeAndType").addQueryParam("messageType","FeedbackEmailType").addQueryParam("scope","Feedback~"+r);return t(a.get(i.toString()))}};module.exports=o},HFOE:function(module,exports){},HSPV:function(module,exports,e){"use strict";var t=e("S2Uf"),_=e("41m7"),r=e("Pj0t"),n=e("/sYi"),i=e("n70R"),a=e("kV9D"),o=e("pkLG"),s=e("fxgV"),u=e("U70p"),c=e("I8Ec"),l=e("AHPF"),d=l.ALL_BRANCHES,f={getRatingStats:function getRatingStats(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.AllLearners,a=(new c).addQueryParam("q","course").addQueryParam("courseId",e).addQueryParam("feedbackSystem",s.Rating).addQueryParam("ratingValues","1,2,3,4,5").addQueryParam("countBy","ratingValue");return r!==d&&a.addQueryParam("courseBranchId",r),n.id===u.Completers.id&&a.addQueryParam("courseCompleted",!0),t(i.get(a.toString())).then(function(e){return e.elements[0].counts})},getReviewStats:function getReviewStats(e){var r=(new c).addQueryParam("q","course").addQueryParam("courseId",e).addQueryParam("feedbackSystem",s.Rating).addQueryParam("ratingValues","1,2,3,4,5").addQueryParam("categories","generic").addQueryParam("countBy","category");return t(a.get(r.toString())).then(function(e){return e.elements[0].counts})},getReviews:function getReviews(e,r,i,a,o){var l=10,f=(new c).addQueryParam("q","course").addQueryParam("courseId",e).addQueryParam("feedbackSystem",s.Rating).addQueryParam("ratingValues",-1===o?"1,2,3,4,5":o).addQueryParam("categories","generic").addQueryParam("start",10*a).addQueryParam("limit",10);return r!==d&&f.addQueryParam("courseBranchId",r),i.id===u.Completers.id&&f.addQueryParam("courseCompleted",!0),t(n.get(f.toString())).then(function(e){return{feedbacks:e.elements,totalCount:e.paging.total}})},getFeedback:function getFeedback(e){var n=(new c).addQueryParam("q","course").addQueryParam("courseId",e);return t(r.get(n.toString())).then(function(e){return e.elements[0]})},multiGetStarFeedback:function multiGetStarFeedback(e){var n=20,i=_(e).chain().groupBy(function(e,t){return Math.floor(t/20)}).toArray().value(),a=_(i).map(function(e){var n=(new c).addQueryParam("q","byCourseAndFeedback").addQueryParam("courseIds",e.join(",")).addQueryParam("feedbackSystem","STAR");return t(r.get(n.toString())).then(function(e){return e.elements})});return t.all(a).then(function(e){return _(e).flatten()})},postFeedback:function postFeedback(e,n){var i=(new c).addQueryParam("action","submit").addQueryParam("courseId",e).addQueryParam("feedbackSystem",s.Rating);return t(r.post(i.toString(),{data:n.toObject()}))},deleteFeedback:function deleteFeedback(e){var r=(new c).addQueryParam("action","hide").addQueryParam("feedbackId",e);return t(o.post(r.toString()))}};module.exports=f},I3dp:function(module,exports,e){var t=e("oLaJ");"string"==typeof t&&(t=[[module.i,t,""]]);var r,n={};n.transform=void 0;var i=e("MTIv")(t,n);t.locals&&(module.exports=t.locals)},IG45:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var t=e("U7vG"),r=_interopRequireWildcard(t),n=e("07GE"),i=_interopRequireDefault(n),a="https://partner.coursera.help",o=function getLink(e,t){return e?a+"/hc/articles/"+e:t?a+"/hc/sections/"+t:a},s=function PartnerHelpLink(e){var t=e.articleId,n=e.sectionId,a=e.linkText,s=e.linkClasses,u=o(t,n);return r.createElement("a",{className:s,href:u,target:"_blank",rel:"noopener noreferrer"},a||(0,i.default)("Learn more"))};module.exports=s},J4Iq:function(module,exports,e){var t=e("mhxD");"string"==typeof t&&(t=[[module.i,t,""]]);var r,n={};n.transform=void 0;var i=e("MTIv")(t,n);t.locals&&(module.exports=t.locals)},Jy2F:function(module,exports,e){var t=e("1Mfw");"string"==typeof t&&(t=[[module.i,t,""]]);var r,n={};n.transform=void 0;var i=e("MTIv")(t,n);t.locals&&(module.exports=t.locals)},MAbH:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=function Partner(e){var t=e.id,n=e.name,i=e.shortName,a=e.squareLogo;(0,r.default)(this,Partner),this.id=t,this.name=n,this.shortName=i,this.squareLogo=a};module.exports=n},Nrie:function(module,exports,e){"use strict";var t=e("Wksn");module.exports=[{value:-1,label:t("All reviews")},{value:5,label:t("5 star")},{value:4,label:t("4 star")},{value:3,label:t("3 star")},{value:2,label:t("2 star")},{value:1,label:t("1 star")}]},OpWn:function(module,exports){},Pj0t:function(module,exports,e){"use strict";var t=e("hHYt"),r=new t("/api/myFeedback.v1",{type:"rest"});module.exports=r},Q75q:function(module,exports,e){"use strict";var t=function placeCaretAtEnd(e){var t=e.tagName.toLowerCase();if(e.focus(),"textarea"===t||"input"===t){if("number"==typeof e.selectionStart)e.selectionStart=e.selectionEnd=e.value.length;else if(void 0!==e.createTextRange){var r=e.createTextRange();r.collapse(!1),r.select()}}else if(void 0!==window.getSelection&&void 0!==document.createRange){var n=document.createRange();n.selectNodeContents(e),n.collapse(!1);var i=window.getSelection();i.removeAllRanges(),i.addRange(n)}else if(void 0!==document.body.createTextRange){var a=document.body.createTextRange();a.moveToElementText(e),a.collapse(!1),a.select()}};module.exports=t},Qn5n:function(module,exports,e){var t;void 0!==(t=function(){function HTMLJanitor(e){this.config=e}function isBlockElement(t){return-1!==e.indexOf(t.nodeName)}function isInlineElement(e){return-1!==t.indexOf(e.nodeName)}function createTreeWalker(e){return document.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}var e=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"],t=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];return HTMLJanitor.prototype.clean=function(e){var t=document.createElement("div");return t.innerHTML=e,this._sanitize(t),t.innerHTML},HTMLJanitor.prototype._sanitize=function(e){var t=createTreeWalker(e),r=t.firstChild();if(!r)return;do{var n=r.nodeName.toLowerCase(),i=this.config.tags[n];if(r._sanitized)continue;if(r.nodeType===Node.TEXT_NODE){if(""===r.data.trim()&&(r.previousElementSibling&&isBlockElement(r.previousElementSibling)||r.nextElementSibling&&isBlockElement(r.nextElementSibling))){e.removeChild(r),this._sanitize(e);break}continue}if(r.nodeType===Node.COMMENT_NODE){e.removeChild(r),this._sanitize(e);break}var a=isInlineElement(r),o;a&&(o=Array.prototype.some.call(r.childNodes,isBlockElement));var s=a&&o,u=!!e.parentNode,c=isBlockElement(e)&&isBlockElement(r)&&u;if(!this.config.tags[n]||s||!this.config.keepNestedBlockElements&&c){if("SCRIPT"!==r.nodeName&&"STYLE"!==r.nodeName)for(;r.childNodes.length>0;)e.insertBefore(r.childNodes[0],r);e.removeChild(r),this._sanitize(e);break}for(var l=0;l<r.attributes.length;l+=1){var d=r.attributes[l],f=d.name.toLowerCase(),h=i[f],p=!h,m=!0!==h&&d.value!==h;(p||m)&&(r.removeAttribute(d.name),l-=1)}this._sanitize(r),r._sanitized=!0}while(r=t.nextSibling())},HTMLJanitor}.call(exports,e,exports,module))&&(module.exports=t)},RjIh:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("zwoO"),i=_interopRequireDefault(n),a=e("Pf15"),o=_interopRequireDefault(a),s,u,c=e("U7vG"),l=e("L0um");e("aFEz");var d=(u=s=function(e){function AppMessage(){return(0,r.default)(this,AppMessage),(0,i.default)(this,e.apply(this,arguments))}return(0,o.default)(AppMessage,e),AppMessage.prototype.render=function render(){var e=this.props.heading?c.createElement("h3",{className:"heading"},this.props.heading):null,t=this.props.subheading?c.createElement("div",{className:"subheading"},this.props.subheading):null,r=l("rc-AppMessage",this.props.size,this.props.className);return c.createElement("div",{className:r},(e||t)&&c.createElement("div",{className:"heading-container"},e,t),this.props.children&&c.createElement("div",{className:"body"},this.props.children))},AppMessage}(c.Component),s.propTypes={heading:c.PropTypes.node,subheading:c.PropTypes.node,className:c.PropTypes.string,children:c.PropTypes.any,size:c.PropTypes.oneOf(["small","large"])},s.defaultProps={size:"large"},u);module.exports=d},SNal:function(module,exports,e){"use strict";var _=e("41m7"),t=e("i8xy"),r=e("tmVI"),n=t({storeName:"CourseRatingStore",initialize:function initialize(){this.myRatingFeedback=null,this.isLoadingReviews=!1,this.courseRatings=new r},getMyRatingFeedback:function getMyRatingFeedback(){return this.myRatingFeedback},getReviewCollection:function getReviewCollection(){return this.courseRatings.reviewCollection},getBranchId:function getBranchId(){return this.courseRatings.branchId},getRatingValue:function getRatingValue(){return this.courseRatings.ratingValue},getLearnerAudience:function getLearnerAudience(){return this.courseRatings.learnerAudience},getCourseRatingStats:function getCourseRatingStats(){return this.courseRatings.stats},getIsLoadingReviews:function getIsLoadingReviews(){return this.isLoadingReviews}});n.handlers={GET_REVIEWS:function GET_REVIEWS(e,t){var r=e.reviewCollection;this.isLoadingReviews=!0,this.emitChange()},RECEIVE_REVIEWS:function RECEIVE_REVIEWS(e,t){var r=e.feedbacks,n=e.totalCount;this.isLoadingReviews=!1,this.courseRatings.appendReviews(r,n),this.emitChange()},DELETE_FEEDBACK:function DELETE_FEEDBACK(e){this.courseRatings.deleteReview(e),this.emitChange()},FILTER_REVIEWS:function FILTER_REVIEWS(e,t){var r=e.ratingValue;this.courseRatings.setRatingValue(r),this.emitChange()},RECEIVE_COURSE_RATING_STATS:function RECEIVE_COURSE_RATING_STATS(e,t){var r=e.courseRatingStats;this.courseRatings.setStats(r),this.emitChange()},FILTER_RATINGS:function FILTER_RATINGS(e,t){var r=e.learnerAudience;this.courseRatings.setLearnerAudience(r),this.emitChange()},RECEIVE_MY_RATING:function RECEIVE_MY_RATING(e,t){var r=e.ratingFeedback;this.myRatingFeedback=r,this.emitChange()},SET_FEEDBACK_BRANCH_ID:function SET_FEEDBACK_BRANCH_ID(e,t){var r=e.branchId;this.courseRatings.setBranchId(r),this.emitChange()}},module.exports=n},SiEF:function(module,exports,e){var t=e("HFOE");"string"==typeof t&&(t=[[module.i,t,""]]);var r,n={};n.transform=void 0;var i=e("MTIv")(t,n);t.locals&&(module.exports=t.locals)},TC53:function(module,exports,e){var t;void 0!==(t=function(){return function(){return function(e){function moveChildren(e,t){for(var r,n=e.firstChild;n;)r=n.nextSibling,t.appendChild(n),n=r}function copyAttributes(e,t){if(e.hasAttributes())for(var r=0,n=e.attributes.length;r<n;r++){var i=e.attributes[r].cloneNode(!1);t.attributes.setNamedItem(i)}}function replaceNode(e,t){var r=document.createElement(t);moveChildren(e,r),copyAttributes(e,r),e.parentNode.replaceChild(r,e)}function traverse(e){for(var r=e.firstElementChild,n;r;){n=r.nextElementSibling,traverse(r);var i=t[r.nodeName];i&&replaceNode(r,i),r=n}}var t={B:"strong",I:"em"};e.registerHTMLFormatter("normalize",function(e){if("string"==typeof e){var t=document.createElement("div");return t.innerHTML=e,traverse(t),t.innerHTML}return traverse(e),e})}}}.call(exports,e,exports,module))&&(module.exports=t)},TOa4:function(module,exports,e){"use strict";module.exports=function(){return function(e){e.el.addEventListener("keypress",function(e){13===e.keyCode&&e.shiftKey&&(e.preventDefault(),e.stopPropagation())})}}},U70p:function(module,exports,e){"use strict";var t=e("Wksn");module.exports={AllLearners:{id:"ALL_LEARNERS",label:t("All learners"),eventKey:"all_learners"},Completers:{id:"COMPLETERS",label:t("Completers"),eventKey:"completers"}}},UXxd:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("zwoO"),i=_interopRequireDefault(n),a=e("Pf15"),o=_interopRequireDefault(a),s,u,c=e("cKYN"),l=c.DropdownButton,d=c.MenuItem,f=e("U7vG"),h=e("U70p"),_=e("41m7"),p=e("Sg+N"),m=(u=s=function(e){function CourseLearnerAudienceSelect(){return(0,r.default)(this,CourseLearnerAudienceSelect),(0,i.default)(this,e.apply(this,arguments))}return(0,o.default)(CourseLearnerAudienceSelect,e),CourseLearnerAudienceSelect.prototype.handleSelect=function handleSelect(e){this.props.onChange(e)},CourseLearnerAudienceSelect.prototype.render=function render(){var e=this;return f.createElement(l,{block:!0,title:this.props.learnerAudience.label,className:"rc-CourseLearnerAudienceSelect teach-dropdown-btn"},_(h).map(function(t,r){var n=t.label;return f.createElement(d,{onSelect:function onSelect(){return e.handleSelect(t)},key:r},f.createElement(p,{trackingName:t.eventKey},n))}))},CourseLearnerAudienceSelect}(f.Component),s.propTypes={learnerAudience:f.PropTypes.object.isRequired,onChange:f.PropTypes.func.isRequired},u);module.exports=m},VPN3:function(module,exports,e){var t;void 0!==(t=function(require){/*!
 * Shim for MutationObserver interface
 * Author: Graeme Yeates (github.com/megawac)
 * Repository: https://github.com/megawac/MutationObserver.js
 * License: WTFPL V2, 2004 (wtfpl.net).
 * Though credit and staring the repo will make me feel pretty, you can modify and redistribute as you please.
 * Attempts to follow spec (http:// www.w3.org/TR/dom/#mutation-observers) as closely as possible for native javascript
 * See https://github.com/WebKit/webkit/blob/master/Source/WebCore/dom/MutationObserver.cpp for current webkit source c++ implementation
 */
window.MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||function(e){"use strict";function MutationObserver(e){this._watched=[],this._listener=e}function startMutationChecker(e){!function check(){var t=e.takeRecords();t.length&&e._listener(t,e),e._timeout=setTimeout(check,MutationObserver._period)}()}function MutationRecord(t){var r={type:null,target:null,addedNodes:[],removedNodes:[],previousSibling:null,nextSibling:null,attributeName:null,attributeNamespace:null,oldValue:null};for(var n in t)has(r,n)&&t[n]!==e&&(r[n]=t[n]);return r}function createMutationSearcher(e,t){var r=clone(e,t);return function(n){var i=n.length,a;t.attr&&r.attr&&findAttributeMutations(n,e,r.attr,t.afilter),(t.kids||t.descendents)&&(a=searchSubtree(n,e,r,t)),(a||n.length!==i)&&(r=clone(e,t))}}function findAttributeMutations(e,t,r,n){for(var i={},a=t.attributes,o,s,u=a.length;u--;)o=a[u],s=o.name,n&&!has(n,s)||(o.value!==r[s]&&e.push(MutationRecord({type:"attributes",target:t,attributeName:s,oldValue:r[s],attributeNamespace:o.namespaceURI})),i[s]=!0);for(s in r)i[s]||e.push(MutationRecord({target:t,type:"attributes",attributeName:s,oldValue:r[s]}))}function searchSubtree(t,r,n,i){function resolveConflicts(e,r,n,a,o){for(var s=e.length-1,u=-~((s-o)/2),c,l,d;d=e.pop();)c=n[d.i],l=a[d.j],i.kids&&u&&Math.abs(d.i-d.j)>=s&&(t.push(MutationRecord({type:"childList",target:r,addedNodes:[c],removedNodes:[c],nextSibling:c.nextSibling,previousSibling:c.previousSibling})),u--),i.attr&&l.attr&&findAttributeMutations(t,c,l.attr,i.afilter),i.charData&&3===c.nodeType&&c.nodeValue!==l.charData&&t.push(MutationRecord({type:"characterData",target:c})),i.descendents&&findMutations(c,l)}function findMutations(r,n){for(var o=r.childNodes,s=n.kids,u=o.length,c=s?s.length:0,l,d,f,h,p,m,v,g=0,y=0,S=0;y<u||S<c;)m=o[y],p=s[S],v=p&&p.node,m===v?(i.attr&&p.attr&&findAttributeMutations(t,m,p.attr,i.afilter),i.charData&&p.charData!==e&&m.nodeValue!==p.charData&&t.push(MutationRecord({type:"characterData",target:m})),d&&resolveConflicts(d,r,o,s,g),i.descendents&&(m.childNodes.length||p.kids&&p.kids.length)&&findMutations(m,p),y++,S++):(a=!0,l||(l={},d=[]),m&&(l[f=getElementId(m)]||(l[f]=!0,-1===(h=indexOfCustomNode(s,m,S))?i.kids&&(t.push(MutationRecord({type:"childList",target:r,addedNodes:[m],nextSibling:m.nextSibling,previousSibling:m.previousSibling})),g++):d.push({i:y,j:h})),y++),v&&v!==o[y]&&(l[f=getElementId(v)]||(l[f]=!0,-1===(h=indexOf(o,v,y))?i.kids&&(t.push(MutationRecord({type:"childList",target:n.node,removedNodes:[v],nextSibling:s[S+1],previousSibling:s[S-1]})),g--):d.push({i:h,j:S})),S++));d&&resolveConflicts(d,r,o,s,g)}var a;return findMutations(r,n),a}function clone(e,t){var r=!0;return function copy(e){var n={node:e};return!t.charData||3!==e.nodeType&&8!==e.nodeType?(t.attr&&r&&1===e.nodeType&&(n.attr=reduce(e.attributes,function(e,r){return t.afilter&&!t.afilter[r.name]||(e[r.name]=r.value),e},{})),r&&(t.kids||t.charData||t.attr&&t.descendents)&&(n.kids=map(e.childNodes,copy)),r=t.descendents):n.charData=e.nodeValue,n}(e)}function indexOfCustomNode(e,t,r){return indexOf(e,t,r,JSCompiler_renameProperty("node"))}function getElementId(e){try{return e.id||(e[r]=e[r]||t++)}catch(r){try{return e.nodeValue}catch(e){return t++}}}function map(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n,e);return r}function reduce(e,t,r){for(var n=0;n<e.length;n++)r=t(r,e[n],n,e);return r}function indexOf(e,t,r,n){for(;r<e.length;r++)if((n?e[r][n]:e[r])===t)return r;return-1}function has(t,r){return t[r]!==e}function JSCompiler_renameProperty(e){return e}MutationObserver._period=30,MutationObserver.prototype={observe:function(e,t){for(var r={attr:!!(t.attributes||t.attributeFilter||t.attributeOldValue),kids:!!t.childList,descendents:!!t.subtree,charData:!(!t.characterData&&!t.characterDataOldValue)},n=this._watched,i=0;i<n.length;i++)n[i].tar===e&&n.splice(i,1);t.attributeFilter&&(r.afilter=reduce(t.attributeFilter,function(e,t){return e[t]=!0,e},{})),n.push({tar:e,fn:createMutationSearcher(e,r)}),this._timeout||startMutationChecker(this)},takeRecords:function(){for(var e=[],t=this._watched,r=0;r<t.length;r++)t[r].fn(e);return e},disconnect:function(){this._watched=[],clearTimeout(this._timeout),this._timeout=null}};var t=1,r="mo_id";return MutationObserver}(void 0)}.call(exports,e,exports,module))&&(module.exports=t)},"VbQ+":function(module,exports){},Vkth:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function branches(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1],n=Object.assign({},e);switch(t.type){case"ON_BRANCHES_LOADING":return(0,i.default)({},n,{loadingAll:!0,loadedAll:!1});case"ON_BRANCHES_LOAD_SUCCESS":return(0,i.default)({},n,{loadingAll:!1,loadedAll:!0,branches:_(t.branches).indexBy("id")});case"SAVE_BRANCH":return(0,i.default)({},n,{branches:Object.assign({},n.branches,(0,r.default)({},t.branchId,Object.assign({},t.branch,{id:t.branchId})))});case"SAVE_DRAFTS_FOR_BRANCH":return(0,i.default)({},n,{drafts:Object.assign({},n.drafts,(0,r.default)({},t.branchId,t.drafts))});case"SAVE_CONFLICT_METADATA_FOR_BRANCH":case"VALIDATE_BRANCH":case"ON_BRANCH_CREATING":case"ON_BRANCH_UPDATE_SUCCESS":case"ON_BRANCH_UPDATE_FAILURE":case"ON_BRANCH_DELETING":case"ON_BRANCH_DELETE_SUCCESS":default:return n}}var t=e("bOdI"),r=_interopRequireDefault(t),n=e("Dd8w"),i=_interopRequireDefault(n),_=e("41m7"),a=e("AHPF"),o=a.storeNames,s=e("WShJ"),u={branches:{},drafts:{}};exports.store=s(branches,o.BRANCHES_STORE,["ON_BRANCHES_LOADING","ON_BRANCHES_LOAD_SUCCESS","ON_BRANCH_CREATING","ON_BRANCH_UPDATE_SUCCESS","ON_BRANCH_UPDATE_FAILURE","SAVE_BRANCH","ON_BRANCH_DELETING","ON_BRANCH_DELETE_SUCCESS","SAVE_CONFLICT_METADATA_FOR_BRANCH","SAVE_DRAFTS_FOR_BRANCH"],u),exports.reducer=branches},WCcZ:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("zwoO"),i=_interopRequireDefault(n),a=e("Pf15"),o=_interopRequireDefault(a),s,u,_=e("41m7"),c=e("L0um"),l=e("U7vG"),d=e("cKYN"),f=d.Tooltip,h=d.OverlayTrigger,p=e("GrPy"),m=e("V+N1"),v=e("IlIn"),g=e("XNlx"),y=e("wQjk"),S=e("Q75q"),b=e("6LJD"),C=e("tTc8"),E=C.H1,R=C.H2,w=C.H3,I=C.Bold,T=C.Italic,M=C.Underline,N=C.Divider,k=C.Link,x=C.Unlink,A=C.OrderedList,L=C.UnorderedList,D=C.Image,O=C.Table,q=C.Code,P=e("nkn+"),B=e("iy/N"),F=B.FormattedHTMLMessage,H=function getHTML(e,t){var r=v.getValue(t),n="";try{n=e.toHTML(r)}catch(e){n=""}return""!==n&&"<p></p>"!==n||(n="<p><br></p>"),n};e("J4Iq");var z=(u=s=function(e){function CMLEditor(t){(0,r.default)(this,CMLEditor);var n=(0,i.default)(this,e.call(this,t));return n.handleChange=function(){var e=n.scribe.getHTML();n.acceptChanges&&n.currentHTML!==e&&(n.currentHTML=e,n.props.onKeyPress(),n.changeHandler())},n.changeHandler=function(){var e=n.htmlConverter.toCML(n.currentHTML,!0),t=v.getDtdId(n.props.cml),r=v.create(e,t);n.props.onChange(r,n.currentHTML)},n.focus=function(){S(n.editorElemRef)},n.setContainerElemRef=function(e){n.containerElemRef=e},n.setEditorElemRef=function(e){n.editorElemRef=e,"function"==typeof n.props.elemRefHook&&n.props.elemRefHook(e)},n.setToolbarElemRef=function(e){n.toolbarElemRef=e},n.containerElemRef=null,n.editorElemRef=null,n.toolbarElemRef=null,n}return(0,o.default)(CMLEditor,e),CMLEditor.prototype.componentWillMount=function componentWillMount(){var e=this;this.converter=new p,this.converter.setupOptions({disableMath:!0}),this.htmlConverter=new m,this.converter.on("assetsAvailable",function(){var t=H(e.converter,e.props.cml);e.scribe.setContent(t)}),this.unsupportedBlocks=v.getUnsupportedBlocks(this.props.cml),this.isDisabled=0!==this.unsupportedBlocks.length,this.changeHandler=_(this.changeHandler).debounce(this.props.changeDelay)},CMLEditor.prototype.componentDidMount=function componentDidMount(){var e=this,t=this.props,r=t.blocks,n=t.placeholder,i=t.disabledPlugins,a=t.imageUploadOptions,o=t.assetAdminOptions,s=t.codeBlockOptions,u=t.onFocus,c=t.onBlur,l=H(this.converter,this.props.cml),d={el:this.editorElemRef,content:l,blocks:r,placeholder:n,disabledPlugins:i,imageUploadOptions:a,assetAdminOptions:o,codeBlockOptions:s,showToolbarByDefault:this.props.isFocused&&!this.isDisabled,onContentChange:this.handleChange,editorContainer:this.containerElemRef,toolbarContainer:this.toolbarElemRef,onFocus:u,onBlur:c};this.scribe=g.createInstance(d),this.scribe.setContent(l),this.props.isFocused&&!this.isDisabled&&(this.focus(),this.scribe.trigger("content-changed")),setTimeout(function(){e.acceptChanges=!0},0)},CMLEditor.prototype.componentDidUpdate=function componentDidUpdate(e,t){e.isFocused||!this.props.isFocused||this.isDisabled||this.focus()},CMLEditor.prototype.componentWillUnmount=function componentWillUnmount(){g.destroyInstance(this.scribe)},CMLEditor.prototype.render=function render(){var e=this.isDisabled,t=this.props,r=t.ariaLabel,n=t.ariaDescribedBy,i=t.cml,a=t.blocks,o=t.macros,s=t.toolbarStyle,u=t.macroStyle,d=t.style,p=o.filter(function(e){return i.definition.value.includes("%"+e+"%")}),m=l.createElement("div",{className:"rc-CMLEditor",ref:this.setContainerElemRef},l.createElement("div",{id:this.props.id,ref:this.setEditorElemRef,className:c("scribe-editor",{disabled:e}),style:d,role:"textbox","aria-label":r,"aria-describedby":n,"aria-multiline":!0,contentEditable:!0}),l.createElement(b,{elemRefHook:this.setToolbarElemRef,blocks:a,style:s}),p.length>0&&l.createElement("div",{style:u},P("Variable(s) confirmed:"),p.map(function(e){return l.createElement("div",{className:"pill-success"},e)})));if(e){var v=l.createElement(f,null,l.createElement(F,{message:P("\n              This field contains unsupported object(s) <strong>{blockNames}</strong> and cannot be edited here.\n            "),blockNames:_(this.unsupportedBlocks).map(function(e){return e.nodeName.toLowerCase()}).join(", ")}));return l.createElement(h,{placement:"bottom",overlay:v},m)}return m},CMLEditor}(l.Component),s.propTypes={id:l.PropTypes.string,ariaLabel:l.PropTypes.string,ariaDescribedBy:l.PropTypes.string,cml:y.isRequired,blocks:l.PropTypes.array,macros:l.PropTypes.array,isFocused:l.PropTypes.bool,placeholder:l.PropTypes.string,changeDelay:l.PropTypes.number,disabledPlugins:l.PropTypes.array,toolbarStyle:l.PropTypes.object,macroStyle:l.PropTypes.object,style:l.PropTypes.object,elemRefHook:l.PropTypes.func,assetAdminOptions:l.PropTypes.object,imageUploadOptions:l.PropTypes.object,codeBlockOptions:l.PropTypes.object,onKeyPress:l.PropTypes.func,onChange:l.PropTypes.func,onFocus:l.PropTypes.func,onBlur:l.PropTypes.func},s.defaultProps={blocks:[E,R,w,I,T,M,N,k,x,A,L,D,O,q],macros:[],placeholder:"",changeDelay:500,toolbarStyle:{},macroStyle:{},disabledPlugins:[],onKeyPress:function onKeyPress(){},onChange:function onChange(){},onFocus:function onFocus(){},onBlur:function onBlur(){}},u);module.exports=z},WShJ:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function createStoreFromReducer(e,t,n,a){var s,c,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return c=s=function(e){function WrappedReducerStore(t){(0,i.default)(this,WrappedReducerStore);var r=(0,o.default)(this,e.call(this,t));return r.state=a,r}return(0,u.default)(WrappedReducerStore,e),WrappedReducerStore.prototype.getState=function getState(){return this.state},WrappedReducerStore.prototype.dehydrate=function dehydrate(){return l.dehydrate?l.dehydrate.call(this):this.getState()},WrappedReducerStore.prototype.rehydrate=function rehydrate(e){l.rehydrate?l.rehydrate.call(this,e):this.state=e},WrappedReducerStore}(p),s.storeName=t,s.handlers=n.reduce(function(n,i){return n[i]=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.getState(),o=(0,r.default)({type:i},n),s=this.state=e(a,o);if(h){var u=new Date,c=" @ "+f(u.getHours(),2)+":"+f(u.getMinutes(),2)+":"+f(u.getSeconds(),2)+"."+f(u.getMilliseconds(),3),l=t+" action "+o.type+c,d=console.group;try{d.call(console,l)}catch(e){console.log(l)}console.log("%c prev state","color: #9E9E9E; font-weight: bold",a),console.log("%c action","color: #03A9F4; font-weight: bold",o),console.log("%c next state","color: #4CAF50; font-weight: bold",s);try{console.groupEnd()}catch(e){console.log("—— log end ——")}}this.emitChange()},n},{}),c}var t=e("Dd8w"),r=_interopRequireDefault(t),n=e("Zrlr"),i=_interopRequireDefault(n),a=e("zwoO"),o=_interopRequireDefault(a),s=e("Pf15"),u=_interopRequireDefault(s),c=e("4EWv"),l=e("D5OX"),d=function repeat(e,t){return new Array(t+1).join(e)},f=function pad(e,t){return d("0",t-e.toString().length)+e},h=l.get("enableReducerLogging"),p=function(e){function ReducerStore(){return(0,i.default)(this,ReducerStore),(0,o.default)(this,e.apply(this,arguments))}return(0,u.default)(ReducerStore,e),ReducerStore.prototype.getState=function getState(){return this.state},ReducerStore.prototype.dehydrate=function dehydrate(){return this.getState()},ReducerStore.prototype.rehydrate=function rehydrate(e){this.state=e},ReducerStore}(c);module.exports=createStoreFromReducer},Wce0:function(module,exports,e){"use strict";var t=e("tWSq"),r=e("kZMY"),n=e("5GGH"),i=e("TC53"),a=e("BW0Z"),o=e("cCS+"),s=e("oD7d"),u=e("gDLu"),c=e("TOa4"),l=e("1eB2"),d=e("XwDv");e("wWDD");var f={IntelligentUnlinkCommand:{id:0,run:t},SmartLists:{id:1,run:r},FormatterPlainTextConvertNewLinesToHtml:{id:2,run:n},SemanticElements:{id:3,run:i},Sanitizer:{id:4,run:a},Placeholder:{id:5,run:o},Toolbar:{id:6,run:s},ToolbarVisibility:{id:7,run:l},CMLFilterFormatter:{id:8,run:d},Autolink:{id:9,run:u},ShiftEnter:{id:10,run:c}};module.exports=f},Wksn:function(module,exports,e){var t=e("m9Zk"),r=t.default?t.default:{},n=e("L3lR"),i=n(r);i.getLocale=function(){return"en"},module.exports=i},XNlx:function(module,exports,e){"use strict";var $=e("mT8w"),_=e("41m7"),t=e("AYsO"),r=e("Wce0"),n={createInstance:function createInstance(e){var n=e.el,i=e.blocks,a=e.placeholder,o=e.editorContainer,s=e.disabledPlugins,u=e.showToolbarByDefault,c=e.toolbarContainer,l=e.assetAdminOptions,d=e.imageUploadOptions,f=e.codeBlockOptions,h=e.onContentChange,p=e.onFocus,m=e.onBlur,v=new t(n,{allowBlockElements:!0}),g={p:{},strike:{},sub:{},sup:{},audio:{controls:!0},source:{src:!0},pre:{},div:{}},y=_(s).indexBy("id");return v.on("content-changed",h),v.el.addEventListener("focus",p),v.el.addEventListener("blur",m),i.forEach(function(e){if(e.plugin){var t=null;switch(e.commandName){case"imageUpload":t=d;break;case"code":t={editorContainer:o,codeBlockOptions:f};break;case"asset":t=l}v.use(e.plugin(t))}e.tags&&e.tags.forEach(function(e){return g[e.name]=e.value||{}})}),_(r).each(function(e){if(!_(y).has(e.id))switch(e.id){case r.Placeholder.id:o&&v.use(e.run(a,o));break;case r.Toolbar.id:c&&v.use(e.run(c));break;case r.ToolbarVisibility.id:o&&c&&v.use(e.run(o,c,u));break;case r.Sanitizer.id:v.use(e.run({tags:g}));break;default:v.use(e.run())}}),v},destroyInstance:function destroyInstance(e){$(".scribe-marker").remove()}};module.exports=n},XwDv:function(module,exports,e){"use strict";var $=e("mT8w"),_=e("41m7"),t=e("GrPy"),r=e("V+N1"),n="text/html",i="text/plain",a=function pasteText(e,t){var r=t.getData("text/plain");r=$("<div/>").text(r).html(),r=r.replace(/[\n]+/g,"<p>"),e.insertHTML(r)},o=function getHTMLAfterInsert(e,t){var r=new e.api.Selection;r.placeMarkers();var n=e.getHTML();e.insertHTML(t);var i=e.getHTML();return e.setHTML(n),r.selectMarkers(),e.el.focus(),i},s=function pasteHTML(e,n){var i=n.getData("text/html"),s=o(e,i),u=new r,c=new t;try{var l=u.toCML(s,!0);s=c.toHTML(l),e.insertHTML(i)}catch(t){console.log("HTML formatting not supported, pasting as text.",t),a(e,n)}};module.exports=function(){return function(e){e.el.addEventListener("paste",function(t){if(t.preventDefault(),t.stopPropagation(),t.clipboardData){var r=t.clipboardData;_(r.types).contains("text/html")?s(e,r):a(e,r)}}),e.el.addEventListener("drop",function(e){e.preventDefault(),e.stopPropagation()})}}},YAJZ:function(module,exports){},aFEz:function(module,exports,e){var t=e("bixb");"string"==typeof t&&(t=[[module.i,t,""]]);var r,n={};n.transform=void 0;var i=e("MTIv")(t,n);t.locals&&(module.exports=t.locals)},bUq6:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function branchSelection(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],n=Object.assign({},e);switch(t.type){case"SELECT_BRANCH":return(0,r.default)({},n,{selection:t.branchId});case"LOAD_BRANCH":return(0,r.default)({},n,{branch:t.branch});default:return n}}var t=e("Dd8w"),r=_interopRequireDefault(t),n=e("AHPF"),i=n.storeNames,a=e("WShJ"),o={selection:null};exports.store=a(branchSelection,i.BRANCH_SELECTION_STORE,["SELECT_BRANCH","LOAD_BRANCH"],o),exports.reducer=branchSelection},bixb:function(module,exports){},buS2:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("zwoO"),i=_interopRequireDefault(n),a=e("Pf15"),o=_interopRequireDefault(a),s,u,_=e("41m7"),c=e("U7vG"),l=e("cKYN"),d=l.DropdownButton,f=l.MenuItem,h=e("Nrie"),p=e("Sg+N"),m=(u=s=function(e){function CourseRatingValueSelect(){return(0,r.default)(this,CourseRatingValueSelect),(0,i.default)(this,e.apply(this,arguments))}return(0,o.default)(CourseRatingValueSelect,e),CourseRatingValueSelect.prototype.handleSelect=function handleSelect(e){this.props.onChange(e)},CourseRatingValueSelect.prototype.render=function render(){var e=this;return c.createElement(d,{block:!0,title:this.props.ratingValue.label,className:"rc-CourseRatingValueSelect teach-dropdown-btn"},_(h).map(function(t,r){var n=t.value,i=t.label;return c.createElement(f,{onSelect:function onSelect(){return e.handleSelect(t)},key:r},c.createElement(p,{trackingName:"review_value",data:{ratingValue:t.value}},i))}))},CourseRatingValueSelect}(c.Component),s.propTypes={ratingValue:c.PropTypes.object.isRequired,onChange:c.PropTypes.func.isRequired},u);module.exports=m},c3vZ:function(module,exports,e){"use strict";var t=e("Vkth").store,r=e("yd4f"),n=e("bUq6").store,i=e("SNal"),a=e("uCDY"),o=e("6D53"),s=e("dQcU"),u=new s;u.registerStore(t),u.registerStore(r),u.registerStore(n),u.registerStore(a),u.registerStore(i),u.registerStore(o),module.exports=u},"cCS+":function(module,exports,e){var t;void 0!==(t=function(){return function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var module=t[r]={exports:{},id:r,loaded:!1};return e[r].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,e){e(1);var t="scribe-plugin-placeholder";module.exports=function(e,r){return function(n){function getStyle(e,t){var r;return e.currentStyle?r=e.currentStyle[t]:window.getComputedStyle&&(r=document.defaultView.getComputedStyle(e,null).getPropertyValue(t)),parseInt(r,10)}function isEditorEmpty(){var e=n.el.childNodes,t=e.length;if(0===t)return!0;if(1===t){var r=e[0];if("p"===r.nodeName.toLowerCase()&&""===r.textContent)return!0}return!1}function show(){if(0!==r.getElementsByClassName(t).length)return;var i=document.createElement("div"),a=2;i.className=t,i.innerText=e,i.style.top=getStyle(n.el,"padding-top")+getStyle(n.el,"border-top-width")+"px",i.style.left=getStyle(n.el,"padding-left")+2+"px",r.appendChild(i)}function hide(){Array.prototype.slice.call(r.getElementsByClassName(t)).forEach(function(e){r.removeChild(e)})}function update(){isEditorEmpty()?show():hide()}n.on("content-changed",update),n.el.addEventListener("blur",update),n.el.addEventListener("focus",update)}}},function(module,exports,e){}])}.call(exports,e,exports,module))&&(module.exports=t)},cUcW:function(module,exports,e){var t=e("yDda");"string"==typeof t&&(t=[[module.i,t,""]]);var r,n={};n.transform=void 0;var i=e("MTIv")(t,n);t.locals&&(module.exports=t.locals)},"d/2p":function(module,exports,e){"use strict";var t=e("oi+S"),r=e("5UQX"),n=e("HSPV");exports.changeBranchId=function(e,t){var r=t.courseId,n=t.branchId,i=t.ratingValue,a=t.learnerAudience,o=t.reviewCollection;e.dispatch("SET_FEEDBACK_BRANCH_ID",{branchId:n}),e.executeAction(exports.getCourseReviews,{courseId:r,branchId:n,reviewCollection:o,ratingValue:i,learnerAudience:a}),e.executeAction(exports.getCourseRatingStats,{courseId:r,branchId:n,learnerAudience:a})},exports.getCourseReviews=function(e,t){var r=t.courseId,i=t.branchId,a=t.reviewCollection,o=t.ratingValue,s=t.learnerAudience;return e.dispatch("GET_REVIEWS",{reviewCollection:a}),n.getReviews(r,i,s,a.page,o.value).then(function(t){var r=t.feedbacks,n=t.totalCount;e.dispatch("RECEIVE_REVIEWS",{reviewCollection:a,feedbacks:r,totalCount:n})}).done()},exports.filterCourseReviews=function(e,t){var r=t.courseId,n=t.branchId,i=t.ratingValue,a=t.learnerAudience,o=e.getStore("CourseRatingStore");e.dispatch("FILTER_REVIEWS",{ratingValue:i});var s=o.getReviewCollection();s.isEmpty()&&e.executeAction(exports.getCourseReviews,{courseId:r,branchId:n,reviewCollection:s,ratingValue:i,learnerAudience:a})},exports.getCourseRatingStats=function(e,r){var i=r.courseId,a=r.branchId,o=r.learnerAudience,s=r.totalCount,u=r.averageRating;return n.getRatingStats(i,a,o).then(function(r){var n={};void 0!==s&&void 0!==u&&(n={totalCount:s,averageRating:u});var i=new t(r,n);e.dispatch("RECEIVE_COURSE_RATING_STATS",{courseRatingStats:i})}).done()},exports.filterCourseRatings=function(e,t){var r=t.courseId,n=t.branchId,i=t.ratingValue,a=t.learnerAudience,o=e.getStore("CourseRatingStore");e.dispatch("FILTER_RATINGS",{learnerAudience:a});var s=o.getReviewCollection(),u=o.getCourseRatingStats();s.isEmpty()&&e.executeAction(exports.getCourseReviews,{courseId:r,branchId:n,reviewCollection:s,ratingValue:i,learnerAudience:a}),u||e.executeAction(exports.getCourseRatingStats,{courseId:r,branchId:n,learnerAudience:a})},exports.receiveMyCourseRating=function(e,t){var r=t.ratingFeedback;e.dispatch("RECEIVE_MY_RATING",{ratingFeedback:r})},exports.postMyCourseRating=function(e,t){var i=t.courseId,a=t.value,o=t.active,s=t.comment,u=new r(a,o,s);return e.executeAction(exports.receiveMyCourseRating,{ratingFeedback:u}),n.postFeedback(i,u)},exports.deleteFeedback=function(e,t){return n.deleteFeedback(t).then(function(){e.dispatch("DELETE_FEEDBACK",t)}).done()}},dOAO:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("zwoO"),i=_interopRequireDefault(n),a=e("Pf15"),o=_interopRequireDefault(a),s,u,c=e("U7vG"),l=e("iy/N"),d=l.FormattedNumber;e("91BX");var f=(u=s=function(e){function CountHeader(){return(0,r.default)(this,CountHeader),(0,i.default)(this,e.apply(this,arguments))}return(0,o.default)(CountHeader,e),CountHeader.prototype.render=function render(){return c.createElement("div",{className:"rc-CountHeader"},c.createElement("div",{className:"c-value"},c.createElement(d,{value:this.props.value})),this.props.message)},CountHeader}(c.Component),s.propTypes={value:c.PropTypes.number.isRequired,message:c.PropTypes.node.isRequired},u);module.exports=f},fNA9:function(module,exports,e){var t=e("OpWn");"string"==typeof t&&(t=[[module.i,t,""]]);var r,n={};n.transform=void 0;var i=e("MTIv")(t,n);t.locals&&(module.exports=t.locals)},fxgV:function(module,exports,e){"use strict";module.exports={Like:"LIKE_OR_DISLIKE",Flag:"FLAG",Rating:"STAR"}},gDLu:function(module,exports,e){"use strict";var t=/https?:\/\/[^ \r\n\t]+/gim,r=function getLinkedNodesFromText(e,r){r=r||[],t.exec("");var n=t.exec(e);if(n){var i=n[0],a=e.split(i);a[0]&&r.push(document.createTextNode(a[0]));var o=document.createElement("a");return o.setAttribute("href",i),o.innerHTML=i,r.push(o),getLinkedNodesFromText(a[1],r)}return e&&r.push(document.createTextNode(e)),r};module.exports=function(){return function(e){function handleKeydown(n){var i=n.keyCode;if(9===i||13===i||32===i){var a=new e.api.Selection,o=a.range;if(!o)return;var s=o.endContainer,u=s.parentNode;if(3===s.nodeType){var c=s.textContent;t.test(c)&&e.transactionManager.run(function(){r(c).forEach(function(e){u.insertBefore(e,s)}),o.setEndAfter(s),u.removeChild(s),o.collapse(),a.selection.removeAllRanges(),a.selection.addRange(o)})}}}e.el.addEventListener("keydown",handleKeydown)}}},"gP/4":function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("zwoO"),i=_interopRequireDefault(n),a=e("Pf15"),o=_interopRequireDefault(a),s,u,_=e("41m7"),c=e("gzuN"),l=e("U7vG"),d=e("iy/N"),f=d.FormattedMessage,h=d.FormattedHTMLMessage,p=e("nmvT"),m=e("WCcZ"),v=e("tTc8"),g=e("+mVC"),y=e("uMXu"),S=y.EntryTypes,b=y.States,C=e("FXCk"),E=e("k3Ab");e("Jy2F");var R=[v.H1,v.H2,v.H3,v.Divider,v.Bold,v.Italic,v.Underline,v.Divider,v.Link,v.Unlink],w={definition:{dtdId:"email/1",value:"<co-content></co-content>"}},I=(u=s=function(e){function ReplyMessage(){var t,n,a;(0,r.default)(this,ReplyMessage);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return t=n=(0,i.default)(this,e.call.apply(e,[this].concat(s))),n.state={isMessageBoxOpen:!1,replyState:b.Idle,allowReply:!0,sentTime:null,message:w},n.handleClose=function(){n.setState({isMessageBoxOpen:!1})},n.handleSend=function(){var e=n.props,t=e.entryType,r=e.entryId,i=n.state.allowReply;n.setState({replyState:b.InProgress}),C.sendMessage(t,r,!i,n.state.message).then(function(){n.setState({replyState:b.Success,message:w,sentTime:Date.now()}),n.handleClose()})},n.handleButtonClick=function(){n.setState({isMessageBoxOpen:!0}),C.getSentMessage(n.props.entryId).then(function(e){if(!_(e.elements).isEmpty()){var t=e.elements[0].metadata;n.setState({replyState:b.Success,sentTime:t.updatedAt})}})},n.handleMessageChange=function(e){n.setState({message:e})},n.handleAllowReply=function(e){n.setState({allowReply:e})},a=t,(0,i.default)(n,a)}return(0,o.default)(ReplyMessage,e),ReplyMessage.prototype.render=function render(){var e=this.props,t=e.placeholder,r=e.buttonText,n=this.state,i=n.isMessageBoxOpen,a=n.allowReply,o=n.replyState,s=n.sentTime,u=n.message,d=o===b.InProgress;return l.createElement("div",{className:"rc-ReplyMessage"},i&&l.createElement("div",null,o===b.Success&&l.createElement("div",{className:"sent-reply-timestamp"},l.createElement(f,{message:E("Reply sent {time}"),time:c(s).format("lll")})),l.createElement(m,{cml:u,isFocused:!0,blocks:R,placeholder:t,onChange:this.handleMessageChange}),l.createElement("footer",{className:"send-message-footer"},l.createElement("span",{className:"send-options"},l.createElement("label",null,l.createElement(g,{onChange:this.handleAllowReply,checked:a}),l.createElement(h,{message:E("Allow learner to reply to you at <strong>{email}</strong>"),email:p.get("email_address")}))),l.createElement("button",{className:"link-styled-button cancel-button",onClick:this.handleClose},E("Cancel")),l.createElement("button",{disabled:d,className:"teach-btn teach-btn-primary",onClick:this.handleSend},E(d?"Sending...":"Send")))),!i&&l.createElement("button",{className:"link-styled-button",onClick:this.handleButtonClick},o===b.Success&&l.createElement(f,{message:E("Reply sent {time}"),time:c(s).format("lll")}),o!==b.Success&&r))},ReplyMessage}(l.Component),s.propTypes={entryId:l.PropTypes.any.isRequired,entryType:l.PropTypes.oneOf(_(S).toArray()).isRequired,placeholder:l.PropTypes.string,buttonText:l.PropTypes.string,title:l.PropTypes.string},s.defaultProps={placeholder:E("Write a message"),buttonText:E("Reply")},u);module.exports=I},gxx0:function(module,exports){},i4Of:function(module,exports,e){var t=e("uUiU");"string"==typeof t&&(t=[[module.i,t,""]]);var r,n={};n.transform=void 0;var i=e("MTIv")(t,n);t.locals&&(module.exports=t.locals)},k3Ab:function(module,exports,e){var t=e("o2vs"),r=t.default?t.default:{},n=e("L3lR"),i=n(r);i.getLocale=function(){return"en"},module.exports=i},kV9D:function(module,exports,e){"use strict";var t=e("hHYt"),r=new t("/api/courseFeedbackCommentCounts.v1",{type:"rest"});module.exports=r},kZMY:function(module,exports,e){var t;void 0!==(t=function(){return function(){function isUnorderedListChar(e){return"*"===e||"-"===e||"•"===e}var e={32:"Space",42:"*",45:"-",46:".",49:"1",8226:"•"};return function(t){function removeSelectedTextNode(){var e=new t.api.Selection,r=e.selection.anchorNode,n;if(r.nodeType===Node.TEXT_NODE?n=r:r.firstChild.nodeType===Node.TEXT_NODE&&(n=r.firstChild),!n)throw new Error("Cannot empty non-text node!");var i=n.parentNode;n.previousSibling&&i.removeChild(n.previousSibling),i.removeChild(n)}function input(a){var o;r=n,n=i,i=e[a.charCode];var s=new t.api.Selection,u=s.range.commonAncestorContainer,c=findBlockContainer(u);if(c&&"P"===c.tagName){var l=isUnorderedListChar(u.textContent[0]),d=1===s.range.endOffset;isUnorderedListChar(n)&&"Space"===i&&l&&d&&(o="insertUnorderedList");var f="1."===[u.previousSibling&&u.previousSibling.textContent,u.textContent].join("").slice(0,2);"1"===r&&"."===n&&"Space"===i&&f&&(o="insertOrderedList")}o&&(a.preventDefault(),t.transactionManager.run(function(){t.getCommand(o).execute(),removeSelectedTextNode()}))}function findBlockContainer(e){for(;e&&!t.element.isBlockElement(e);)e=e.parentNode;return e}var r,n,i;t.el.addEventListener("keypress",input)}}}.call(exports,e,exports,module))&&(module.exports=t)},lZHV:function(module,exports){},ljW4:function(module,exports,e){function universalModule(){function createClass(t,r,n,i){var a;if(i){var o=i.prototype;a=e.create(o)}else a=t.prototype;return e.keys(r).forEach(function(e){a[e]=r[e]}),e.keys(n).forEach(function(e){t[e]=n[e]}),a.constructor=t,t.prototype=a,t}function superCall(t,r,n,i){return e.getPrototypeOf(r)[n].apply(t,i)}function defaultSuperCall(e,t,r){superCall(e,t,"constructor",r)}function is(e,t){if(e===t)return 0!==e||0!==t||1/e==1/t;if(e!==e)return t!==t;if(e&&"function"==typeof e.equals)return e.equals(t);return!1}function invariant(e,t){if(!e)throw new Error(t)}function MakeRef(e){return e.value=!1,e}function SetRef(e){e&&(e.value=!0)}function OwnerID(){}function arrCopy(e,t){t=t||0;for(var r=Math.max(0,e.length-t),n=new Array(r),i=0;i<r;i++)n[i]=e[i+t];return n}function assertNotInfinite(e){invariant(e!==1/0,"Cannot perform this action with an infinite size.")}function ensureSize(e){return void 0===e.size&&(e.size=e.__iterate(returnTrue)),e.size}function wrapIndex(e,t){return t>=0?+t:ensureSize(e)+ +t}function returnTrue(){return!0}function wholeSlice(e,t,r){return(0===e||void 0!==r&&e<=-r)&&(void 0===t||void 0!==r&&t>=r)}function resolveBegin(e,t){return resolveIndex(e,t,0)}function resolveEnd(e,t){return resolveIndex(e,t,t)}function resolveIndex(e,t,r){return void 0===e?r:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}function hash(e){if(!e)return 0;if(!0===e)return 1;var t=typeof e;if("number"===t){if((0|e)===e)return e&d;e=""+e,t="string"}if("string"===t)return e.length>p?cachedHashString(e):hashString(e);if(e.hashCode)return hash("function"==typeof e.hashCode?e.hashCode():e.hashCode);return hashJSObj(e)}function cachedHashString(e){var t=g[e];return void 0===t&&(t=hashString(e),v===m&&(v=0,g={}),v++,g[e]=t),t}function hashString(e){for(var t=0,r=0;r<e.length;r++)t=31*t+e.charCodeAt(r)&d;return t}function hashJSObj(e){var t=l&&l.get(e);if(t)return t;if(t=e[h])return t;if(!c){if(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[h])return t;if(t=getIENodeHash(e))return t}if(Object.isExtensible&&!Object.isExtensible(e))throw new Error("Non-extensible objects are not allowed as keys.");if(t=++f&d,l)l.set(e,t);else if(c)Object.defineProperty(e,h,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[h]=t;else{if(!e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[h]=t}return t}function getIENodeHash(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}function iteratorValue(e,t,r,n){var i=0===e?t:1===e?r:[t,r];return n?n.value=i:n={value:i,done:!1},n}function iteratorDone(){return{value:void 0,done:!0}}function hasIterator(e){return!!_iteratorFn(e)}function isIterator(e){return e&&"function"==typeof e.next}function getIterator(e){var t=_iteratorFn(e);return t&&t.call(e)}function _iteratorFn(e){var t=e&&(E&&e[E]||e[C]);if("function"==typeof t)return t}function isIterable(e){return!(!e||!e[N])}function isKeyed(e){return!(!e||!e[k])}function isIndexed(e){return!(!e||!e[x])}function isAssociative(e){return isKeyed(e)||isIndexed(e)}function isOrdered(e){return!(!e||!e[A])}function keyMapper(e,t){return t}function entryMapper(e,t){return[t,e]}function not(e){return function(){return!e.apply(this,arguments)}}function neg(e){return function(){return-e.apply(this,arguments)}}function quoteString(e){return"string"==typeof e?JSON.stringify(e):e}function defaultNegComparator(e,t){return e>t?-1:e<t?1:0}function deepEqual(e,t){var r=!isAssociative(e)&&!isAssociative(t);if(isOrdered(e)){if(!isOrdered(t))return!1;var n=e.entries();return t.every(function(e,t){var i=n.next().value;return i&&is(i[1],e)&&(r||is(i[0],t))})&&n.next().done}var i=!1;if(void 0===e.size)if(void 0===t.size)e.cacheResult();else{i=!0;var _=e;e=t,t=_}var a=!0,s=t.__iterate(function(t,n){if(r?!e.has(t):i?!is(t,e.get(n,o)):!is(e.get(n,o),t))return a=!1,!1});return a&&e.size===s}function mixin(e,t){var r=e.prototype,n=function(e){r[e]=t[e]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function isSeq(e){return!(!e||!e[j])}function emptySequence(){return Z||(Z=new G([]))}function keyedSeqFromValue(e){var t=Array.isArray(e)?new G(e).fromEntrySeq():isIterator(e)?new Y(e).fromEntrySeq():hasIterator(e)?new J(e).fromEntrySeq():"object"==typeof e?new Q(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function indexedSeqFromValue(e){var t=maybeIndexedSeqFromValue(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function seqFromValue(e){var t=maybeIndexedSeqFromValue(e)||"object"==typeof e&&new Q(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}function maybeIndexedSeqFromValue(e){return isArrayLike(e)?new G(e):isIterator(e)?new Y(e):hasIterator(e)?new J(e):void 0}function isArrayLike(e){return e&&"number"==typeof e.length}function seqIterate(e,t,r,n){assertNotInfinite(e.size);var i=e._cache;if(i){for(var a=i.length-1,o=0;o<=a;o++){var s=i[r?a-o:o];if(!1===t(s[1],n?s[0]:o,e))return o+1}return o}return e.__iterateUncached(t,r)}function seqIterator(e,t,r,n){var i=e._cache;if(i){var a=i.length-1,o=0;return new w(function(){var e=i[r?a-o:o];return o++>a?iteratorDone():iteratorValue(t,n?e[0]:o-1,e[1])})}return e.__iteratorUncached(t,r)}function fromJS(e,t){return t?_fromJSWith(t,e,"",{"":e}):_fromJSDefault(e)}function _fromJSWith(e,t,r,n){if(Array.isArray(t))return e.call(n,r,V(t).map(function(r,n){return _fromJSWith(e,r,n,t)}));if(isPlainObj(t))return e.call(n,r,H(t).map(function(r,n){return _fromJSWith(e,r,n,t)}));return t}function _fromJSDefault(e){if(Array.isArray(e))return V(e).map(_fromJSDefault).toList();if(isPlainObj(e))return H(e).map(_fromJSDefault).toMap();return e}function isPlainObj(e){return e&&e.constructor===Object}function isMap(e){return!(!e||!e[se])}function mapIteratorValue(e,t){return iteratorValue(e,t[0],t[1])}function mapIteratorFrame(e,t){return{node:e,index:0,__prev:t}}function makeMap(e,t,r,n){var i=Object.create(ue);return i.size=e,i._root=t,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function emptyMap(){return Se||(Se=makeMap(0))}function updateMap(e,t,r){var n,i;if(e._root){var a=MakeRef(s),c=MakeRef(u);if(n=updateNode(e._root,e.__ownerID,0,void 0,t,r,a,c),!c.value)return e;i=e.size+(a.value?r===o?-1:1:0)}else{if(r===o)return e;i=1,n=new ce(e.__ownerID,[[t,r]])}if(e.__ownerID)return e.size=i,e._root=n,e.__hash=void 0,e.__altered=!0,e;return n?makeMap(i,n):emptyMap()}function updateNode(e,t,r,n,i,a,s,u){if(!e){if(a===o)return e;return SetRef(u),SetRef(s),new ge(t,n,[i,a])}return e.update(t,r,n,i,a,s,u)}function isLeafNode(e){return e.constructor===ge||e.constructor===me}function mergeIntoNode(e,t,r,i,o){if(e.keyHash===i)return new me(t,i,[e.entry,o]);var s=(0===r?e.keyHash:e.keyHash>>>r)&a,u=(0===r?i:i>>>r)&a,c,l=s===u?[mergeIntoNode(e,t,r+n,i,o)]:(c=new ge(t,i,o),s<u?[e,c]:[c,e]);return new de(t,1<<s|1<<u,l)}function createNodes(e,t,r,n){e||(e=new OwnerID);for(var i=new ge(e,hash(r),[r,n]),a=0;a<t.length;a++){var o=t[a];i=i.update(e,0,void 0,o[0],o[1])}return i}function packNodes(e,t,r,n){for(var i=0,a=0,o=new Array(r),s=0,u=1,c=t.length;s<c;s++,u<<=1){var l=t[s];void 0!==l&&s!==n&&(i|=u,o[a++]=l)}return new de(e,i,o)}function expandNodes(e,t,r,n,a){for(var o=0,s=new Array(i),u=0;0!==r;u++,r>>>=1)s[u]=1&r?t[o++]:void 0;return s[n]=a,new he(e,o+1,s)}function mergeIntoMapWith(e,t,r){for(var n=[],i=0;i<r.length;i++){var a=r[i],o=D(a);isIterable(a)||(o=o.map(function(e){return fromJS(e)})),n.push(o)}return mergeIntoCollectionWith(e,t,n)}function deepMerger(e){return function(t,r){return t&&t.mergeDeepWith&&isIterable(r)?t.mergeDeepWith(e,r):e?e(t,r):r}}function mergeIntoCollectionWith(e,t,r){if(0===r.length)return e;return e.withMutations(function(e){for(var n=t?function(r,n){e.update(n,o,function(e){return e===o?r:t(e,r)})}:function(t,r){e.set(r,t)},i=0;i<r.length;i++)r[i].forEach(n)})}function updateInDeepMap(e,t,r,n,i){invariant(!e||e.set,"updateIn with invalid keyPath");var a=t[i],s=e?e.get(a,o):o,u=s===o?void 0:s,c=i===t.length-1?n(s===o?r:s):updateInDeepMap(u,t,r,n,i+1);return c===u?e:c===o?e&&e.remove(a):(e||emptyMap()).set(a,c)}function popCount(e){return e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function setIn(e,t,r,n){var i=n?e:arrCopy(e);return i[t]=r,i}function spliceIn(e,t,r,n){var i=e.length+1;if(n&&t+1===i)return e[t]=r,e;for(var a=new Array(i),o=0,s=0;s<i;s++)s===t?(a[s]=r,o=-1):a[s]=e[s+o];return a}function spliceOut(e,t,r){var n=e.length-1;if(r&&t===n)return e.pop(),e;for(var i=new Array(n),a=0,o=0;o<n;o++)o===t&&(a=1),i[o]=e[o+a];return i}function flipFactory(e){var t=makeSequence(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.contains(t)},t.contains=function(t){return e.has(t)},t.cacheResult=cacheResultThrough,t.__iterateUncached=function(t,r){var n=this;return e.__iterate(function(e,r){return!1!==t(r,e,n)},r)},t.__iteratorUncached=function(t,r){if(t===b){var n=e.__iterator(t,r);return new w(function(){var e=n.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===S?y:S,r)},t}function mapFactory(e,t,r){var n=makeSequence(e);return n.size=e.size,n.has=function(t){return e.has(t)},n.get=function(n,i){var a=e.get(n,o);return a===o?i:t.call(r,a,n,e)},n.__iterateUncached=function(n,i){var a=this;return e.__iterate(function(e,i,o){return!1!==n(t.call(r,e,i,o),i,a)},i)},n.__iteratorUncached=function(n,i){var a=e.__iterator(b,i);return new w(function(){var i=a.next();if(i.done)return i;var o=i.value,s=o[0];return iteratorValue(n,s,t.call(r,o[1],s,e),i)})},n}function reverseFactory(e,t){var r=makeSequence(e);return r._iter=e,r.size=e.size,r.reverse=function(){return e},e.flip&&(r.flip=function(){var t=flipFactory(e);return t.reverse=function(){return e.flip()},t}),r.get=function(r,n){return e.get(t?r:-1-r,n)},r.has=function(r){return e.has(t?r:-1-r)},r.contains=function(t){return e.contains(t)},r.cacheResult=cacheResultThrough,r.__iterate=function(t,r){var n=this;return e.__iterate(function(e,r){return t(e,r,n)},!r)},r.__iterator=function(t,r){return e.__iterator(t,!r)},r}function filterFactory(e,t,r,n){var i=makeSequence(e);return n&&(i.has=function(n){var i=e.get(n,o);return i!==o&&!!t.call(r,i,n,e)},i.get=function(n,i){var a=e.get(n,o);return a!==o&&t.call(r,a,n,e)?a:i}),i.__iterateUncached=function(i,a){var o=this,s=0;return e.__iterate(function(e,a,u){if(t.call(r,e,a,u))return s++,i(e,n?a:s-1,o)},a),s},i.__iteratorUncached=function(i,a){var o=e.__iterator(b,a),s=0;return new w(function(){for(;;){var a=o.next();if(a.done)return a;var u=a.value,c=u[0],l=u[1];if(t.call(r,l,c,e))return iteratorValue(i,n?c:s++,l,a)}})},i}function countByFactory(e,t,r){var n=oe().asMutable();return e.__iterate(function(i,a){n.update(t.call(r,i,a,e),0,function(e){return e+1})}),n.asImmutable()}function groupByFactory(e,t,r){var n=isKeyed(e),i=oe().asMutable();e.__iterate(function(a,o){i.update(t.call(r,a,o,e),[],function(e){return e.push(n?[o,a]:a),e})});var a=iterableClass(e);return i.map(function(t){return reify(e,a(t))})}function takeFactory(e,t){if(t>e.size)return e;t<0&&(t=0);var r=makeSequence(e);return r.size=e.size&&Math.min(e.size,t),r.__iterateUncached=function(r,n){var i=this;if(0===t)return 0;if(n)return this.cacheResult().__iterate(r,n);var a=0;return e.__iterate(function(e,n){return++a&&!1!==r(e,n,i)&&a<t}),a},r.__iteratorUncached=function(r,n){if(n)return this.cacheResult().__iterator(r,n);var i=t&&e.__iterator(r,n),a=0;return new w(function(){if(a++>t)return iteratorDone();return i.next()})},r}function takeWhileFactory(e,t,r){var n=makeSequence(e);return n.__iterateUncached=function(n,i){var a=this;if(i)return this.cacheResult().__iterate(n,i);var o=0;return e.__iterate(function(e,i,s){return t.call(r,e,i,s)&&++o&&n(e,i,a)}),o},n.__iteratorUncached=function(n,i){var a=this;if(i)return this.cacheResult().__iterator(n,i);var o=e.__iterator(b,i),s=!0;return new w(function(){if(!s)return iteratorDone();var e=o.next();if(e.done)return e;var i=e.value,u=i[0],c=i[1];if(!t.call(r,c,u,a))return s=!1,iteratorDone();return n===b?e:iteratorValue(n,u,c,e)})},n}function skipFactory(e,t,r){if(t<=0)return e;var n=makeSequence(e);return n.size=e.size&&Math.max(0,e.size-t),n.__iterateUncached=function(n,i){var a=this;if(i)return this.cacheResult().__iterate(n,i);var o=0,s=!0,u=0;return e.__iterate(function(e,i){if(!s||!(s=o++<t))return u++,n(e,r?i:u-1,a)}),u},n.__iteratorUncached=function(n,i){if(i)return this.cacheResult().__iterator(n,i);var a=t&&e.__iterator(n,i),o=0,s=0;return new w(function(){for(;o<t;)o++,a.next();var e=a.next();return r||n===S?e:n===y?iteratorValue(n,s++,void 0,e):iteratorValue(n,s++,e.value[1],e)})},n}function skipWhileFactory(e,t,r,n){var i=makeSequence(e);return i.__iterateUncached=function(i,a){var o=this;if(a)return this.cacheResult().__iterate(i,a);var s=!0,u=0;return e.__iterate(function(e,a,c){if(!s||!(s=t.call(r,e,a,c)))return u++,i(e,n?a:u-1,o)}),u},i.__iteratorUncached=function(i,a){var o=this;if(a)return this.cacheResult().__iterator(i,a);var s=e.__iterator(b,a),u=!0,c=0;return new w(function(){var e,a,l;do{if(e=s.next(),e.done)return n||i===S?e:i===y?iteratorValue(i,c++,void 0,e):iteratorValue(i,c++,e.value[1],e);var d=e.value;a=d[0],l=d[1],u&&(u=t.call(r,l,a,o))}while(u);return i===b?e:iteratorValue(i,a,l,e)})},i}function concatFactory(e,t){var r=isKeyed(e),n=new G([e].concat(t)).map(function(e){return isIterable(e)?r&&(e=D(e)):e=r?keyedSeqFromValue(e):indexedSeqFromValue(Array.isArray(e)?e:[e]),e});r?n=n.toKeyedSeq():isIndexed(e)||(n=n.toSetSeq());var i=n.flatten(!0);return i.size=n.reduce(function(e,t){if(void 0!==e){var r=t.size;if(void 0!==r)return e+r}},0),i}function flattenFactory(e,t,r){var n=makeSequence(e);return n.__iterateUncached=function(n,i){function flatDeep(e,s){var u=this;e.__iterate(function(e,i){return(!t||s<t)&&isIterable(e)?flatDeep(e,s+1):!1===n(e,r?i:a++,u)&&(o=!0),!o},i)}var a=0,o=!1;return flatDeep(e,0),a},n.__iteratorUncached=function(n,i){var a=e.__iterator(n,i),o=[],s=0;return new w(function(){for(;a;){var e=a.next();if(!1!==e.done){a=o.pop();continue}var u=e.value;if(n===b&&(u=u[1]),t&&!(o.length<t)||!isIterable(u))return r?e:iteratorValue(n,s++,u,e);o.push(a),a=u.__iterator(n,i)}return iteratorDone()})},n}function flatMapFactory(e,t,r){var n=iterableClass(e);return e.toSeq().map(function(i,a){return n(t.call(r,i,a,e))}).flatten(!0)}function interposeFactory(e,t){var r=makeSequence(e);return r.size=e.size&&2*e.size-1,r.__iterateUncached=function(r,n){var i=this,a=0;return e.__iterate(function(e,n){return(!a||!1!==r(t,a++,i))&&!1!==r(e,a++,i)},n),a},r.__iteratorUncached=function(r,n){var i=e.__iterator(S,n),a=0,o;return new w(function(){if((!o||a%2)&&(o=i.next(),o.done))return o;return a%2?iteratorValue(r,a++,t):iteratorValue(r,a++,o.value,o)})},r}function sortFactory(e,t,r){t||(t=defaultComparator);var n=isKeyed(e),i=0,a=e.toSeq().map(function(t,n){return[n,t,i++,r?r(t,n,e):t]}).toArray();return a.sort(function(e,r){return t(e[3],r[3])||e[2]-r[2]}).forEach(n?function(e,t){a[t].length=2}:function(e,t){a[t]=e[1]}),n?H(a):isIndexed(e)?V(a):W(a)}function maxFactory(e,t,r){if(t||(t=defaultComparator),r){var n=e.toSeq().map(function(t,n){return[t,r(t,n,e)]}).reduce(function(e,r){return t(r[1],e[1])>0?r:e});return n&&n[0]}return e.reduce(function(e,r){return t(r,e)>0?r:e})}function reify(e,t){return isSeq(e)?t:e.constructor(t)}function validateEntry(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function resolveSize(e){return assertNotInfinite(e.size),ensureSize(e)}function iterableClass(e){return isKeyed(e)?D:isIndexed(e)?q:P}function makeSequence(e){return Object.create((isKeyed(e)?H:isIndexed(e)?V:W).prototype)}function cacheResultThrough(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):B.prototype.cacheResult.call(this)}function defaultComparator(e,t){return e>t?1:e<t?-1:0}function isList(e){return!(!e||!e[Ne])}function iterateVNode(e,t,r,o,s,u){var c,l=e&&e.array;if(0===t){var d=r<0?-r:0,f=o-r;for(f>i&&(f=i),c=d;c<f;c++)if(!1===s(l&&l[u?d+f-1-c:c]))return!1}else{var h=1<<t,p=t-n;for(c=0;c<=a;c++){var m=u?a-c:c,v=r+(m<<t);if(v<o&&v+h>0){if(!iterateVNode(l&&l[m],p,v,o,s,u))return!1}}}return!0}function listIteratorFrame(e,t,r,n,i){return{array:e,level:t,offset:r,max:n,rawMax:n-r>>t,index:0,__prev:i}}function makeList(e,t,r,n,i,a,o){var s=Object.create(ke);return s.size=t-e,s._origin=e,s._capacity=t,s._level=r,s._root=n,s._tail=i,s.__ownerID=a,s.__hash=o,s.__altered=!1,s}function emptyList(){return De||(De=makeList(0,0,n))}function updateList(e,t,r){if((t=wrapIndex(e,t))>=e.size||t<0)return e.withMutations(function(e){t<0?setListBounds(e,t).set(0,r):setListBounds(e,0,t+1).set(t,r)});t+=e._origin;var n=e._tail,i=e._root,a=MakeRef(u);if(t>=getTailOffset(e._capacity)?n=updateVNode(n,e.__ownerID,0,t,r,a):i=updateVNode(i,e.__ownerID,e._level,t,r,a),!a.value)return e;if(e.__ownerID)return e._root=i,e._tail=n,e.__hash=void 0,e.__altered=!0,e;return makeList(e._origin,e._capacity,e._level,i,n)}function updateVNode(e,t,r,i,o,s){var u=i>>>r&a,c=e&&u<e.array.length;if(!c&&void 0===o)return e;var l;if(r>0){var d=e&&e.array[u],f=updateVNode(d,t,r-n,i,o,s);if(f===d)return e;return l=editableVNode(e,t),l.array[u]=f,l}if(c&&e.array[u]===o)return e;return SetRef(s),l=editableVNode(e,t),void 0===o&&u===l.array.length-1?l.array.pop():l.array[u]=o,l}function editableVNode(e,t){if(t&&e&&t===e.ownerID)return e;return new xe(e?e.array.slice():[],t)}function listNodeFor(e,t){if(t>=getTailOffset(e._capacity))return e._tail;if(t<1<<e._level+n){for(var r=e._root,i=e._level;r&&i>0;)r=r.array[t>>>i&a],i-=n;return r}}function setListBounds(e,t,r){var i=e.__ownerID||new OwnerID,o=e._origin,s=e._capacity,u=o+t,c=void 0===r?s:r<0?s+r:o+r;if(u===o&&c===s)return e;if(u>=c)return e.clear();for(var l=e._level,d=e._root,f=0;u+f<0;)d=new xe(d&&d.array.length?[void 0,d]:[],i),l+=n,f+=1<<l;f&&(u+=f,o+=f,c+=f,s+=f);for(var h=getTailOffset(s),p=getTailOffset(c);p>=1<<l+n;)d=new xe(d&&d.array.length?[d]:[],i),l+=n;var m=e._tail,v=p<h?listNodeFor(e,c-1):p>h?new xe([],i):m;if(m&&p>h&&u<s&&m.array.length){d=editableVNode(d,i);for(var g=d,y=l;y>n;y-=n){var S=h>>>y&a;g=g.array[S]=editableVNode(g.array[S],i)}g.array[h>>>n&a]=m}if(c<s&&(v=v&&v.removeAfter(i,0,c)),u>=p)u-=p,c-=p,l=n,d=null,v=v&&v.removeBefore(i,0,u);else if(u>o||p<h){for(f=0;d;){var b=u>>>l&a;if(b!==p>>>l&a)break;b&&(f+=(1<<l)*b),l-=n,d=d.array[b]}d&&u>o&&(d=d.removeBefore(i,l,u-f)),d&&p<h&&(d=d.removeAfter(i,l,p-f)),f&&(u-=f,c-=f)}if(e.__ownerID)return e.size=c-u,e._origin=u,e._capacity=c,e._level=l,e._root=d,e._tail=v,e.__hash=void 0,e.__altered=!0,e;return makeList(u,c,l,d,v)}function mergeIntoListWith(e,t,r){for(var n=[],i=0,a=0;a<r.length;a++){var o=r[a],s=q(o);s.size>i&&(i=s.size),isIterable(o)||(s=s.map(function(e){return fromJS(e)})),n.push(s)}return i>e.size&&(e=e.setSize(i)),mergeIntoCollectionWith(e,t,n)}function getTailOffset(e){return e<i?0:e-1>>>n<<n}function isOrderedMap(e){return isMap(e)&&isOrdered(e)}function makeOrderedMap(e,t,r,n){var i=Object.create(Oe.prototype);return i.size=e?e.size:0,i._map=e,i._list=t,i.__ownerID=r,i.__hash=n,i}function emptyOrderedMap(){return qe||(qe=makeOrderedMap(emptyMap(),emptyList()))}function updateOrderedMap(e,t,r){var n=e._map,a=e._list,s=n.get(t),u=void 0!==s,c,l;if(r===o){if(!u)return e;a.size>=i&&a.size>=2*n.size?(l=a.filter(function(e,t){return void 0!==e&&s!==t}),c=l.toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(c.__ownerID=l.__ownerID=e.__ownerID)):(c=n.remove(t),l=s===a.size-1?a.pop():a.set(s,void 0))}else if(u){if(r===a.get(s)[1])return e;c=n,l=a.set(s,[t,r])}else c=n.set(t,a.size),l=a.set(a.size,[t,r]);if(e.__ownerID)return e.size=c.size,e._map=c,e._list=l,e.__hash=void 0,e;return makeOrderedMap(c,l)}function isStack(e){return!(!e||!e[Fe])}function makeStack(e,t,r,n){var i=Object.create(He);return i.size=e,i._head=t,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function emptyStack(){return ze||(ze=makeStack(0))}function isSet(e){return!(!e||!e[Ue])}function updateSet(e,t){if(e.__ownerID)return e.size=t.size,e._map=t,e;return t===e._map?e:0===t.size?e.__empty():e.__make(t)}function makeSet(e,t){var r=Object.create(We);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function emptySet(){return Ke||(Ke=makeSet(emptyMap()))}function isOrderedSet(e){return isSet(e)&&isOrdered(e)}function makeOrderedSet(e,t){var r=Object.create(Ge);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function emptyOrderedSet(){return Qe||(Qe=makeOrderedSet(emptyOrderedMap()))}function makeRecord(e,t,r){var n=Object.create(Object.getPrototypeOf(e));return n._map=t,n.__ownerID=r,n}function recordName(e){return e._name||e.constructor.name}var e=Object,t={};t.createClass=createClass,t.superCall=superCall,t.defaultSuperCall=defaultSuperCall;var r="delete",n=5,i=1<<n,a=i-1,o={},s={value:!1},u={value:!1},c=function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}(),l="function"==typeof WeakMap&&new WeakMap,d=2147483647,f=0,h="__immutablehash__";"function"==typeof Symbol&&(h=Symbol(h));var p=16,m=255,v=0,g={},y=0,S=1,b=2,C="@@iterator",E="function"==typeof Symbol&&Symbol.iterator,R=E||C,w=function Iterator(e){this.next=e};t.createClass(w,{toString:function(){return"[Iterator]"}},{}),w.KEYS=y,w.VALUES=S,w.ENTRIES=b;var I=w.prototype;I.inspect=I.toSource=function(){return this.toString()},I[R]=function(){return this};var T=function Iterable(e){return isIterable(e)?e:B(e)},M=T;t.createClass(T,{toArray:function(){assertNotInfinite(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,r){e[r]=t}),e},toIndexedSeq:function(){return new we(this)},toJS:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJS?e.toJS():e}).__toJS()},toKeyedSeq:function(){return new Re(this,!0)},toMap:function(){return assertNotInfinite(this.size),oe(this.toKeyedSeq())},toObject:function(){assertNotInfinite(this.size);var e={};return this.__iterate(function(t,r){e[r]=t}),e},toOrderedMap:function(){return assertNotInfinite(this.size),Oe(this.toKeyedSeq())},toOrderedSet:function(){return assertNotInfinite(this.size),je(isKeyed(this)?this.valueSeq():this)},toSet:function(){return assertNotInfinite(this.size),Ve(isKeyed(this)?this.valueSeq():this)},toSetSeq:function(){return new Ie(this)},toSeq:function(){return isIndexed(this)?this.toIndexedSeq():isKeyed(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return assertNotInfinite(this.size),Pe(isKeyed(this)?this.valueSeq():this)},toList:function(){return assertNotInfinite(this.size),Me(isKeyed(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){if(0===this.size)return e+t;return e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return reify(this,concatFactory(this,e))},contains:function(e){return this.some(function(t){return is(t,e)})},entries:function(){return this.__iterator(b)},every:function(e,t){var r=!0;return this.__iterate(function(n,i,a){if(!e.call(t,n,i,a))return r=!1,!1}),r},filter:function(e,t){return reify(this,filterFactory(this,e,t,!0))},find:function(e,t,r){var n=r;return this.__iterate(function(r,i,a){if(e.call(t,r,i,a))return n=r,!1}),n},forEach:function(e,t){return this.__iterate(t?e.bind(t):e)},join:function(e){e=void 0!==e?""+e:",";var t="",r=!0;return this.__iterate(function(n){r?r=!1:t+=e,t+=null!==n&&void 0!==n?n:""}),t},keys:function(){return this.__iterator(y)},map:function(e,t){return reify(this,mapFactory(this,e,t))},reduce:function(e,t,r){var n,i;return arguments.length<2?i=!0:n=t,this.__iterate(function(t,a,o){i?(i=!1,n=t):n=e.call(r,n,t,a,o)}),n},reduceRight:function(e,t,r){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments)},reverse:function(){return reify(this,reverseFactory(this,!0))},slice:function(e,t){if(wholeSlice(e,t,this.size))return this;var r=resolveBegin(e,this.size),n=resolveEnd(t,this.size);if(r!==r||n!==n)return this.toSeq().cacheResult().slice(e,t);var i=0===r?this:this.skip(r);return reify(this,void 0===n||n===this.size?i:i.take(n-r))},some:function(e,t){return!this.every(not(e),t)},sort:function(e){return reify(this,sortFactory(this,e))},values:function(){return this.__iterator(S)},butLast:function(){return this.slice(0,-1)},count:function(e,t){return ensureSize(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return countByFactory(this,e,t)},equals:function(e){if(this===e)return!0;if(!e||"function"!=typeof e.equals)return!1;if(void 0!==this.size&&void 0!==e.size){if(this.size!==e.size)return!1;if(0===this.size&&0===e.size)return!0}if(void 0!==this.__hash&&void 0!==e.__hash&&this.__hash!==e.__hash)return!1;return this.__deepEquals(e)},__deepEquals:function(e){return deepEqual(this,e)},entrySeq:function(){var e=this;if(e._cache)return new G(e._cache);var t=e.toSeq().map(entryMapper).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(not(e),t)},findLast:function(e,t,r){return this.toKeyedSeq().reverse().find(e,t,r)},first:function(){return this.find(returnTrue)},flatMap:function(e,t){return reify(this,flatMapFactory(this,e,t))},flatten:function(e){return reify(this,flattenFactory(this,e,!0))},fromEntrySeq:function(){return new Te(this)},get:function(e,t){return this.find(function(_,t){return is(t,e)},void 0,t)},getIn:function(e,t){var r=this;if(e)for(var n=0;n<e.length;n++)if((r=r&&r.get?r.get(e[n],o):o)===o)return t;return r},groupBy:function(e,t){return groupByFactory(this,e,t)},has:function(e){return this.get(e,o)!==o},isSubset:function(e){return e="function"==typeof e.contains?e:M(e),this.every(function(t){return e.contains(t)})},isSuperset:function(e){return e.isSubset(this)},keySeq:function(){return this.toSeq().map(keyMapper).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(e){return maxFactory(this,e)},maxBy:function(e,t){return maxFactory(this,t,e)},min:function(e){return maxFactory(this,e?neg(e):defaultNegComparator)},minBy:function(e,t){return maxFactory(this,t?neg(t):defaultNegComparator,e)},rest:function(){return this.slice(1)},skip:function(e){return reify(this,skipFactory(this,e,!0))},skipLast:function(e){return reify(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return reify(this,skipWhileFactory(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(not(e),t)},sortBy:function(e,t){return reify(this,sortFactory(this,t,e))},take:function(e){return reify(this,takeFactory(this,e))},takeLast:function(e){return reify(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return reify(this,takeWhileFactory(this,e,t))},takeUntil:function(e,t){return this.takeWhile(not(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=this.size===1/0?0:this.reduce(function(e,t,r){return e+(hash(t)^(t===r?0:hash(r)))&d},0))}},{});var N="@@__IMMUTABLE_ITERABLE__@@",k="@@__IMMUTABLE_KEYED__@@",x="@@__IMMUTABLE_INDEXED__@@",A="@@__IMMUTABLE_ORDERED__@@",L=T.prototype;L[N]=!0,L[R]=L.values,L.toJSON=L.toJS,L.__toJS=L.toArray,L.__toStringMapper=quoteString,L.inspect=L.toSource=function(){return this.toString()},L.chain=L.flatMap,function(){try{Object.defineProperty(L,"length",{get:function(){if(!T.noLengthWarning){var e;try{throw new Error}catch(t){e=t.stack}if(-1===e.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+e),this.size}}})}catch(e){}}();var D=function KeyedIterable(e){return isKeyed(e)?e:H(e)};t.createClass(D,{flip:function(){return reify(this,flipFactory(this))},findKey:function(e,t){var r;return this.__iterate(function(n,i,a){if(e.call(t,n,i,a))return r=i,!1}),r},findLastKey:function(e,t){return this.toSeq().reverse().findKey(e,t)},keyOf:function(e){return this.findKey(function(t){return is(t,e)})},lastKeyOf:function(e){return this.toSeq().reverse().keyOf(e)},mapEntries:function(e,t){var r=this,n=0;return reify(this,this.toSeq().map(function(i,a){return e.call(t,[a,i],n++,r)}).fromEntrySeq())},mapKeys:function(e,t){var r=this;return reify(this,this.toSeq().flip().map(function(n,i){return e.call(t,n,i,r)}).flip())}},{},T);var O=D.prototype;O[k]=!0,O[R]=L.entries,O.__toJS=L.toObject,O.__toStringMapper=function(e,t){return t+": "+quoteString(e)};var q=function IndexedIterable(e){return isIndexed(e)?e:V(e)};t.createClass(q,{toKeyedSeq:function(){return new Re(this,!1)},filter:function(e,t){return reify(this,filterFactory(this,e,t,!1))},findIndex:function(e,t){var r=this.toKeyedSeq().findKey(e,t);return void 0===r?-1:r},indexOf:function(e){var t=this.toKeyedSeq().keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.toKeyedSeq().lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return reify(this,reverseFactory(this,!1))},splice:function(e,t){var r=arguments.length;if(t=Math.max(0|t,0),0===r||2===r&&!t)return this;e=resolveBegin(e,this.size);var n=this.slice(0,e);return reify(this,1===r?n:n.concat(arrCopy(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var r=this.toKeyedSeq().findLastKey(e,t);return void 0===r?-1:r},first:function(){return this.get(0)},flatten:function(e){return reify(this,flattenFactory(this,e,!1))},get:function(e,t){return e=wrapIndex(this,e),e<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(_,t){return t===e},void 0,t)},has:function(e){return(e=wrapIndex(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return reify(this,interposeFactory(this,e))},last:function(){return this.get(-1)},skip:function(e){var t=this,r=skipFactory(t,e,!1);return isSeq(t)&&r!==t&&(r.get=function(r,n){return r=wrapIndex(this,r),r>=0?t.get(r+e,n):n}),reify(this,r)},skipWhile:function(e,t){return reify(this,skipWhileFactory(this,e,t,!1))},take:function(e){var t=this,r=takeFactory(t,e);return isSeq(t)&&r!==t&&(r.get=function(r,n){return r=wrapIndex(this,r),r>=0&&r<e?t.get(r,n):n}),reify(this,r)}},{},T),q.prototype[x]=!0,q.prototype[A]=!0;var P=function SetIterable(e){return isIterable(e)&&!isAssociative(e)?e:W(e)};t.createClass(P,{get:function(e,t){return this.has(e)?e:t},contains:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}},{},T),P.prototype.has=L.contains,T.isIterable=isIterable,T.isKeyed=isKeyed,T.isIndexed=isIndexed,T.isAssociative=isAssociative,T.isOrdered=isOrdered,T.Keyed=D,T.Indexed=q,T.Set=P,T.Iterator=w;var B=function Seq(e){return null===e||void 0===e?emptySequence():isIterable(e)?e.toSeq():seqFromValue(e)},F=B;t.createClass(B,{toSeq:function(){return this},toString:function(){return this.__toString("Seq {","}")},cacheResult:function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},__iterate:function(e,t){return seqIterate(this,e,t,!0)},__iterator:function(e,t){return seqIterator(this,e,t,!0)}},{of:function(){return F(arguments)}},T);var H=function KeyedSeq(e){return null===e||void 0===e?emptySequence().toKeyedSeq():isIterable(e)?isKeyed(e)?e.toSeq():e.fromEntrySeq():keyedSeqFromValue(e)},z=H;t.createClass(H,{toKeyedSeq:function(){return this},toSeq:function(){return this}},{of:function(){return z(arguments)}},B),mixin(H,D.prototype);var V=function IndexedSeq(e){return null===e||void 0===e?emptySequence():isIterable(e)?isKeyed(e)?e.entrySeq():e.toIndexedSeq():indexedSeqFromValue(e)},U=V;t.createClass(V,{toIndexedSeq:function(){return this},toString:function(){return this.__toString("Seq [","]")},__iterate:function(e,t){return seqIterate(this,e,t,!1)},__iterator:function(e,t){return seqIterator(this,e,t,!1)}},{of:function(){return U(arguments)}},B),mixin(V,q.prototype);var W=function SetSeq(e){return(null===e||void 0===e?emptySequence():isIterable(e)?isKeyed(e)?e.entrySeq():e:indexedSeqFromValue(e)).toSetSeq()},K=W;t.createClass(W,{toSetSeq:function(){return this}},{of:function(){return K(arguments)}},B),mixin(W,P.prototype),B.isSeq=isSeq,B.Keyed=H,B.Set=W,B.Indexed=V;var j="@@__IMMUTABLE_SEQ__@@";B.prototype[j]=!0;var G=function ArraySeq(e){this._array=e,this.size=e.length};t.createClass(G,{get:function(e,t){return this.has(e)?this._array[wrapIndex(this,e)]:t},__iterate:function(e,t){for(var r=this._array,n=r.length-1,i=0;i<=n;i++)if(!1===e(r[t?n-i:i],i,this))return i+1;return i},__iterator:function(e,t){var r=this._array,n=r.length-1,i=0;return new w(function(){return i>n?iteratorDone():iteratorValue(e,i,r[t?n-i++:i++])})}},{},V);var Q=function ObjectSeq(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length};t.createClass(Q,{get:function(e,t){if(void 0!==t&&!this.has(e))return t;return this._object[e]},has:function(e){return this._object.hasOwnProperty(e)},__iterate:function(e,t){for(var r=this._object,n=this._keys,i=n.length-1,a=0;a<=i;a++){var o=n[t?i-a:a];if(!1===e(r[o],o,this))return a+1}return a},__iterator:function(e,t){var r=this._object,n=this._keys,i=n.length-1,a=0;return new w(function(){var o=n[t?i-a:a];return a++>i?iteratorDone():iteratorValue(e,o,r[o])})}},{},H),Q.prototype[A]=!0;var J=function IterableSeq(e){this._iterable=e,this.size=e.length||e.size};t.createClass(J,{__iterateUncached:function(e,t){if(t)return this.cacheResult().__iterate(e,t);var r=this._iterable,n=getIterator(r),i=0;if(isIterator(n))for(var a;!(a=n.next()).done&&!1!==e(a.value,i++,this););return i},__iteratorUncached:function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=this._iterable,n=getIterator(r);if(!isIterator(n))return new w(iteratorDone);var i=0;return new w(function(){var t=n.next();return t.done?t:iteratorValue(e,i++,t.value)})}},{},V);var Y=function IteratorSeq(e){this._iterator=e,this._iteratorCache=[]};t.createClass(Y,{__iterateUncached:function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var r=this._iterator,n=this._iteratorCache,i=0;i<n.length;)if(!1===e(n[i],i++,this))return i;for(var a;!(a=r.next()).done;){var o=a.value;if(n[i]=o,!1===e(o,i++,this))break}return i},__iteratorUncached:function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=this._iterator,n=this._iteratorCache,i=0;return new w(function(){if(i>=n.length){var t=r.next();if(t.done)return t;n[i]=t.value}return iteratorValue(e,i,n[i++])})}},{},V);var Z,X=function Collection(){throw TypeError("Abstract")};t.createClass(X,{},{},T);var ee=function KeyedCollection(){t.defaultSuperCall(this,te.prototype,arguments)},te=ee;t.createClass(ee,{},{},X),mixin(ee,D.prototype);var re=function IndexedCollection(){t.defaultSuperCall(this,ne.prototype,arguments)},ne=re;t.createClass(re,{},{},X),mixin(re,q.prototype);var ie=function SetCollection(){t.defaultSuperCall(this,ae.prototype,arguments)},ae=ie;t.createClass(ie,{},{},X),mixin(ie,P.prototype),X.Keyed=ee,X.Indexed=re,X.Set=ie;var oe=function Map(e){return null===e||void 0===e?emptyMap():isMap(e)?e:emptyMap().merge(D(e))};t.createClass(oe,{toString:function(){return this.__toString("Map {","}")},get:function(e,t){return this._root?this._root.get(0,void 0,e,t):t},set:function(e,t){return updateMap(this,e,t)},setIn:function(e,t){return invariant(e.length>0,"Requires non-empty key path."),this.updateIn(e,function(){return t})},remove:function(e){return updateMap(this,e,o)},removeIn:function(e){return invariant(e.length>0,"Requires non-empty key path."),this.updateIn(e,function(){return o})},update:function(e,t,r){return 1===arguments.length?e(this):this.updateIn([e],t,r)},updateIn:function(e,t,r){return r||(r=t,t=void 0),0===e.length?r(this):updateInDeepMap(this,e,t,r,0)},clear:function(){if(0===this.size)return this;if(this.__ownerID)return this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this;return emptyMap()},merge:function(){return mergeIntoMapWith(this,void 0,arguments)},mergeWith:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return mergeIntoMapWith(this,e,t)},mergeDeep:function(){return mergeIntoMapWith(this,deepMerger(void 0),arguments)},mergeDeepWith:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return mergeIntoMapWith(this,deepMerger(e),t)},sort:function(e){return Oe(sortFactory(this,e))},sortBy:function(e,t){return Oe(sortFactory(this,t,e))},withMutations:function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},asMutable:function(){return this.__ownerID?this:this.__ensureOwner(new OwnerID)},asImmutable:function(){return this.__ensureOwner()},wasAltered:function(){return this.__altered},__iterator:function(e,t){return new ye(this,e,t)},__iterate:function(e,t){var r=this,n=0;return this._root&&this._root.iterate(function(t){return n++,e(t[1],t[0],r)},t),n},__ensureOwner:function(e){if(e===this.__ownerID)return this;if(!e)return this.__ownerID=e,this.__altered=!1,this;return makeMap(this.size,this._root,e,this.__hash)}},{},ee),oe.isMap=isMap;var se="@@__IMMUTABLE_MAP__@@",ue=oe.prototype;ue[se]=!0,ue[r]=ue.remove;var ce=function ArrayMapNode(e,t){this.ownerID=e,this.entries=t},le=ce;t.createClass(ce,{get:function(e,t,r,n){for(var i=this.entries,a=0,o=i.length;a<o;a++)if(is(r,i[a][0]))return i[a][1];return n},update:function(e,t,r,n,i,a,s){for(var u=i===o,c=this.entries,l=0,d=c.length;l<d&&!is(n,c[l][0]);l++);var f=l<d;if(f?c[l][1]===i:u)return this;if(SetRef(s),(u||!f)&&SetRef(a),u&&1===c.length)return;if(!f&&!u&&c.length>=be)return createNodes(e,c,n,i);var h=e&&e===this.ownerID,p=h?c:arrCopy(c);if(f?u?l===d-1?p.pop():p[l]=p.pop():p[l]=[n,i]:p.push([n,i]),h)return this.entries=p,this;return new le(e,p)}},{});var de=function BitmapIndexedNode(e,t,r){this.ownerID=e,this.bitmap=t,this.nodes=r},fe=de;t.createClass(de,{get:function(e,t,r,i){void 0===t&&(t=hash(r));var o=1<<((0===e?t:t>>>e)&a),s=this.bitmap;return 0==(s&o)?i:this.nodes[popCount(s&o-1)].get(e+n,t,r,i)},update:function(e,t,r,i,s,u,c){void 0===r&&(r=hash(i));var l=(0===t?r:r>>>t)&a,d=1<<l,f=this.bitmap,h=0!=(f&d);if(!h&&s===o)return this;var p=popCount(f&d-1),m=this.nodes,v=h?m[p]:void 0,g=updateNode(v,e,t+n,r,i,s,u,c);if(g===v)return this;if(!h&&g&&m.length>=Ce)return expandNodes(e,m,f,l,g);if(h&&!g&&2===m.length&&isLeafNode(m[1^p]))return m[1^p];if(h&&g&&1===m.length&&isLeafNode(g))return g;var y=e&&e===this.ownerID,S=h?g?f:f^d:f|d,b=h?g?setIn(m,p,g,y):spliceOut(m,p,y):spliceIn(m,p,g,y);if(y)return this.bitmap=S,this.nodes=b,this;return new fe(e,S,b)}},{});var he=function HashArrayMapNode(e,t,r){this.ownerID=e,this.count=t,this.nodes=r},pe=he;t.createClass(he,{get:function(e,t,r,i){void 0===t&&(t=hash(r));var o=(0===e?t:t>>>e)&a,s=this.nodes[o];return s?s.get(e+n,t,r,i):i},update:function(e,t,r,i,s,u,c){void 0===r&&(r=hash(i));var l=(0===t?r:r>>>t)&a,d=s===o,f=this.nodes,h=f[l];if(d&&!h)return this;var p=updateNode(h,e,t+n,r,i,s,u,c);if(p===h)return this;var m=this.count;if(h){if(!p&&--m<Ee)return packNodes(e,f,m,l)}else m++;var v=e&&e===this.ownerID,g=setIn(f,l,p,v);if(v)return this.count=m,this.nodes=g,this;return new pe(e,m,g)}},{});var me=function HashCollisionNode(e,t,r){this.ownerID=e,this.keyHash=t,this.entries=r},ve=me;t.createClass(me,{get:function(e,t,r,n){for(var i=this.entries,a=0,o=i.length;a<o;a++)if(is(r,i[a][0]))return i[a][1];return n},update:function(e,t,r,n,i,a,s){void 0===r&&(r=hash(n));var u=i===o;if(r!==this.keyHash){if(u)return this;return SetRef(s),SetRef(a),mergeIntoNode(this,e,t,r,[n,i])}for(var c=this.entries,l=0,d=c.length;l<d&&!is(n,c[l][0]);l++);var f=l<d;if(f?c[l][1]===i:u)return this;if(SetRef(s),(u||!f)&&SetRef(a),u&&2===d)return new ge(e,this.keyHash,c[1^l]);var h=e&&e===this.ownerID,p=h?c:arrCopy(c);if(f?u?l===d-1?p.pop():p[l]=p.pop():p[l]=[n,i]:p.push([n,i]),h)return this.entries=p,this;return new ve(e,this.keyHash,p)}},{});var ge=function ValueNode(e,t,r){this.ownerID=e,this.keyHash=t,this.entry=r},_e=ge;t.createClass(ge,{get:function(e,t,r,n){return is(r,this.entry[0])?this.entry[1]:n},update:function(e,t,r,n,i,a,s){var u=i===o,c=is(n,this.entry[0]);if(c?i===this.entry[1]:u)return this;if(SetRef(s),u)return void SetRef(a);if(c){if(e&&e===this.ownerID)return this.entry[1]=i,this;return new _e(e,this.keyHash,[n,i])}return SetRef(a),mergeIntoNode(this,e,t,hash(n),[n,i])}},{}),ce.prototype.iterate=me.prototype.iterate=function(e,t){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(!1===e(r[t?i-n:n]))return!1},de.prototype.iterate=he.prototype.iterate=function(e,t){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var a=r[t?i-n:n];if(a&&!1===a.iterate(e,t))return!1}},ge.prototype.iterate=function(e,t){return e(this.entry)};var ye=function MapIterator(e,t,r){this._type=t,this._reverse=r,this._stack=e._root&&mapIteratorFrame(e._root)};t.createClass(ye,{next:function(){for(var e=this._type,t=this._stack;t;){var r=t.node,n=t.index++,i;if(r.entry){if(0===n)return mapIteratorValue(e,r.entry)}else if(r.entries){if(i=r.entries.length-1,n<=i)return mapIteratorValue(e,r.entries[this._reverse?i-n:n])}else if(i=r.nodes.length-1,n<=i){var a=r.nodes[this._reverse?i-n:n];if(a){if(a.entry)return mapIteratorValue(e,a.entry);t=this._stack=mapIteratorFrame(a,t)}continue}t=this._stack=this._stack.__prev}return iteratorDone()}},{},w);var Se,be=i/4,Ce=i/2,Ee=i/4,Re=function ToKeyedSequence(e,t){this._iter=e,this._useKeys=t,this.size=e.size};t.createClass(Re,{get:function(e,t){return this._iter.get(e,t)},has:function(e){return this._iter.has(e)},valueSeq:function(){return this._iter.valueSeq()},reverse:function(){var e=this,t=reverseFactory(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},map:function(e,t){var r=this,n=mapFactory(this,e,t);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(e,t)}),n},__iterate:function(e,t){var r=this,n;return this._iter.__iterate(this._useKeys?function(t,n){return e(t,n,r)}:(n=t?resolveSize(this):0,function(i){return e(i,t?--n:n++,r)}),t)},__iterator:function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var r=this._iter.__iterator(S,t),n=t?resolveSize(this):0;return new w(function(){var i=r.next();return i.done?i:iteratorValue(e,t?--n:n++,i.value,i)})}},{},H),Re.prototype[A]=!0;var we=function ToIndexedSequence(e){this._iter=e,this.size=e.size};t.createClass(we,{contains:function(e){return this._iter.contains(e)},__iterate:function(e,t){var r=this,n=0;return this._iter.__iterate(function(t){return e(t,n++,r)},t)},__iterator:function(e,t){var r=this._iter.__iterator(S,t),n=0;return new w(function(){var t=r.next();return t.done?t:iteratorValue(e,n++,t.value,t)})}},{},V);var Ie=function ToSetSequence(e){this._iter=e,this.size=e.size};t.createClass(Ie,{has:function(e){return this._iter.contains(e)},__iterate:function(e,t){var r=this;return this._iter.__iterate(function(t){return e(t,t,r)},t)},__iterator:function(e,t){var r=this._iter.__iterator(S,t);return new w(function(){var t=r.next();return t.done?t:iteratorValue(e,t.value,t.value,t)})}},{},W);var Te=function FromEntriesSequence(e){this._iter=e,this.size=e.size};t.createClass(Te,{entrySeq:function(){return this._iter.toSeq()},__iterate:function(e,t){var r=this;return this._iter.__iterate(function(t){if(t)return validateEntry(t),e(t[1],t[0],r)},t)},__iterator:function(e,t){var r=this._iter.__iterator(S,t);return new w(function(){for(;;){var t=r.next();if(t.done)return t;var n=t.value;if(n)return validateEntry(n),e===b?t:iteratorValue(e,n[0],n[1],t)}})}},{},H),we.prototype.cacheResult=Re.prototype.cacheResult=Ie.prototype.cacheResult=Te.prototype.cacheResult=cacheResultThrough;var Me=function List(e){var t=emptyList();if(null===e||void 0===e)return t;if(isList(e))return e;e=q(e);var r=e.size;if(0===r)return t;if(r>0&&r<i)return makeList(0,r,n,null,new xe(e.toArray()));return t.merge(e)};t.createClass(Me,{toString:function(){return this.__toString("List [","]")},get:function(e,t){if((e=wrapIndex(this,e))<0||e>=this.size)return t;e+=this._origin;var r=listNodeFor(this,e);return r&&r.array[e&a]},set:function(e,t){return updateList(this,e,t)},remove:function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},clear:function(){if(0===this.size)return this;if(this.__ownerID)return this.size=this._origin=this._capacity=0,this._level=n,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this;return emptyList()},push:function(){var e=arguments,t=this.size;return this.withMutations(function(r){setListBounds(r,0,t+e.length);for(var n=0;n<e.length;n++)r.set(t+n,e[n])})},pop:function(){return setListBounds(this,0,-1)},unshift:function(){var e=arguments;return this.withMutations(function(t){setListBounds(t,-e.length);for(var r=0;r<e.length;r++)t.set(r,e[r])})},shift:function(){return setListBounds(this,1)},merge:function(){return mergeIntoListWith(this,void 0,arguments)},mergeWith:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return mergeIntoListWith(this,e,t)},mergeDeep:function(){return mergeIntoListWith(this,deepMerger(void 0),arguments)},mergeDeepWith:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return mergeIntoListWith(this,deepMerger(e),t)},setSize:function(e){return setListBounds(this,0,e)},slice:function(e,t){var r=this.size;if(wholeSlice(e,t,r))return this;return setListBounds(this,resolveBegin(e,r),resolveEnd(t,r))},__iterator:function(e,t){return new Le(this,e,t)},__iterate:function(e,t){var r=this,n=0,i=function(t){return e(t,n++,r)},a=getTailOffset(this._capacity);return t?iterateVNode(this._tail,0,a-this._origin,this._capacity-this._origin,i,t)&&iterateVNode(this._root,this._level,-this._origin,a-this._origin,i,t):iterateVNode(this._root,this._level,-this._origin,a-this._origin,i,t)&&iterateVNode(this._tail,0,a-this._origin,this._capacity-this._origin,i,t),n},__ensureOwner:function(e){if(e===this.__ownerID)return this;if(!e)return this.__ownerID=e,this;return makeList(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash)}},{of:function(){return this(arguments)}},re),Me.isList=isList;var Ne="@@__IMMUTABLE_LIST__@@",ke=Me.prototype;ke[Ne]=!0,ke[r]=ke.remove,ke.setIn=ue.setIn,ke.removeIn=ue.removeIn,ke.update=ue.update,ke.updateIn=ue.updateIn,ke.withMutations=ue.withMutations,ke.asMutable=ue.asMutable,ke.asImmutable=ue.asImmutable,ke.wasAltered=ue.wasAltered;var xe=function VNode(e,t){this.array=e,this.ownerID=t},Ae=xe;t.createClass(xe,{removeBefore:function(e,t,r){if(r===t?1<<t:0===this.array.length)return this;var i=r>>>t&a;if(i>=this.array.length)return new Ae([],e);var o=0===i,s;if(t>0){var u=this.array[i];if((s=u&&u.removeBefore(e,t-n,r))===u&&o)return this}if(o&&!s)return this;var c=editableVNode(this,e);if(!o)for(var l=0;l<i;l++)c.array[l]=void 0;return s&&(c.array[i]=s),c},removeAfter:function(e,t,r){if(r===t?1<<t:0===this.array.length)return this;var i=r-1>>>t&a;if(i>=this.array.length)return this;var o=i===this.array.length-1,s;if(t>0){var u=this.array[i];if((s=u&&u.removeAfter(e,t-n,r))===u&&o)return this}if(o&&!s)return this;var c=editableVNode(this,e);return o||c.array.pop(),s&&(c.array[i]=s),c}},{});var Le=function ListIterator(e,t,r){this._type=t,this._reverse=!!r,this._maxIndex=e.size-1;var n=getTailOffset(e._capacity),i=listIteratorFrame(e._root&&e._root.array,e._level,-e._origin,n-e._origin-1),a=listIteratorFrame(e._tail&&e._tail.array,0,n-e._origin,e._capacity-e._origin-1);this._stack=r?a:i,this._stack.__prev=r?i:a};t.createClass(Le,{next:function(){for(var e=this._stack;e;){var t=e.array,r=e.index++;if(this._reverse&&(r=a-r)>e.rawMax&&(r=e.rawMax,e.index=i-r),r>=0&&r<i&&r<=e.rawMax){var o=t&&t[r];if(0===e.level){var s=this._type,u;return 1!==s&&(u=e.offset+(r<<e.level),this._reverse&&(u=this._maxIndex-u)),iteratorValue(s,u,o)}this._stack=e=listIteratorFrame(o&&o.array,e.level-n,e.offset+(r<<e.level),e.max,e);continue}e=this._stack=this._stack.__prev}return iteratorDone()}},{},w);var De,Oe=function OrderedMap(e){return null===e||void 0===e?emptyOrderedMap():isOrderedMap(e)?e:emptyOrderedMap().merge(D(e))};t.createClass(Oe,{toString:function(){return this.__toString("OrderedMap {","}")},get:function(e,t){var r=this._map.get(e);return void 0!==r?this._list.get(r)[1]:t},clear:function(){if(0===this.size)return this;if(this.__ownerID)return this.size=0,this._map.clear(),this._list.clear(),this;return emptyOrderedMap()},set:function(e,t){return updateOrderedMap(this,e,t)},remove:function(e){return updateOrderedMap(this,e,o)},wasAltered:function(){return this._map.wasAltered()||this._list.wasAltered()},__iterate:function(e,t){var r=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],r)},t)},__iterator:function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},__ensureOwner:function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),r=this._list.__ensureOwner(e);if(!e)return this.__ownerID=e,this._map=t,this._list=r,this;return makeOrderedMap(t,r,e,this.__hash)}},{of:function(){return this(arguments)}},oe),Oe.isOrderedMap=isOrderedMap,Oe.prototype[A]=!0,Oe.prototype[r]=Oe.prototype.remove;var qe,Pe=function Stack(e){return null===e||void 0===e?emptyStack():isStack(e)?e:emptyStack().unshiftAll(e)},Be=Pe;t.createClass(Pe,{toString:function(){return this.__toString("Stack [","]")},get:function(e,t){for(var r=this._head;r&&e--;)r=r.next;return r?r.value:t},peek:function(){return this._head&&this._head.value},push:function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,r=arguments.length-1;r>=0;r--)t={value:arguments[r],next:t};if(this.__ownerID)return this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this;return makeStack(e,t)},pushAll:function(e){if(e=q(e),0===e.size)return this;var t=this.size,r=this._head;if(e.reverse().forEach(function(e){t++,r={value:e,next:r}}),this.__ownerID)return this.size=t,this._head=r,this.__hash=void 0,this.__altered=!0,this;return makeStack(t,r)},pop:function(){return this.slice(1)},unshift:function(){return this.push.apply(this,arguments)},unshiftAll:function(e){return this.pushAll(e)},shift:function(){return this.pop.apply(this,arguments)},clear:function(){if(0===this.size)return this;if(this.__ownerID)return this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this;return emptyStack()},slice:function(e,r){if(wholeSlice(e,r,this.size))return this;var n=resolveBegin(e,this.size);if(resolveEnd(r,this.size)!==this.size)return t.superCall(this,Be.prototype,"slice",[e,r]);for(var i=this.size-n,a=this._head;n--;)a=a.next;if(this.__ownerID)return this.size=i,this._head=a,this.__hash=void 0,this.__altered=!0,this;return makeStack(i,a)},__ensureOwner:function(e){if(e===this.__ownerID)return this;if(!e)return this.__ownerID=e,this.__altered=!1,this;return makeStack(this.size,this._head,e,this.__hash)},__iterate:function(e,t){if(t)return this.toSeq().cacheResult.__iterate(e,t);for(var r=0,n=this._head;n&&!1!==e(n.value,r++,this);)n=n.next;return r},__iterator:function(e,t){if(t)return this.toSeq().cacheResult().__iterator(e,t);var r=0,n=this._head;return new w(function(){if(n){var t=n.value;return n=n.next,iteratorValue(e,r++,t)}return iteratorDone()})}},{of:function(){return this(arguments)}},re),Pe.isStack=isStack;var Fe="@@__IMMUTABLE_STACK__@@",He=Pe.prototype;He[Fe]=!0,He.withMutations=ue.withMutations,He.asMutable=ue.asMutable,He.asImmutable=ue.asImmutable,He.wasAltered=ue.wasAltered;var ze,Ve=function Set(e){return null===e||void 0===e?emptySet():isSet(e)?e:emptySet().union(P(e))};t.createClass(Ve,{toString:function(){return this.__toString("Set {","}")},has:function(e){return this._map.has(e)},add:function(e){return updateSet(this,this._map.set(e,!0))},remove:function(e){return updateSet(this,this._map.remove(e))},clear:function(){return updateSet(this,this._map.clear())},union:function(){var e=arguments;if(0===e.length)return this;return this.withMutations(function(t){for(var r=0;r<e.length;r++)P(e[r]).forEach(function(e){return t.add(e)})})},intersect:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return this;e=e.map(function(e){return P(e)});var r=this;return this.withMutations(function(t){r.forEach(function(r){e.every(function(e){return e.contains(r)})||t.remove(r)})})},subtract:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return this;e=e.map(function(e){return P(e)});var r=this;return this.withMutations(function(t){r.forEach(function(r){e.some(function(e){return e.contains(r)})&&t.remove(r)})})},merge:function(){return this.union.apply(this,arguments)},mergeWith:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return this.union.apply(this,t)},sort:function(e){return je(sortFactory(this,e))},sortBy:function(e,t){return je(sortFactory(this,t,e))},wasAltered:function(){return this._map.wasAltered()},__iterate:function(e,t){var r=this;return this._map.__iterate(function(_,t){return e(t,t,r)},t)},__iterator:function(e,t){return this._map.map(function(_,e){return e}).__iterator(e,t)},__ensureOwner:function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);if(!e)return this.__ownerID=e,this._map=t,this;return this.__make(t,e)}},{of:function(){return this(arguments)},fromKeys:function(e){return this(D(e).keySeq())}},ie),Ve.isSet=isSet;var Ue="@@__IMMUTABLE_SET__@@",We=Ve.prototype;We[Ue]=!0,We[r]=We.remove,We.mergeDeep=We.merge,We.mergeDeepWith=We.mergeWith,We.withMutations=ue.withMutations,We.asMutable=ue.asMutable,We.asImmutable=ue.asImmutable,We.__empty=emptySet,We.__make=makeSet;var Ke,je=function OrderedSet(e){return null===e||void 0===e?emptyOrderedSet():isOrderedSet(e)?e:emptyOrderedSet().union(P(e))};t.createClass(je,{toString:function(){return this.__toString("OrderedSet {","}")}},{of:function(){return this(arguments)},fromKeys:function(e){return this(D(e).keySeq())}},Ve),je.isOrderedSet=isOrderedSet;var Ge=je.prototype;Ge[A]=!0,Ge.__empty=emptyOrderedSet,Ge.__make=makeOrderedSet;var Qe,Je=function Record(e,t){var r=function Record(e){if(!(this instanceof r))return new r(e);this._map=oe(e)},n=Object.keys(e),i=r.prototype=Object.create(Ye);i.constructor=r,t&&(i._name=t),i._defaultValues=e,i._keys=n,i.size=n.length;try{n.forEach(function(e){Object.defineProperty(r.prototype,e,{get:function(){return this.get(e)},set:function(t){invariant(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})})}catch(e){}return r};t.createClass(Je,{toString:function(){return this.__toString(recordName(this)+" {","}")},has:function(e){return this._defaultValues.hasOwnProperty(e)},get:function(e,t){if(!this.has(e))return t;var r=this._defaultValues[e];return this._map?this._map.get(e,r):r},clear:function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=Object.getPrototypeOf(this).constructor;return e._empty||(e._empty=makeRecord(this,emptyMap()))},set:function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+recordName(this));var r=this._map&&this._map.set(e,t);if(this.__ownerID||r===this._map)return this;return makeRecord(this,r)},remove:function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);if(this.__ownerID||t===this._map)return this;return makeRecord(this,t)},wasAltered:function(){return this._map.wasAltered()},__iterator:function(e,t){var r=this;return D(this._defaultValues).map(function(_,e){return r.get(e)}).__iterator(e,t)},__iterate:function(e,t){var r=this;return D(this._defaultValues).map(function(_,e){return r.get(e)}).__iterate(e,t)},__ensureOwner:function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);if(!e)return this.__ownerID=e,this._map=t,this;return makeRecord(this,t,e)}},{},ee);var Ye=Je.prototype;Ye[r]=Ye.remove,Ye.merge=ue.merge,Ye.mergeWith=ue.mergeWith,Ye.mergeDeep=ue.mergeDeep,Ye.mergeDeepWith=ue.mergeDeepWith,Ye.update=ue.update,Ye.updateIn=ue.updateIn,Ye.withMutations=ue.withMutations,Ye.asMutable=ue.asMutable,Ye.asImmutable=ue.asImmutable;var Ze=function Range(e,t,r){if(!(this instanceof Xe))return new Xe(e,t,r);if(invariant(0!==r,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),e===t&&et)return et;r=void 0===r?1:Math.abs(r),t<e&&(r=-r),this._start=e,this._end=t,this._step=r,this.size=Math.max(0,Math.ceil((t-e)/r-1)+1)},Xe=Ze;t.createClass(Ze,{toString:function(){if(0===this.size)return"Range []";return"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},get:function(e,t){return this.has(e)?this._start+wrapIndex(this,e)*this._step:t},contains:function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},slice:function(e,t){if(wholeSlice(e,t,this.size))return this;if(e=resolveBegin(e,this.size),(t=resolveEnd(t,this.size))<=e)return et;return new Xe(this.get(e,this._end),this.get(t,this._end),this._step)},indexOf:function(e){var t=e-this._start;if(t%this._step==0){var r=t/this._step;if(r>=0&&r<this.size)return r}return-1},lastIndexOf:function(e){return this.indexOf(e)},take:function(e){return this.slice(0,Math.max(0,e))},skip:function(e){return this.slice(Math.max(0,e))},__iterate:function(e,t){for(var r=this.size-1,n=this._step,i=t?this._start+r*n:this._start,a=0;a<=r;a++){if(!1===e(i,a,this))return a+1;i+=t?-n:n}return a},__iterator:function(e,t){var r=this.size-1,n=this._step,i=t?this._start+r*n:this._start,a=0;return new w(function(){var o=i;return i+=t?-n:n,a>r?iteratorDone():iteratorValue(e,a++,o)})},__deepEquals:function(e){return e instanceof Xe?this._start===e._start&&this._end===e._end&&this._step===e._step:deepEqual(this,e)}},{},V);var $e=Ze.prototype;$e.__toJS=$e.toArray,$e.first=ke.first,$e.last=ke.last;var et=Ze(0,0),tt=function Repeat(e,t){if(t<=0&&it)return it;if(!(this instanceof rt))return new rt(e,t);this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size&&(it=this)},rt=tt;t.createClass(tt,{toString:function(){if(0===this.size)return"Repeat []";return"Repeat [ "+this._value+" "+this.size+" times ]"},get:function(e,t){return this.has(e)?this._value:t},contains:function(e){return is(this._value,e)},slice:function(e,t){var r=this.size;return wholeSlice(e,t,r)?this:new rt(this._value,resolveEnd(t,r)-resolveBegin(e,r))},reverse:function(){return this},indexOf:function(e){if(is(this._value,e))return 0;return-1},lastIndexOf:function(e){if(is(this._value,e))return this.size;return-1},__iterate:function(e,t){for(var r=0;r<this.size;r++)if(!1===e(this._value,r,this))return r+1;return r},__iterator:function(e,t){var r=this,n=0;return new w(function(){return n<r.size?iteratorValue(e,n++,r._value):iteratorDone()})},__deepEquals:function(e){return e instanceof rt?is(this._value,e._value):deepEqual(e)}},{},V);var nt=tt.prototype;nt.last=nt.first,nt.has=$e.has,nt.take=$e.take,nt.skip=$e.skip,nt.__toJS=$e.__toJS;var it;return{Iterable:T,Seq:B,Collection:X,Map:oe,OrderedMap:Oe,List:Me,Stack:Pe,Set:Ve,OrderedSet:je,Record:Je,Range:Ze,Repeat:tt,is:is,fromJS:fromJS}}module.exports=universalModule()},m75T:function(module,exports,e){var t=e("lZHV");"string"==typeof t&&(t=[[module.i,t,""]]);var r,n={};n.transform=void 0;var i=e("MTIv")(t,n);t.locals&&(module.exports=t.locals)},m9Zk:function(module,exports,e){"use strict";exports.default={"de":true,"es":true,"fr":true,"ja":true,"ko":true,"pseudo":true,"pt":true,"ru":true,"tr":true,"zh":true,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":true}},mhxD:function(module,exports){},n70R:function(module,exports,e){"use strict";var t=e("hHYt"),r=new t("/api/courseFeedbackCounts.v1",{type:"rest"});module.exports=r},o2vs:function(module,exports,e){"use strict";exports.default={"de":true,"es":true,"fr":true,"ja":true,"ko":true,"pseudo":true,"pt":true,"ru":true,"tr":true,"zh":true,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":true}},oD7d:function(module,exports,e){"use strict";module.exports=function(e){return function(t){var r=e.querySelectorAll("[data-command-name]");Array.prototype.forEach.call(r,function(e){function update(n){var i=new t.api.Selection,a=e.getAttribute("data-disabled-tags")||"";a=a.split(",");var o=i.getContaining(function(e){var t=e.nodeName.toLowerCase();return-1!==a.indexOf(t)}),s=function queryState(){try{return r.queryState()}catch(e){return!1}},u=function queryEnabled(){try{return r.queryEnabled()}catch(e){return!1}};i.range&&s()?(e.classList.add("active"),e.setAttribute("aria-pressed","true")):(e.classList.remove("active"),e.setAttribute("aria-pressed","false")),i.range&&u()&&!o?e.removeAttribute("disabled"):n&&"blur"!==n.type&&e.setAttribute("disabled","disabled")}var r=t.getCommand(e.getAttribute("data-command-name"));e.addEventListener("click",function(){t.el.focus(),r.execute()}),t.el.addEventListener("keyup",update),t.el.addEventListener("mouseup",update),t.el.addEventListener("focus",update),t.el.addEventListener("blur",update),t.on("content-changed",update)})}}},oLaJ:function(module,exports){},"oi+S":function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),_=e("41m7"),n=function(){function CourseRatingStats(e,t){var n=this;(0,r.default)(this,CourseRatingStats),this.counts=e,this.totalCount=0,this.averageRating=0,_(this.counts).each(function(e,t){n.totalCount=n.totalCount+e,n.averageRating=n.averageRating+t*e}),this.averageRating=parseFloat((this.averageRating/this.totalCount).toFixed(1)),t&&Object.assign(this,t)}return CourseRatingStats.prototype.getCount=function getCount(e){return this.counts[e.value]||0},CourseRatingStats.prototype.getPercent=function getPercent(e){if(!this.totalCount)return 0;return Math.round(this.getCount(e)/this.totalCount*100)},CourseRatingStats}();module.exports=n},omOh:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("zwoO"),i=_interopRequireDefault(n),a=e("Pf15"),o=_interopRequireDefault(a),s,u,c=e("U7vG"),l=e("gzuN"),_=e("41m7"),d=e("dOAO"),f=e("wz+u"),h=e("buS2"),p=e("UXxd"),m=e("qstY"),v=e("54xC"),g=e("ACAK"),y=e("tcQx"),S=e("AHPF"),b=S.ALL_BRANCHES,C=e("IG45"),E=e("d/2p"),R=E.changeBranchId,w=E.getCourseRatingStats,I=E.filterCourseRatings,T=E.getCourseReviews,M=E.filterCourseReviews,N=e("iy/N"),k=N.FormattedMessage,x=N.FormattedHTMLMessage,A=e("Olgp"),L=e("Wksn"),D=e("p2kh"),O=e("vRtt"),q=e("oi+S"),P=e("RjIh"),B=e("hgxZ");e("m75T");var F=(u=s=function(e){function CourseRatingsDashboardContent(){var t,n,a;(0,r.default)(this,CourseRatingsDashboardContent);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return t=n=(0,i.default)(this,e.call.apply(e,[this].concat(s))),n.handleSelectBranch=function(e){var t=n.props,r=t.courseId,i=t.branches,a=t.ratingValue,o=t.learnerAudience,s=t.reviewCollection,u=void 0;u=e!==b?_(i).find(function(t){return t.id===e}).courseBranchId:e,n.context.executeAction(R,{courseId:r,branchId:u,ratingValue:a,learnerAudience:o,reviewCollection:s})},n.handleInfiniteScroll=function(){var e=n.props,t=e.courseId,r=e.branchId,i=e.reviewCollection,a=e.ratingValue,o=e.learnerAudience;n.context.executeAction(T,{courseId:t,branchId:r,reviewCollection:i,ratingValue:a,learnerAudience:o})},n.handleRatingValueChange=function(e){var t=n.props,r=t.courseId,i=t.branchId,a=t.learnerAudience;n.context.executeAction(M,{courseId:r,branchId:i,ratingValue:e,learnerAudience:a})},n.handleLearnerAudienceChange=function(e){var t=n.props,r=t.courseId,i=t.branchId,a=t.ratingValue;n.context.executeAction(I,{courseId:r,branchId:i,ratingValue:a,learnerAudience:e})},a=t,(0,i.default)(n,a)}return(0,o.default)(CourseRatingsDashboardContent,e),CourseRatingsDashboardContent.prototype.componentDidMount=function componentDidMount(){var e=this.props,t=e.courseId,r=e.branchId,n=e.reviewCollection,i=e.ratingValue,a=e.learnerAudience,o=e.totalCount,s=e.averageRating;this.context.executeAction(T,{courseId:t,branchId:r,reviewCollection:n,ratingValue:i,learnerAudience:a}),B.isAuthenticatedUser()&&this.context.executeAction(w,{courseId:t,branchId:r,learnerAudience:a,totalCount:o,averageRating:s})},CourseRatingsDashboardContent.prototype.render=function render(){var e=this.props.reviewCollection.totalCount,t=l().format("h:mm a, MMMM Do, YYYY");return c.createElement("div",{className:"rc-CourseRatingsDashboardContent"},c.createElement("h1",{className:"c-course-ratings-heading"},L("Ratings")),c.createElement("div",{className:"branch-switcher"},c.createElement(g,{showOnlyLaunchedBranches:!0,updateBranchSelectionStore:!1,enableSelectAllBranches:!0,overrideSelectedBranchId:b,onSelect:this.handleSelectBranch}),c.createElement(A,{style:{margin:"30px 0px 30px 0px"}})),this.props.showTeachDescription&&c.createElement("div",{className:"c-course-ratings-description"},c.createElement(x,{message:L("Learners can rate courses at any point as they progress\n                but must be enrolled to rate a course. {learnMoreLink}"),learnMoreLink:c.createElement(C,{articleId:"205619429"})}),c.createElement("div",{className:"c-course-ratings-updated-at"},c.createElement(x,{message:L("Last updated <strong>{timestamp}</strong>. Updated real time."),timestamp:t}))),c.createElement("div",{className:"c-course-learner-audience-container"},c.createElement(p,{learnerAudience:this.props.learnerAudience,onChange:this.handleLearnerAudienceChange})),this.props.courseRatingStats&&c.createElement("div",{className:"c-course-rating-stats"},c.createElement(m,{courseRatingStats:this.props.courseRatingStats}),this.props.showCourseRatingBreakdown&&c.createElement(v,{courseRatingStats:this.props.courseRatingStats})),c.createElement(h,{ratingValue:this.props.ratingValue,onChange:this.handleRatingValueChange}),c.createElement("div",{className:"c-course-review-count-container"},this.props.isLoadingReviews&&L("Loading Reviews..."),!this.props.isLoadingReviews&&c.createElement(d,{value:e,message:c.createElement(k,{message:L("{reviewCount, plural, =0 {Reviews} one {Review} other {Reviews}}"),reviewCount:e})}),!this.props.isLoadingReviews&&this.props.showTeachDescription&&c.createElement("div",{className:"abuse-container"},c.createElement(x,{message:L("To flag an abusive review for removal, please contact <a href={link}>{email}</a>"),link:"mailto:partner-support@coursera.org",email:"partner-support@coursera.org"}))),c.createElement("div",{className:"c-course-reviews"},!!e&&c.createElement(f,{reviewCollection:this.props.reviewCollection,onInfiniteScroll:this.handleInfiniteScroll}),!this.props.isLoadingReviews&&!e&&c.createElement(P,{heading:L("There are no reviews to display")})))},CourseRatingsDashboardContent}(c.Component),s.propTypes={courseId:c.PropTypes.string.isRequired,branchId:c.PropTypes.string.isRequired,branches:c.PropTypes.arrayOf(y),isLoadingReviews:c.PropTypes.bool.isRequired,ratingValue:c.PropTypes.object.isRequired,learnerAudience:c.PropTypes.object.isRequired,courseRatingStats:c.PropTypes.instanceOf(q),reviewCollection:c.PropTypes.instanceOf(O).isRequired,showCourseRatingBreakdown:c.PropTypes.bool,showTeachDescription:c.PropTypes.bool,averageRating:c.PropTypes.number,totalCount:c.PropTypes.number},s.contextTypes={executeAction:c.PropTypes.func.isRequired},s.defaultProps={showCourseRatingBreakdown:!0,showTeachDescription:!0},u);module.exports=D(F,["TeachAppStore","CourseRatingStore"],function(e,t){var r=e.TeachAppStore,n=e.CourseRatingStore;return{courseRatingStats:n.getCourseRatingStats(),isLoadingReviews:n.getIsLoadingReviews(),reviewCollection:n.getReviewCollection(),ratingValue:n.getRatingValue(),learnerAudience:n.getLearnerAudience(),branchId:n.getBranchId(),branches:r.getBranches()}}),module.exports.BaseComp=F},pkLG:function(module,exports,e){"use strict";var t=e("hHYt"),r=new t("/api/feedbackAdmin.v1",{type:"rest"});module.exports=r},qstY:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("zwoO"),i=_interopRequireDefault(n),a=e("Pf15"),o=_interopRequireDefault(a),s,u,c=e("U7vG"),l=e("pL2z"),d=e("oi+S"),f=e("iy/N"),h=f.FormattedMessage,p=f.FormattedNumber,m=f.FormattedHTMLMessage,v=e("Wksn");e("CMGS");var g=(u=s=function(e){function AverageCourseRating(){return(0,r.default)(this,AverageCourseRating),(0,i.default)(this,e.apply(this,arguments))}return(0,o.default)(AverageCourseRating,e),AverageCourseRating.prototype.render=function render(){var e=this.props.courseRatingStats,t=e.averageRating,r=e.totalCount;return c.createElement("div",{className:"rc-AverageCourseRating"},c.createElement("div",{className:"c-average-course-rating-icons"},c.createElement(l,{value:t,size:"large"}),this.props.showCount&&c.createElement("h2",null,c.createElement("span",{className:"c-course-rating-count"},c.createElement(p,{value:r})),c.createElement("span",{className:"c-course-rating-label"},c.createElement(h,{message:v("{ratingCount, plural, =0 {Ratings} one {Rating} other {Ratings}}"),ratingCount:r})))),!!t&&c.createElement("div",{className:"c-average-course-rating-stats"},c.createElement(m,{message:v("<strong>{value}</strong> out of 5 stars"),value:t})))},AverageCourseRating}(c.Component),s.propTypes={courseRatingStats:c.PropTypes.instanceOf(d).isRequired,showCount:c.PropTypes.bool},s.defaultProps={showCount:!0},u);module.exports=g},rrte:function(module,exports,e){"use strict";var t=e("U7vG"),r=t.PropTypes,n=e("AHPF").branchStatus,i=exports.SessionPropType={branchId:r.string,courseId:r.string,endedAt:r.number,enrollmentEndedAt:r.number,moduleDeadlines:r.array,startedAt:r.number};exports.CourseBranchPropType=r.shape({id:r.string.isRequired,courseId:r.string.isRequired,name:r.string,changeDescription:r.shape({typeName:r.oneOf(["cml"]),definition:r.shape({dtdId:r.oneOf(["branchDescription/1"]),value:r.string})}),launchedAt:r.number,createdAt:r.number,branchStatus:r.oneOf(Object.keys(n).map(function(e){return n[e]})),associatedSessions:r.shape(i),startedat:r.number})},szMF:function(module,exports,e){var t=e("gxx0");"string"==typeof t&&(t=[[module.i,t,""]]);var r,n={};n.transform=void 0;var i=e("MTIv")(t,n);t.locals&&(module.exports=t.locals)},tWSq:function(module,exports,e){var t;void 0!==(t=function(){return function(){return function(e){var t=new e.api.Command("unlink");t.execute=function(){var t=new e.api.Selection;t.selection.isCollapsed?e.transactionManager.run(function(){var r=t.getContaining(function(e){return"A"===e.nodeName});r&&(t.placeMarkers(),e.element.unwrap(r.parentNode,r),t.selectMarkers())}):e.api.Command.prototype.execute.apply(this,arguments)},t.queryEnabled=function(){var t=new e.api.Selection;return t.selection.isCollapsed?!!t.getContaining(function(e){return"A"===e.nodeName}):e.api.Command.prototype.queryEnabled.apply(this,arguments)},e.commands.unlink=t}}}.call(exports,e,exports,module))&&(module.exports=t)},tbmq:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("wxAW"),i=_interopRequireDefault(n),a=e("MAbH"),o=function(){function AuthoringCourse(e){var t=e.description,n=e.domainTypes,i=e.faqs,o=e.headerImage,s=e.id,u=e.instructorIds,c=e.isPrivate,l=e.isReal,d=e.isRestrictedMembership,f=e.isSubtitleTranslationEnabled,h=e.isVerificationEnabled,p=e.launchedAt,m=e.level,v=e.name,g=e.overridePartnerLogos,y=e.partners,S=e.partnerIds,b=e.premiumExperiences,C=e.previewUserIds,E=e.primaryLanguageCodes,R=e.promoPhoto,w=e.s3Prefix,I=e.sessionSchedule,T=e.sessionsEnabledAt,M=e.slug,N=e.subtitleLanguageCodes;(0,r.default)(this,AuthoringCourse),this.description=t,this.domainTypes=n,this.faqs=i,this.headerImage=o,this.id=s,this.isPrivate=c,this.isReal=l,this.isRestrictedMembership=d,this.isSubtitleTranslationEnabled=f,this.isVerificationEnabled=h,this.launchedAt=p,this.name=v,this.overridePartnerLogos=g,this.partners=y&&y.map(function(e){return new a(e)}),this.partnerIds=S,this.instructorIds=u,this.premiumExperiences=b,this.previewUserIds=C,this.primaryLanguageCodes=E,this.promoPhoto=R,this.s3Prefix=w,this.sessionSchedule=I,this.sessionsEnabledAt=T,this.slug=M,this.subtitleLanguageCodes=N}return AuthoringCourse.prototype.get=function get(e){return this[e]},(0,i.default)(AuthoringCourse,[{key:"universities",get:function get(){return this.partners}},{key:"isLaunched",get:function get(){return!!this.launchedAt&&this.launchedAt<=Date.now()}}]),AuthoringCourse}();module.exports=o},tmVI:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("wxAW"),i=_interopRequireDefault(n),_=e("41m7"),a=e("Nrie"),o=e("U70p"),s=e("vRtt"),u=e("AHPF"),c=u.ALL_BRANCHES,l=function(){function CourseRatings(){(0,r.default)(this,CourseRatings),this.ratingValue=_(a).find(function(e){return-1===e.value}),this.learnerAudience=_(o).find(function(e){return"ALL_LEARNERS"===e.id}),this.branchId=c,this.statsMap={},this.reviewCollectionsMap={},this.initMapsForBranchId(c)}return CourseRatings.prototype.initMapsForBranchId=function initMapsForBranchId(e){var t=this;this.statsMap[e]={},this.reviewCollectionsMap[e]={},_(o).each(function(r){var n=r.id,i={};_(a).each(function(e){i[e.value]=new s}),t.statsMap[e][n]=null,t.reviewCollectionsMap[e][n]=i})},CourseRatings.prototype.setBranchId=function setBranchId(e){this.branchId=e,this.statsMap[e]||this.initMapsForBranchId(e)},CourseRatings.prototype.setRatingValue=function setRatingValue(e){this.ratingValue=e},CourseRatings.prototype.setLearnerAudience=function setLearnerAudience(e){this.learnerAudience=e},CourseRatings.prototype.appendReviews=function appendReviews(e,t){var r=this.reviewCollection;r.appendPage(e),r.setTotalCount(t)},CourseRatings.prototype.deleteReview=function deleteReview(e){_(this.reviewCollectionsMap).each(function(t){return _(t).each(function(t){t.models=_(t.models).filter(function(t){return t.id!==e})})})},CourseRatings.prototype.setStats=function setStats(e){this.statsMap[this.branchId][this.learnerAudience.id]=e},(0,i.default)(CourseRatings,[{key:"reviewCollection",get:function get(){return this.reviewCollectionsMap[this.branchId][this.learnerAudience.id][this.ratingValue.value]}},{key:"stats",get:function get(){return this.statsMap[this.branchId][this.learnerAudience.id]}}]),CourseRatings}();module.exports=l},uCDY:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("zwoO"),i=_interopRequireDefault(n),a=e("Pf15"),o=_interopRequireDefault(a),s,u,_=e("41m7"),c=e("4EWv"),l=e("vHtE"),d=e("tbmq"),f=e("tcQx"),h=["course","courseRole","sessions","branches"],p=(u=s=function(e){function TeachAppStore(){var t,n,a;(0,r.default)(this,TeachAppStore);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return t=n=(0,i.default)(this,e.call.apply(e,[this].concat(s))),n.course=null,n.courseRole="BROWSER",n.sessions=[],n.branches=[],a=t,(0,i.default)(n,a)}return(0,o.default)(TeachAppStore,e),TeachAppStore.prototype.dehydrate=function dehydrate(){return _.pick.apply(_,[this].concat(h))},TeachAppStore.prototype.rehydrate=function rehydrate(e){Object.assign(this,_.pick.apply(_,[e].concat(h))),this.course=new d(e.course),e.sessions.length>0&&(this.sessions=e.sessions.map(function(e){return new l(e)})),e.branches.length>0&&(this.branches=e.branches.map(function(e){return new f(e)}))},TeachAppStore.prototype.getCourse=function getCourse(){return this.course},TeachAppStore.prototype.getCourseRole=function getCourseRole(){return this.courseRole},TeachAppStore.prototype.getSessions=function getSessions(){return this.sessions},TeachAppStore.prototype.getBranches=function getBranches(){return this.branches},TeachAppStore.prototype.hasPrivateBranch=function hasPrivateBranch(){return!!this.branches.find(function(e){return e.isPrivate})},TeachAppStore.prototype.getBranchForSession=function getBranchForSession(e){return this.branches.find(function(t){return!!t.associatedSessions[e]})},TeachAppStore}(c),s.storeName="TeachAppStore",s.handlers={RECEIVE_COURSE:function RECEIVE_COURSE(e){this.course=new d(e),this.emitChange()},RECEIVE_MEMBERSHIP_FOR_COURSE:function RECEIVE_MEMBERSHIP_FOR_COURSE(e){this.courseRole=e,this.emitChange()},RECEIVE_SESSIONS_FOR_COURSE:function RECEIVE_SESSIONS_FOR_COURSE(e){this.sessions=e.map(function(e){return new l(e)}),this.emitChange()},RECEIVE_BRANCHES_FOR_COURSE:function RECEIVE_BRANCHES_FOR_COURSE(e){this.branches=e.map(function(e){return new f(e)}),this.emitChange()}},u);module.exports=p},uMXu:function(module,exports,e){"use strict";var t={States:{Idle:"idle",InProgress:"inProgress",Success:"success"},EntryTypes:{Flag:"FLAG",Feedback:"FEEDBACK",Story:"STORY"}};module.exports=t},uUiU:function(module,exports){},vRtt:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("wxAW"),i=_interopRequireDefault(n),_=e("41m7"),a=e("5UQX"),o=function(){function RatingCollection(){(0,r.default)(this,RatingCollection),this.models=[],this.page=0,this.totalCount=0}return RatingCollection.prototype.isEmpty=function isEmpty(){return 0===this.models.length},RatingCollection.prototype.setTotalCount=function setTotalCount(e){this.totalCount=e},RatingCollection.prototype.appendPage=function appendPage(e){var t=this;_(e).each(function(e){var r=e.rating,n=e.timestamp,i=e.id,o=new a(r.value,r.active,e.comments.generic,n,i);t.models.push(o)}),this.page+=1},(0,i.default)(RatingCollection,[{key:"length",get:function get(){return this.models.length}},{key:"hasPendingPage",get:function get(){return this.totalCount!==this.length}}]),RatingCollection}();module.exports=o},wWDD:function(module,exports,e){var t=e("+8xK");"string"==typeof t&&(t=[[module.i,t,""]]);var r,n={};n.transform=void 0;var i=e("MTIv")(t,n);t.locals&&(module.exports=t.locals)},"wz+u":function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("zwoO"),i=_interopRequireDefault(n),a=e("Pf15"),o=_interopRequireDefault(a),s,u,c=e("U7vG"),l=e("/KW+"),d=e("vRtt"),f=e("HrPc"),h=(u=s=function(e){function CourseReviewList(t,n){(0,r.default)(this,CourseReviewList);var a=(0,i.default)(this,e.call(this,t,n));return a.handleInfiniteScroll=function(){a.props.reviewCollection.hasPendingPage&&(a.setState({isLoading:!0}),a.props.onInfiniteScroll())},a.state={isLoading:!1,previousPage:t.reviewCollection.page},a}return(0,o.default)(CourseReviewList,e),CourseReviewList.prototype.componentDidUpdate=function componentDidUpdate(){var e=this.props.reviewCollection.page;e>this.state.previousPage&&this.setState({isLoading:!1,previousPage:e})},CourseReviewList.prototype.render=function render(){return c.createElement("div",{className:"rc-CourseReviewList"},c.createElement(f,{isLoading:this.state.isLoading,onInfiniteScroll:this.handleInfiniteScroll},this.props.reviewCollection.models.map(function(e,t){return c.createElement(l,{key:t,ratingFeedback:e})})))},CourseReviewList}(c.Component),s.propTypes={reviewCollection:c.PropTypes.instanceOf(d).isRequired,onInfiniteScroll:c.PropTypes.func.isRequired},u);module.exports=h},x6ZS:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),r=_interopRequireDefault(t),n=e("wxAW"),i=_interopRequireDefault(n),a=function(){function Feedback(e){var t=e.rating,n=e.comments,i=e.timestamp,a=e.context,o=e.debugInfo,s=e.categoryStates,u=e.id;(0,r.default)(this,Feedback),this.rating=t,this.comments=n,this.timestamp=i,this.context=a,this.debugInfo=o,this.categoryStates=s,this.id=u}return Feedback.prototype.toObject=function toObject(){return{rating:this.rating,comments:this.comments}},(0,i.default)(Feedback,[{key:"value",get:function get(){return this.rating.value}},{key:"isActive",get:function get(){return this.rating.active}},{key:"subItemId",get:function get(){return this.context&&this.context.definition.subItemId}},{key:"subItemTitle",get:function get(){return this.context&&this.context.definition.subItemTitle}}]),Feedback}();module.exports=a},yDda:function(module,exports){},yd4f:function(module,exports,e){"use strict";var t=e("i8xy"),_=e("41m7"),r=["branchPropertiesById","conflictMetadataById"],n=t({storeName:"BranchPropertiesStore",dehydrate:function dehydrate(){return _.pick.apply(_,[this].concat(r))},rehydrate:function rehydrate(e){Object.assign(this,_.pick.apply(_,[e].concat(r)))},initialize:function initialize(){this.branchPropertiesById={},this.conflictMetadataById={}},getAllBranchProperties:function getAllBranchProperties(){return this.branchPropertiesById},getAllConflictMetadata:function getAllConflictMetadata(){return this.conflictMetadataById},getBranchPropertiesById:function getBranchPropertiesById(e){return this.branchPropertiesById[e]},getConflictMetadataById:function getConflictMetadataById(e){return this.conflictMetadataById[e]},updateBranchProperties:function updateBranchProperties(e,t){this.branchPropertiesById[e]=t,this.branchPropertiesById[e].id=e},updateConflictMetadata:function updateConflictMetadata(e,t){this.conflictMetadataById[e]=t}});n.handlers={RECEIVED_BRANCHES_FOR_COURSE:function RECEIVED_BRANCHES_FOR_COURSE(e){var t=this;e.forEach(function(e){var r=e.id,n=e.properties,i=e.conflictMetadata;t.updateBranchProperties(r,n),t.updateConflictMetadata(r,i)}),this.emitChange()},RECEIVED_BRANCH_PROPERTIES:function RECEIVED_BRANCH_PROPERTIES(e){var t=e.branchId,r=e.properties;this.updateBranchProperties(t,r),this.emitChange()},SAVE_CONFLICT_METADATA_FOR_BRANCH:function SAVE_CONFLICT_METADATA_FOR_BRANCH(e){var t=e.branchId,r=e.conflictMetadata;this.updateConflictMetadata(t,r),this.emitChange()},SAVE_BRANCH:function SAVE_BRANCH(e){var t=e.branchId,r=e.conflictMetadata;this.updateConflictMetadata(t,r),this.emitChange()}},module.exports=n}});
//# sourceMappingURL=en.6.be16abe11aef22d700b9.js.map